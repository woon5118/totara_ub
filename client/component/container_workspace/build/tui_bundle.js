!function(e){var i={};function a(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,a),t.l=!0,t.exports}a.m=e,a.c=i,a.d=function(e,i,n){a.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,i){if(1&i&&(e=a(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var t in e)a.d(n,t,function(i){return e[i]}.bind(null,t));return n},a.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(i,"a",i),i},a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},a.p="",a(a.s="NVzB")}({"+MEP":function(e,i){e.exports=tui.require("tui/components/profile/MiniProfileCard")},"+ukd":function(e,i){e.exports=tui.require("container_workspace/components/profile/DiscussionAvatar")},"/FYy":function(e,i,a){"use strict";var n=a("9rhR");a.n(n).a},"/Vgf":function(e,i,a){},"/ae1":function(e,i){e.exports=tui.require("tui/components/icons/BackArrow")},"0/tD":function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_request_to_join"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member_request"},name:{kind:"Name",value:"container_workspace_create_member_request"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_declined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_accepted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}}]}}]}}]}},"0V6N":function(e,i,a){"use strict";a.r(i);var n=a("Xi9X"),t={components:{Avatar:a.n(n).a},props:{imageSrc:{required:!0,type:String},imageAlt:{required:!0,type:String},profileUrl:{required:!0,type:String}}},r=a("KHd+"),s=Object(r.a)(t,(function(){var e=this.$createElement,i=this._self._c||e;return i("a",{attrs:{href:this.profileUrl}},[i("Avatar",{attrs:{src:this.imageSrc,alt:this.imageAlt,size:"xxsmall"}})],1)}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0};i.default=s.exports},"0XAu":function(e,i,a){},"0yND":function(e,i,a){"use strict";a.r(i);var n=a("Iik9");a.d(i,"cardGrid",(function(){return n.cardGrid}));var t=a("Vqu5");a.d(i,"PUBLIC",(function(){return t.PUBLIC})),a.d(i,"PRIVATE",(function(){return t.PRIVATE})),a.d(i,"HIDDEN",(function(){return t.HIDDEN})),a.d(i,"isPublic",(function(){return t.isPublic})),a.d(i,"isPrivate",(function(){return t.isPrivate})),a.d(i,"isHidden",(function(){return t.isHidden}))},"12HA":function(e,i){e.exports=tui.require("tui/config")},"12gk":function(e,i,a){},"1G8L":function(e,i){e.exports=tui.require("container_workspace/components/form/EditPostDiscussionForm")},"1QIN":function(e,i,a){"use strict";a.r(i);var n=a("g8/U"),t=a.n(n),r=a("dtfu"),s=a.n(r),o=a("zkAu"),d=a.n(o),c=a("yc2X"),l=a.n(c),u=a("dTgY"),m=a("UpZR"),k=a.n(m),p=a("12HA"),v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_find_workspaces"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_workspace_source"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_workspace_sort"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search_term"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_workspace_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"workspaces"},name:{kind:"Name",value:"container_workspace_workspaces"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_leave"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_seen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"muted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]}]}}]}}]};const _=Object.prototype.hasOwnProperty;var g={components:{SpaceCardsGrid:l.a,WorkspaceFilter:d.a,PageHeading:t.a,Responsive:s.a},props:{selectedSource:{type:[String,Number],default:null},selectedSort:{type:String,required:!0},searchTerm:{type:String,default:""},selectedAccess:{type:String,default:null}},apollo:{workspace:{query:v,fetchPolicy:"network-only",variables(){return{source:this.inner.selectedSource,sort:this.inner.selectedSort,search_term:this.inner.searchTerm,access:this.inner.selectedAccess,theme:p.config.theme.name}},update:({workspaces:e,cursor:i})=>({cursor:i,items:e})}},data(){return{workspace:{cursor:{total:0,next:null},items:[]},inner:{selectedSource:this.selectedSource,selectedSort:this.selectedSort,searchTerm:this.searchTerm,selectedAccess:this.selectedAccess},currentBoundaryName:"l"}},computed:{boundaries(){let e=Object.values(u.cardGrid);return Array.prototype.map.call(e,({boundaries:e,name:i})=>({boundaries:e,name:i}))},cardUnits(){if(!_.call(u.cardGrid,this.currentBoundaryName))return 2;let{cardUnits:e}=u.cardGrid[this.currentBoundaryName];return e},queryVariables(){return{source:this.inner.selectedSource,sort:this.inner.selectedSort,search_term:this.inner.searchTerm,access:this.inner.selectedAccess,theme:p.config.theme.name}}},methods:{updateFilter({source:e,sort:i,searchTerm:a,access:n}){this.inner.selectedSource=e,this.inner.selectedSort=i,this.inner.searchTerm=a,this.inner.selectedAccess=n},joinWorkspace({workspace_id:e,workspace_interactor:i}){const{workspaces:a,cursor:n}=k.a.readQuery({query:v,variables:this.queryVariables});k.a.writeQuery({query:v,variables:this.queryVariables,data:{cursor:n,workspaces:a.map(a=>(a.id==e&&((a=Object.assign({},a)).interactor=i),a))}})},requestToJoinWorkspace({workspace_id:e,workspace_interactor:i}){const{workspaces:a,cursor:n}=k.a.readQuery({query:v,variables:this.queryVariables});k.a.writeQuery({query:v,variables:this.queryVariables,data:{cursor:n,workspaces:a.map(a=>(a.id==e&&((a=Object.assign({},a)).interactor=i),a))}})},leaveWorkspace({workspace_id:e,workspace_interactor:i}){const{workspaces:a,cursor:n}=k.a.readQuery({query:v,variables:this.queryVariables});k.a.writeQuery({query:v,variables:this.queryVariables,data:{cursor:n,workspaces:a.map(a=>(a.id==e&&((a=Object.assign({},a)).interactor=i),a))}})},async loadMoreItems(){this.workspace.cursor.next&&this.$apollo.queries.workspace.fetchMore({variables:{cursor:this.workspace.cursor.next,source:this.inner.selectedSource,sort:this.inner.selectedSort,search_term:this.inner.searchTerm,access:this.inner.selectedAccess},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.workspaces.concat(a.workspaces);return{cursor:a.cursor,workspaces:n}}})}}},f=(a("SDfa"),a("KHd+")),b=function(e){e.options.__langStrings={container_workspace:["find_spaces"]}},N=Object(f.a)(g,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Responsive",{staticClass:"tui-spacesPage",attrs:{breakpoints:e.boundaries},on:{"responsive-resize":function(i){e.currentBoundaryName=i}}},[a("PageHeading",{attrs:{title:e.$str("find_spaces","container_workspace")}}),e._v(" "),a("WorkspaceFilter",{staticClass:"tui-spacesPage__filter",attrs:{"selected-source":e.inner.selectedSource,"selected-sort":e.inner.selectedSort,"selected-access":e.inner.selectedAccess,"search-term":e.inner.searchTerm,"spaces-cursor":e.workspace.cursor,"spaces-is-loading":e.$apollo.queries.workspace.loading},on:{"submit-search":e.updateFilter,filter:e.updateFilter,clear:e.updateFilter}}),e._v(" "),a("SpaceCardsGrid",{staticClass:"tui-spacesPage__grid",attrs:{"max-grid-units":12,"workspace-units":e.cardUnits,workspaces:e.workspace.items,"is-loading":e.$apollo.queries.workspace.loading,cursor:e.workspace.cursor},on:{"join-workspace":e.joinWorkspace,"request-to-join-workspace":e.requestToJoinWorkspace,"leave-workspace":e.leaveWorkspace,loadmoreitems:e.loadMoreItems}})],1)}),[],!1,null,null,null);"function"==typeof b&&b(N),N.options.__hasBlocks={script:!0,template:!0};i.default=N.exports},"1R7l":function(e,i){e.exports=tui.require("totara_reaction/components/SimpleLike")},"1c95":function(e,i,a){"use strict";var n=a("p+Y9");a.n(n).a},"1eSe":function(e,i,a){"use strict";a.r(i);var n=a("jJ8l"),t=a.n(n),r=a("grGL"),s=a.n(r),o=a("tyu8"),d=a("LgKJ"),c=a.n(d),l=a("dTgY"),u=a("12HA"),m=a("QgbB"),k={components:{Card:t.a,Contribute:s.a,Share:c.a},props:{instanceId:{type:[Number,String],required:!0}},data:()=>({workspace:{},showAdder:!1}),apollo:{workspace:{query:m.a,variables(){return{id:this.instanceId,theme:u.config.theme.name}}}},computed:{container(){return{instanceId:this.instanceId,component:"container_workspace",access:this.accessStatus,autoShareRecipient:!0,area:"library",name:this.workspace.name,showModal:!0}},accessStatus(){return this.workspace.access&&(Object(l.isPrivate)(this.workspace.access)||Object(l.isHidden)(this.workspace.access))?o.AccessManager.RESTRICTED:o.AccessManager.PUBLIC}}},p=(a("y2AD"),a("KHd+")),v=function(e){e.options.__langStrings={container_workspace:["select_existing_resource","to_share_with_workspace"]}},_=Object(p.a)(k,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceContributeCard"},[a("Card",{staticClass:"tui-workspaceContributeCard__card"},[a("Contribute",{attrs:{adder:{text:e.$str("select_existing_resource","container_workspace"),destination:e.$str("to_share_with_workspace","container_workspace")},"show-text":!1,"show-icon":!0,styleclass:{circle:!0,primary:!0},size:500,container:e.container},on:{done:function(i){return e.$emit("contribute",i)},"open-adder":function(i){e.showAdder=!0}}})],1),e._v(" "),a("Share",{attrs:{"grid-direction":"horizontal","workspace-id":e.instanceId,"show-adder":e.showAdder,units:12},on:{close:function(i){e.showAdder=!1}}})],1)}),[],!1,null,null,null);"function"==typeof v&&v(_),_.options.__hasBlocks={script:!0,template:!0};i.default=_.exports},"1i2V":function(e,i){e.exports=tui.require("tui/components/tabs/Tab")},"1l6u":function(e,i){e.exports=tui.require("container_workspace/components/recommend/RecommendedSpaces")},"1tX2":function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_my_workspace_urls"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspaces"},name:{kind:"Name",value:"container_workspace_workspaces"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"EnumValue",value:"MEMBER_AND_OWNED"}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"EnumValue",value:"RECENT"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_seen"},arguments:[],directives:[]}]}}]}}]}}]}},"2rtS":function(e,i,a){"use strict";a.r(i);var n=a("dj/p"),t=a.n(n),r=a("Hl3G"),s=a.n(r),o=a("BaY1"),d=a.n(o),c=a("zizw"),l=a.n(c),u=a("VI/h"),m=a.n(u),k=a("drxS"),p=a.n(k),v=a("Mnur"),_=a.n(v),g=a("xO7t"),f=a.n(g),b=a("6bRg"),N=a.n(b),w=a("ao45"),h={components:{SidePanel:d.a,LayoutTwoColumn:t.a,WorkspaceMenu:s.a,WorkspaceFileHeader:l.a,WorkspaceFileFilter:m.a,WorkspaceFileTable:p.a,ModalPresenter:_.a,WorkspaceFileViewModal:f.a,WorkspaceControlMenu:N.a},props:{workspaceId:{type:[Number,String],required:!0},selectedSort:{type:String,required:!0},selectedExtension:{type:String,default:""},workspaceName:{type:String,required:!0}},apollo:{totalFiles:{query:w.a,variables(){return{workspace_id:this.workspaceId,extension:this.inner.selectedExtension,sort:this.inner.selectedSort}},update:({cursor:e})=>parseInt(e.total,10)}},data(){return{totalFiles:0,inner:{selectedSort:this.selectedSort,selectedExtension:this.selectedExtension},openModal:!1,innerFile:{fileName:null,extension:null,downloadUrl:null,contextUrl:null,fileUrl:null,mimeType:null,fileType:null,altText:null}}},methods:{updateFilter({extension:e,sort:i}){this.inner.selectedExtension=e,this.inner.selectedSort=i,this.currentPage=1},navigateToWorkspace({id:e}){document.location.href=this.$url("/container/type/workspace/workspace.php",{id:e})},goBack(){document.location.href=this.$url("/container/type/workspace/workspace.php?",{id:this.workspaceId})},handleOpen({file_name:e,extension:i,context_url:a,download_url:n,file_url:t,mimetype:r,file_type:s,alt_text:o}){this.innerFile.fileName=e,this.innerFile.extension=i,this.innerFile.contextUrl=a,this.innerFile.downloadUrl=n,this.innerFile.mimeType=r,this.innerFile.fileType=s,this.innerFile.altText=o||this.$str("imagealt","core"),this.innerFile.fileUrl=t,this.openModal=!0}}},y=(a("SKvo"),a("KHd+")),F=function(e){e.options.__langStrings={core:["imagealt"]}},S=Object(y.a)(h,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("LayoutTwoColumn",{staticClass:"tui-workspaceFilePage",scopedSlots:e._u([{key:"left",fn:function(i){var n=i.direction;return[a("SidePanel",{attrs:{"show-button-control":!1,"initially-open":!0}},["horizontal"===n?a("WorkspaceMenu",{attrs:{"selected-workspace-id":e.workspaceId},on:{"create-workspace":e.navigateToWorkspace}}):a("WorkspaceControlMenu",{attrs:{"workspace-id":e.workspaceId,"workspace-name":e.workspaceName,"show-navigation":!0}})],1)]}},{key:"right",fn:function(){return[e.$apollo.loading?e._e():a("div",{staticClass:"tui-workspaceFilePage__content"},[a("WorkspaceFileHeader",{on:{"go-back":e.goBack}}),e._v(" "),a("WorkspaceFileFilter",{attrs:{"selected-sort":e.inner.selectedSort,"selected-extension":e.inner.selectedExtension,"workspace-id":e.workspaceId,"show-sort":e.totalFiles>0},on:{"update-filter":e.updateFilter}}),e._v(" "),e.$apollo.loading||0!==e.totalFiles?a("WorkspaceFileTable",{attrs:{"workspace-id":e.workspaceId,"selected-sort":e.inner.selectedSort,"selected-extension":e.inner.selectedExtension},on:{open:e.handleOpen}}):a("p",{staticClass:"tui-workspaceFilePage__message"},[e._v("\n        "+e._s(e.$str("no_file_found","container_workspace"))+"\n      ")]),e._v(" "),a("ModalPresenter",{attrs:{open:e.openModal},on:{"request-close":function(i){e.openModal=!1}}},[a("WorkspaceFileViewModal",{attrs:{"file-name":e.innerFile.fileName,"download-url":e.innerFile.downloadUrl,"context-url":e.innerFile.contextUrl,"mime-type":e.innerFile.mimeType,extension:e.innerFile.extension,"file-type":e.innerFile.fileType,"alt-text":e.innerFile.altText,"file-url":e.innerFile.fileUrl}})],1)],1)]},proxy:!0}])})}),[],!1,null,null,null);"function"==typeof F&&F(S),S.options.__hasBlocks={script:!0,template:!0};i.default=S.exports},"2wx7":function(e,i){e.exports=tui.require("editor_weka/components/Weka")},"34bF":function(e,i,a){},"3MGc":function(e,i,a){"use strict";var n=a("F3ko");a.n(n).a},"3fFV":function(e,i,a){"use strict";a.r(i);var n=a("+MEP"),t=a.n(n),r=a("vyVp"),s=a("Mnur"),o=a.n(s),d=a("XgQu"),c=a.n(d),l=a("KGcv"),u=a.n(l),m=a("PNtU"),k=a.n(m),p=a("12HA"),v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_remove_member_from_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_remove_member"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[]}]}}]},_=a("QgbB"),g={components:{MiniProfileCard:t.a,ModalPresenter:o.a,WorkspaceWarningModal:c.a,DropdownItem:u.a,Lozenge:k.a},props:{userFullName:{type:String,required:!0},userCardDisplay:{type:Object,required:!0},deleteAble:{type:Boolean,default:!1},userId:{type:[String,Number],required:!0},workspaceId:{type:[String,Number],required:!0},labelId:{type:String,required:!0},owner:Boolean},data:()=>({modal:{confirm:!1}}),methods:{async removeMember(){try{await this.$apollo.mutate({mutation:v,refetchAll:!1,variables:{workspace_id:this.workspaceId,user_id:this.userId},refetchQueries:[{query:_.a,variables:{id:this.workspaceId,theme:p.config.theme.name}}]}),this.modal.confirm=!1,this.$emit("remove-member",this.userId)}catch(e){await Object(r.notify)({message:this.$str("error:remove_user","container_workspace"),type:"error"})}}}},f=(a("VqqB"),a("KHd+")),b=function(e){e.options.__langStrings={core:["remove"],container_workspace:["error:remove_user","remove_member_title_warning_msg","remove_member_warning_msg","more_action_for_member","owner"]}},N=Object(f.a)(g,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("article",{staticClass:"tui-workspaceMemberCard",attrs:{"aria-describedby":!!e.owner&&e.$id("lozenge")}},[a("MiniProfileCard",{staticClass:"tui-workspaceMemberCard__profileCard",attrs:{display:e.userCardDisplay,"label-id":e.labelId,"drop-down-button-aria-label":e.$str("more_action_for_member","container_workspace",e.userFullName),"aria-describedby":e.owner?e.$id("lozenge"):null},scopedSlots:e._u([{key:"tag",fn:function(){return[e.owner?a("Lozenge",{staticClass:"tui-workspaceMemberCard__profileCard-tag",attrs:{id:e.$id("lozenge"),text:e.$str("owner","container_workspace"),type:"neutral"}}):e._e()]},proxy:!0},e.deleteAble?{key:"drop-down-items",fn:function(){return[a("DropdownItem",{on:{click:function(i){e.modal.confirm=!0}}},[e._v("\n        "+e._s(e.$str("remove","core"))+"\n      ")])]},proxy:!0}:null],null,!0)}),e._v(" "),a("ModalPresenter",{attrs:{open:e.modal.confirm},on:{"request-close":function(i){e.modal.confirm=!1}}},[a("WorkspaceWarningModal",{attrs:{title:e.$str("remove_member_title_warning_msg","container_workspace"),"message-content":e.$str("remove_member_warning_msg","container_workspace",e.userFullName)},on:{confirm:e.removeMember}})],1)],1)}),[],!1,null,null,null);"function"==typeof b&&b(N),N.options.__hasBlocks={script:!0,template:!0};i.default=N.exports},"42bS":function(e,i,a){"use strict";var n=a("ub7b");a.n(n).a},"49h4":function(e,i){e.exports=tui.require("tui/components/filters/SelectFilter")},"4JD0":function(e,i){e.exports=tui.require("container_workspace/components/action/WorkspacePrimaryAction")},"4mSp":function(e,i,a){"use strict";a.r(i);var n=a("pZp9"),t=a.n(n),r=a("49h4"),s=a.n(r),o=a("FBvN"),d=a.n(o),c=a("UpZR"),l=a.n(c),u=a("R5BP"),m=a.n(u),k=a("vF5l"),p=a.n(k),v=a("JXQf"),_=a.n(v),g=a("E/ux"),f=a.n(g),b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_member_filter_options"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_member_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]},N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_find_members"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search_term"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_member_sort"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_member_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"ACTIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"members"},name:{kind:"Name",value:"container_workspace_members"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"ACTIVE"}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"member_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_remove"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"workspace_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"time_joined"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]}]}}]}}]},w={components:{WorkspaceMemberCard:t.a,SelectFilter:s.a,SearchFilter:d.a,VirtualScroll:m.a,Button:p.a,PageLoader:_.a,WorkspaceMemberRequestList:f.a},props:{workspaceId:{type:[String,Number],required:!0},selectedSort:{type:String,required:!0},totalMembers:{type:[String,Number],required:!0},totalMemberRequests:{type:[String,Number],default:0},canViewMemberRequests:Boolean},apollo:{filter:{query:b,update:({sorts:e})=>({sorts:Array.prototype.map.call(e,({label:e,value:i})=>({id:i,label:e}))})},member:{query:N,fetchPolicy:"network-only",skip(){return this.$apollo.queries.filter.loading},variables(){return{workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm}},update:({cursor:e,members:i})=>({cursor:e,items:i})}},data(){return{filter:{},isLoadMoreVisible:!1,member:{cursor:{total:0,next:null},items:[]},searchTerm:"",sort:this.selectedSort}},computed:{totalMemberText(){return 1==this.totalMembers?this.$str("one_member","container_workspace"):this.$str("total_member_x","container_workspace",this.totalMembers)}},methods:{removeMember(e){const i={search_term:this.searchTerm,sort:this.sort,workspace_id:this.workspaceId};let{cursor:a,members:n}=l.a.readQuery({query:N,variables:i});l.a.writeQuery({query:N,variables:i,data:{cursor:a,members:Array.prototype.filter.call(n,({user:{id:i}})=>i!=e)}})},async onScrollToBottom(){this.isLoadMoreVisible||(await this.loadMoreItems(),this.isLoadMoreVisible=!0)},async loadMore(){await this.loadMoreItems(),this.isLoadMoreVisible=!1},async loadMoreItems(){this.member.cursor.next&&this.$apollo.queries.member.fetchMore({variables:{cursor:this.member.cursor.next,workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.members.concat(a.members);return{cursor:a.cursor,members:n}}})}}},h=(a("eXz4"),a("KHd+")),y=function(e){e.options.__langStrings={container_workspace:["loadmore","one_member","total_member_x","no_member_found","vieweditems","member_list","search_members"],core:["sortby"]}},F=Object(h.a)(w,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceMembersTab"},[e.canViewMemberRequests&&e.totalMemberRequests>0?a("WorkspaceMemberRequestList",{staticClass:"tui-workspaceMembersTab__list",attrs:{"workspace-id":e.workspaceId}}):e._e(),e._v(" "),a("div",{staticClass:"tui-workspaceMembersTab__searchHead"},[a("SearchFilter",{attrs:{"drop-label":"",label:e.$str("search_members","container_workspace"),placeholder:e.$str("search_members","container_workspace")},model:{value:e.searchTerm,callback:function(i){e.searchTerm=i},expression:"searchTerm"}})],1),e._v(" "),e.$apollo.queries.filter.loading?e._e():a("div",{staticClass:"tui-workspaceMembersTab__content"},[a("div",{staticClass:"tui-workspaceMembersTab__head"},[a("h3",{staticClass:"tui-workspaceMembersTab__title"},[a("span",[e._v(e._s(e.totalMemberText))])]),e._v(" "),a("SelectFilter",{attrs:{options:e.filter.sorts,label:e.$str("sortby","core"),"aria-label":e.$str("sortby","core")},model:{value:e.sort,callback:function(i){e.sort=i},expression:"sort"}})],1),e._v(" "),a("div",{staticClass:"tui-workspaceMembersTab__members"},[a("VirtualScroll",{attrs:{"data-key":"id","data-list":e.member.items,"aria-label":e.$str("member_list","container_workspace"),"is-loading":e.$apollo.queries.member.loading,"page-mode":!0},on:{scrollbottom:e.onScrollToBottom},scopedSlots:e._u([{key:"item",fn:function(i){var n=i.item,t=i.posInSet,r=i.setSize;return[a("WorkspaceMemberCard",{staticClass:"tui-workspaceMembersTab__member",attrs:{"user-id":n.user.id,"user-full-name":n.user.fullname,"user-card-display":n.user.card_display,"delete-able":n.member_interactor.can_remove,"workspace-id":e.workspaceId,"aria-posinset":t,"aria-setsize":r,"aria-labelledby":e.$id("item-"+n.id),"label-id":e.$id("item-"+n.id),owner:n.workspace_interactor.own},on:{"remove-member":e.removeMember}})]}},{key:"footer",fn:function(){return[a("PageLoader",{attrs:{fullpage:!1,loading:e.$apollo.queries.member.loading}})]},proxy:!0}],null,!1,2398580528)}),e._v(" "),e.isLoadMoreVisible&&e.member.cursor.next&&!e.$apollo.queries.member.loading?a("div",{staticClass:"tui-workspaceMembersTab__loadMoreContainer"},[a("div",{staticClass:"tui-workspaceMembersTab__viewedMembers"},[[e._v("\n            "+e._s(e.$str("vieweditems","container_workspace",e.member.items.length))+"\n            "+e._s(e.totalMemberText)+"\n          ")]],2),e._v(" "),a("Button",{staticClass:"tui-workspaceMembersTab__loadMore",attrs:{text:e.$str("loadmore","container_workspace")},on:{click:e.loadMore}})],1):e._e(),e._v(" "),e.member.items.length<=0&&!e.$apollo.queries.member.loading?a("p",{staticClass:"tui-workspaceMembersTab__message"},[e._v("\n        "+e._s(e.$str("no_member_found","container_workspace"))+"\n      ")]):e._e()],1)])],1)}),[],!1,null,null,null);"function"==typeof y&&y(F),F.options.__hasBlocks={script:!0,template:!0};i.default=F.exports},"59Wj":function(e,i){e.exports=tui.require("tui/components/filters/FilterBar")},"5gBL":function(e,i){e.exports=tui.require("container_workspace/components/card/DiscussionCard")},"5h9J":function(e,i){e.exports=tui.require("tui/components/buttons/ButtonIcon")},"5qAA":function(e,i){e.exports=tui.require("tui/components/datatable/HeaderCell")},"679m":function(e,i,a){"use strict";var n=a("SMGy");a.n(n).a},"6bRg":function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/WorkspaceControlMenu")},"7Vjt":function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_leave_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"container_workspace_leave"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"member_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_remove"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"workspace_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"muted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"time_joined"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]}]}}]}}]}},"7gWo":function(e,i,a){},"7zOY":function(e,i,a){"use strict";a.r(i);var n=a("5gBL"),t=a.n(n),r=a("Z82V"),s=a.n(r),o=a("yAFK"),d={components:{DiscussionCard:t.a,CommentBox:s.a},props:{firstCommentCursor:{type:String,default:null},creatorImageSrc:{type:String,required:!0},creatorImageAlt:{type:String,default:""},creatorId:{type:[String,Number],required:!0},creatorFullname:{type:String,required:!0},discussionContent:{type:String,required:!0},timeDescription:{type:String,required:!0},pinned:Boolean,reportAble:Boolean,reacted:Boolean,removed:Boolean,totalComments:{type:[String,Number],required:!0},totalReactions:{type:[String,Number],required:!0},discussionId:{type:[String,Number],required:!0},reactAble:{type:Boolean,default:!0},updateAble:{type:Boolean,default:!0},deleteAble:{type:Boolean,default:!0},commentAble:{type:Boolean,default:!0},edited:Boolean,labelId:String,workspaceContextId:[String,Number]},data:()=>({showCommentForm:!1,size:o.SIZE_LARGE,formElement:null}),computed:{showComments(){return parseInt(this.totalComments,10)>0}},methods:{setFormElement(e){null===this.formElement&&(this.formElement=e)},async triggerComment(){this.showCommentForm=!0,await this.$nextTick(),this.formElement&&this.formElement.scrollIntoView(!1)}}},c=(a("lU7F"),a("KHd+")),l=function(e){e.options.__langStrings={container_workspace:["comment"]}},u=Object(c.a)(d,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("article",{staticClass:"tui-workspaceDiscussionWithCommentCard",attrs:{"data-id":e.discussionId}},[a("DiscussionCard",{staticClass:"tui-workspaceDiscussionWithCommentCard__discussionCard",attrs:{"creator-fullname":e.creatorFullname,"creator-image-alt":e.creatorImageAlt||e.creatorFullname,"creator-image-src":e.creatorImageSrc,"creator-id":e.creatorId,"discussion-content":e.discussionContent,"time-description":e.timeDescription,"total-comments":e.totalComments,"total-reactions":e.totalReactions,"discussion-id":e.discussionId,pinned:e.pinned,"react-able":e.reactAble,"delete-able":e.deleteAble,"update-able":e.updateAble,"comment-able":e.commentAble,"report-able":e.reportAble,reacted:e.reacted,removed:e.removed,edited:e.edited,"label-id":e.labelId},on:{"trigger-comment":e.triggerComment,"update-react-status":function(i){return e.$emit("update-discussion-react-status",i)},"update-discussion":function(i){return e.$emit("update-discussion",i)},"delete-discussion":function(i){return e.$emit("delete-discussion",i)}}}),e._v(" "),e.showComments||e.showCommentForm?a("CommentBox",{ref:"comment-box",staticClass:"tui-workspaceDiscussionWithCommentCard__comments",attrs:{"instance-id":e.discussionId,component:"container_workspace",area:"discussion",size:e.size,"show-reply-button-text":!0,"show-like-button-text":!0,"comment-able":e.commentAble,"submit-form-button-text":e.$str("comment","container_workspace"),"with-border":!0,"show-comment-form":e.showCommentForm,"first-cursor":e.firstCommentCursor,"comment-inline-head":!0,editor:{variant:"container_workspace-discussion",compact:!1,contextId:e.workspaceContextId}},on:{"form-ready":e.setFormElement,"create-comment":function(i){return e.$emit("add-new-comment",e.discussionId)}}}):e._e()],1)}),[],!1,null,null,null);"function"==typeof l&&l(u),u.options.__hasBlocks={script:!0,template:!0};i.default=u.exports},"885J":function(e,i,a){"use strict";var n=a("lYm9");a.n(n).a},"8Jqe":function(e,i,a){"use strict";a.r(i);var n=a("tkAW"),t=a.n(n),r=a("u5iS"),s=a.n(r),o=a("rhow"),d=a.n(o),c=a("AL+t"),l=a.n(c),u={components:{Modal:t.a,ModalContent:s.a,FileIcon:d.a,CoreVideoBlock:l.a},props:{fileName:{type:String,required:!0},downloadUrl:{type:String,required:!0},contextUrl:{type:String,required:!0},fileUrl:{type:String,required:!0},extension:{type:String,required:!0},mimeType:{type:String,required:!0},fileType:{type:String,required:!0},altText:{type:String,required:!0}}},m=(a("XXtg"),a("KHd+")),k=function(e){e.options.__langStrings={container_workspace:["view_discussion","file_preview_empty","file_image","file_video","file_audio"],core:["download"]}},p=Object(m.a)(u,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceFileViewModal",attrs:{dismissable:{overlayClose:!1,esc:!0,backdropClick:!0}}},[a("ModalContent",{staticClass:"tui-workspaceFileViewModal__content",attrs:{"close-button":!0}},[a("div",{staticClass:"tui-workspaceFileViewModal__header"},[a("p",{staticClass:"tui-workspaceFileViewModal__title"},[e._v(e._s(e.fileName))]),e._v(" "),a("div",{staticClass:"tui-workspaceFileViewModal__links"},[a("a",{staticClass:"tui-workspaceFileViewModal__discussion",attrs:{href:e.contextUrl}},[e._v("\n          "+e._s(e.$str("view_discussion","container_workspace"))+"\n        ")]),e._v(" "),a("a",{staticClass:"tui-workspaceFileViewModal__link",attrs:{href:e.downloadUrl}},[e._v("\n          "+e._s(e.$str("download","core"))+"\n        ")])])]),e._v(" "),"IMAGE"===e.fileType?[a("img",{staticClass:"tui-workspaceFileViewModal__media",attrs:{src:e.fileUrl,alt:e.altText}})]:"VIDEO"===e.fileType?[a("CoreVideoBlock",{staticClass:"tui-workspaceFileViewModal__media",attrs:{url:e.fileUrl,filename:e.fileName,mimetype:e.mimeType}})]:"AUDIO"===e.fileType?[a("audio",{staticClass:"tui-workspaceFileViewModal__audio",attrs:{controls:""}},[a("source",{attrs:{src:e.fileUrl,type:e.mimeType}})])]:a("div",{staticClass:"tui-workspaceFileViewModal__area"},[a("div",{staticClass:"tui-workspaceFileViewModal__area-icon"},[a("FileIcon",{attrs:{filename:e.fileName}})],1),e._v(" "),a("p",[e._v("\n        "+e._s(e.$str("file_preview_empty","container_workspace"))+"\n      ")])])],2)],1)}),[],!1,null,null,null);"function"==typeof k&&k(p),p.options.__hasBlocks={script:!0,template:!0};i.default=p.exports},"8dWg":function(e,i,a){"use strict";var n=a("qeuR");a.n(n).a},"8opU":function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceAccessForm")},"93eb":function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceEditModal")},"9CoU":function(e,i,a){},"9ZTs":function(e,i,a){"use strict";a.r(i);var n=a("bYkL"),t=a.n(n),r=a("59Wj"),s=a.n(r),o=a("FBvN"),d=a.n(o),c=a("mURQ"),l=a.n(c),u=a("5qAA"),m=a.n(u),k=a("KGot"),p=a.n(k),v=a("Xi9X"),_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_non_member_users"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search_term"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_non_member_users_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"users"},name:{kind:"Name",value:"container_workspace_non_member_users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]}]}}]}}]}}]}}]},g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_user_table_fields"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"fields"},name:{kind:"Name",value:"container_workspace_user_table_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}}]}}]},f={components:{Avatar:a.n(v).a,Adder:t.a,FilterBar:s.a,SearchFilter:d.a,SelectTable:l.a,HeaderCell:m.a,Cell:p.a},props:{workspaceId:{type:[String,Number],required:!0},open:Boolean},apollo:{fields:g,users:{query:_,fetchPolicy:"network-only",context:{batch:!0},variables(){return{workspace_id:this.workspaceId,search_term:this.searchTerm,cursor:null}},skip(){return!this.open},update:({cursor:e,users:i})=>({cursor:e,items:i})}},data:()=>({fields:[],users:{items:[],cursor:{total:0,next:null}},searchTerm:"",selectedUserIds:[]}),computed:{selectedUsers(){return this.users.items.filter(({id:e})=>Array.prototype.includes.call(this.selectedUserIds,e))}},beforeDestroy(){this.selectedUserIds=[]},methods:{async loadMore(){this.$apollo.queries.users.fetchMore({variables:{cursor:this.users.cursor.next},updateQuery:({users:e},{fetchMoreResult:{users:i,cursor:a}})=>({cursor:a,users:e.concat(i)})})},addedUsers(e){this.$emit("add-members",e),this.$apollo.queries.users.refetch()}}},b=(a("8dWg"),a("KHd+")),N=function(e){e.options.__langStrings={container_workspace:["add_members_to_space","filter_users","people_selected"],totara_core:["search"],core:["name"]}},w=Object(b.a)(f,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Adder",{staticClass:"tui-workspaceUserAdder",attrs:{open:e.open,title:e.$str("add_members_to_space","container_workspace"),"custom-selected":function(i){return e.$str("people_selected","container_workspace",i)},loading:e.$apollo.loading,"show-load-more":e.users.cursor.next},on:{cancel:function(i){return e.$emit("cancel")},"selected-tab-active":function(i){e.selectedUserIds=i},"load-more":e.loadMore,added:function(i){return e.addedUsers(i)}},scopedSlots:e._u([{key:"browse-list",fn:function(i){var n=i.disabledItems,t=i.selectedItems,r=i.update;return[a("SelectTable",{attrs:{"large-check-box":!0,"no-label-offset":!0,value:t,"disabled-ids":n,"checkbox-v-align":"center","select-all-enabled":!0,"border-bottom-hidden":!0,data:e.users.items||[]},on:{input:function(e){return r(e)}},scopedSlots:e._u([{key:"header-row",fn:function(){return[a("HeaderCell",{attrs:{size:"12",valign:"start"}},[e._v("\n          "+e._s(e.$str("name","core"))+"\n        ")]),e._v(" "),e._l(e.fields,(function(i,n){var t=i.position,r=i.label;return a("HeaderCell",{key:n,attrs:{"data-field-position":t,size:"4"}},[e._v("\n          "+e._s(r)+"\n        ")])}))]},proxy:!0},{key:"row",fn:function(i){var n=i.row,t=n.card_display,r=n.fullname;return[a("Cell",{attrs:{size:"10","column-header":e.$str("name","core"),valign:"start"}},[a("div",{staticClass:"tui-workspaceUserAdder__name"},[t.profile_picture_url?a("Avatar",{attrs:{src:t.profile_picture_url,alt:t.profile_picture_alt||r,size:"xsmall"}}):e._e(),e._v(" "),a("p",{staticClass:"tui-workspaceUserAdder__name-text"},[e._v("\n              "+e._s(r)+"\n            ")])],1)]),e._v(" "),e._l(e.fields,(function(i,n){var r=i.position;return[a("Cell",{key:n,attrs:{size:"4","data-field-position":r}},[e._v("\n            "+e._s(t.display_fields[r].value||"")+"\n          ")])]}))]}}],null,!0)})]}},{key:"basket-list",fn:function(i){var n=i.selectedItems,t=i.update,r=i.disabledItems;return[a("SelectTable",{attrs:{"large-check-box":!0,"no-label-offset":!0,value:n,"disabled-ids":r,"checkbox-v-align":"center","select-all-enabled":!0,"border-bottom-hidden":!0,data:e.selectedUsers},on:{input:function(e){return t(e)}},scopedSlots:e._u([{key:"header-row",fn:function(){return[a("HeaderCell",{attrs:{size:"12",valign:"start"}},[e._v("\n          "+e._s(e.$str("name","core"))+"\n        ")]),e._v(" "),e._l(e.fields,(function(i,n){var t=i.position,r=i.label;return a("HeaderCell",{key:n,attrs:{"data-field-position":t,size:"4"}},[e._v("\n          "+e._s(r)+"\n        ")])}))]},proxy:!0},{key:"row",fn:function(i){var n=i.row,t=n.card_display,r=n.fullname;return[a("Cell",{attrs:{size:"10","column-header":e.$str("name","core"),valign:"start"}},[a("div",{staticClass:"tui-workspaceUserAdder__name"},[t.profile_picture_url?a("Avatar",{attrs:{src:t.profile_picture_url,alt:t.profile_picture_alt||r,size:"xsmall"}}):e._e(),e._v(" "),a("p",{staticClass:"tui-workspaceUserAdder__name-text"},[e._v("\n              "+e._s(r)+"\n            ")])],1)]),e._v(" "),e._l(e.fields,(function(i,n){var r=i.position;return[a("Cell",{key:n,attrs:{size:"4","data-field-position":r}},[e._v("\n            "+e._s(t.display_fields[r].value||"")+"\n          ")])]}))]}}],null,!0)})]}}])},[a("FilterBar",{attrs:{slot:"browse-filters","has-top-bar":!1,title:e.$str("filter_users","container_workspace")},slot:"browse-filters",scopedSlots:e._u([{key:"filters-left",fn:function(){return[a("SearchFilter",{attrs:{name:"user-search-input","drop-label":"",placeholder:e.$str("search","totara_core"),label:e.$str("filter_users","container_workspace")},model:{value:e.searchTerm,callback:function(i){e.searchTerm=i},expression:"searchTerm"}})]},proxy:!0}])})],1)}),[],!1,null,null,null);"function"==typeof N&&N(w),w.options.__hasBlocks={script:!0,template:!0};i.default=w.exports},"9r5D":function(e,i,a){"use strict";a.r(i);var n=a("rLBA"),t=a.n(n),r=a("vF5l"),s=a.n(r),o=a("KGcv"),d=a.n(o),c=a("gLvT"),l=a.n(c),u=a("vyVp"),m=a("x4nq"),k=a("0/tD"),p=a("7Vjt"),v={components:{Button:s.a,LoadingButton:t.a,DropdownItem:d.a,Dropdown:l.a},props:{workspaceId:{type:[String,Number],required:!0},title:{type:String,required:!0},image:{type:String,required:!0},url:{type:String,required:!0},joined:Boolean,joinAble:Boolean,requestToJoinAble:Boolean,hasRequestedToJoin:Boolean,owned:Boolean},data:()=>({submitting:!1}),watch:{joined(e){this.$nextTick(()=>{e?this.$refs.joinedButtonRef.$el.focus():this.$refs.joinButtonRef.$el.focus()})}},methods:{handleClick(e){window.location.href=e},async joinWorkspace(){if(!this.submitting){this.submitting=!0;try{const{data:{member:e}}=await this.$apollo.mutate({mutation:m.a,refetchAll:!1,variables:{workspace_id:this.workspaceId}});this.$emit("join-workspace",e)}catch(e){await Object(u.notify)({message:this.$str("error:join_space","container_workspace"),type:"error"})}finally{this.submitting=!1}}},async leaveWorkspace(){if(!this.submitting){this.submitting=!0;try{const{data:{member:e}}=await this.$apollo.mutate({mutation:p.a,variables:{workspace_id:this.workspaceId}});this.$emit("leave-workspace",e)}catch(e){await Object(u.notify)({message:this.$str("error:leave_space","container_workspace"),type:"error"})}finally{this.submitting=!1}}},async requestToJoinWorkspace(){if(!this.submitting){this.submitting=!0;try{const{data:{member_request:e}}=await this.$apollo.mutate({mutation:k.a,refetchAll:!1,variables:{workspace_id:this.workspaceId}});this.$emit("request-to-join-workspace",e)}catch(e){await Object(u.notify)({message:this.$str("error:request_to_join","container_workspace"),type:"error"})}finally{this.submitting=!1}}}}},_=(a("lbpC"),a("KHd+")),g=function(e){e.options.__langStrings={container_workspace:["join_space","join_me","joined","request_to_join","request_to_join_space","requested_to_join","leave_workspace","error:join_space","error:leave_space","error:request_to_join"]}},f=Object(_.a)(v,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-originalSpaceCard",style:{"background-image":"url('"+e.image+"')"},on:{click:function(i){return e.handleClick(e.url)}}},[a("div",{staticClass:"tui-originalSpaceCard__titleBox"},[a("h3",{staticClass:"tui-originalSpaceCard__title"},[a("a",{staticClass:"tui-originalSpaceCard__link",attrs:{href:e.url}},[e._v("\n        "+e._s(e.title)+"\n      ")])])]),e._v(" "),a("div",{staticClass:"tui-originalSpaceCard__actions"},[!e.joined&&e.joinAble?a("LoadingButton",{ref:"joinButtonRef",staticClass:"tui-originalSpaceCard__actions-button",attrs:{text:e.$str("join_me","container_workspace"),"aria-label":e.$str("join_space","container_workspace",e.title),loading:e.submitting},on:{click:function(i){return i.stopPropagation(),e.joinWorkspace(i)}}}):!e.joined&&e.hasRequestedToJoin?a("Button",{staticClass:"tui-originalSpaceCard__actions-button",attrs:{text:e.$str("requested_to_join","container_workspace"),disabled:!0}}):!e.joined&&e.requestToJoinAble?a("LoadingButton",{staticClass:"tui-originalSpaceCard__actions-button",attrs:{text:e.$str("request_to_join","container_workspace"),"aria-label":e.$str("request_to_join_space","container_workspace",e.title),loading:e.submitting},on:{click:function(i){return i.stopPropagation(),e.requestToJoinWorkspace(i)}}}):e.joined?a("Dropdown",{staticClass:"tui-originalSpaceCard__actions-dropDown",attrs:{disabled:e.owned},scopedSlots:e._u([{key:"trigger",fn:function(i){var n=i.isOpen,t=i.toggle;return[a("Button",{ref:"joinedButtonRef",attrs:{text:e.$str("joined","container_workspace"),caret:!e.owned,"aria-expanded":n,disabled:e.owned},on:{click:function(e){return e.stopPropagation(),t(e)}}})]}}])},[e._v(" "),a("DropdownItem",{on:{click:function(i){return i.stopPropagation(),i.preventDefault(),e.leaveWorkspace(i)}}},[e._v("\n        "+e._s(e.$str("leave_workspace","container_workspace"))+"\n      ")])],1):e._e()],1)])}),[],!1,null,null,null);"function"==typeof g&&g(f),f.options.__hasBlocks={script:!0,template:!0};i.default=f.exports},"9rhR":function(e,i,a){},"9yv5":function(e,i,a){},"AL+t":function(e,i){e.exports=tui.require("tui/components/json_editor/nodes/VideoBlock")},AcEP:function(e,i,a){"use strict";var n=a("7gWo");a.n(n).a},"Af+r":function(e,i,a){"use strict";var n=a("yAWT");a.n(n).a},Aros:function(e,i){e.exports=tui.require("tui/components/tag/TagList")},B4lK:function(e,i,a){},BN8m:function(e,i){e.exports=tui.require("tui/components/buttons/ButtonGroup")},BaY1:function(e,i){e.exports=tui.require("tui/components/sidepanel/SidePanel")},BxDI:function(e,i){e.exports=tui.require("tui/components/decor/Separator")},"C+/B":function(e,i){e.exports=tui.require("tui/components/modal/ConfirmationModal")},CDYD:function(e,i,a){"use strict";var n=a("Y4bG");a.n(n).a},CQl8:function(e,i,a){"use strict";var n=a("B4lK");a.n(n).a},CWIl:function(e,i){e.exports=tui.require("totara_engage/grid")},CdMC:function(e,i,a){"use strict";a.r(i);var n=a("59Wj"),t=a.n(n),r=a("49h4"),s=a.n(r),o=a("FBvN"),d=a.n(o),c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_workspace_filter_options"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sources"},name:{kind:"Name",value:"container_workspace_workspace_sources"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_workspace_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"accesses"},name:{kind:"Name",value:"container_workspace_workspace_accesses"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]},l={components:{FilterBar:t.a,SelectFilter:s.a,SearchFilter:d.a},props:{selectedSource:{type:String,default:null},selectedSort:{type:String,default:null},searchTerm:{type:String,default:""},selectedAccess:{type:String,default:null},spacesCursor:{type:Object,default:()=>({total:0,next:""})},spacesIsLoading:Boolean},apollo:{options:{query:c,update({sources:e,sorts:i,accesses:a}){return a=[{label:this.$str("all","core"),value:null}].concat(a),{sources:Array.prototype.map.call(e,({value:e,label:i})=>({id:e,label:i})),sorts:Array.prototype.map.call(i,({value:e,label:i})=>({id:e,label:i})),accesses:Array.prototype.map.call(a,({value:e,label:i})=>({id:e,label:i}))}}}},data(){return{options:{},selection:{source:this.selectedSource,sort:this.selectedSort,access:this.selectedAccess,searchTerm:this.searchTerm}}},watch:{selection:{deep:!0,handler(){this.$emit("filter",this.selection)}}},methods:{submitSearch(){this.$emit("submit-search",this.selection)}}},u=(a("3MGc"),a("KHd+")),m=function(e){e.options.__langStrings={container_workspace:["membership","search_spaces","total_space_x","single_space","find_spaces","workspace_access"],core:["all","sortby"]}},k=Object(u.a)(l,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceFilter"},[e.$apollo.loading?e._e():[a("FilterBar",{staticClass:"tui-workspaceFilter__filter",attrs:{title:e.$str("find_spaces","container_workspace")},scopedSlots:e._u([{key:"filters-left",fn:function(i){var n=i.stacked;return[a("SelectFilter",{attrs:{label:e.$str("workspace_access","container_workspace"),"show-label":!0,options:e.options.accesses,stacked:n},model:{value:e.selection.access,callback:function(i){e.$set(e.selection,"access",i)},expression:"selection.access"}}),e._v(" "),a("SelectFilter",{attrs:{label:e.$str("membership","container_workspace"),"show-label":!0,options:e.options.sources,stacked:n},model:{value:e.selection.source,callback:function(i){e.$set(e.selection,"source",i)},expression:"selection.source"}})]}},{key:"filters-right",fn:function(i){var n=i.stacked;return[a("SearchFilter",{attrs:{label:e.$str("search_spaces","container_workspace"),"drop-label":"",placeholder:e.$str("search_spaces","container_workspace"),stacked:n},model:{value:e.selection.searchTerm,callback:function(i){e.$set(e.selection,"searchTerm",i)},expression:"selection.searchTerm"}})]}}],null,!1,18933867),model:{value:e.selection,callback:function(i){e.selection=i},expression:"selection"}}),e._v(" "),a("div",{staticClass:"tui-workspaceFilter__sortFilter"},[e.spacesIsLoading?e._e():a("div",{staticClass:"tui-workspaceFilter__total"},[0===e.spacesCursor.total||e.spacesCursor.total>1?[e._v("\n          "+e._s(e.$str("total_space_x","container_workspace",e.spacesCursor.total))+"\n        ")]:1===e.spacesCursor.total?[e._v("\n          "+e._s(e.$str("single_space","container_workspace"))+"\n        ")]:e._e()],2),e._v(" "),a("SelectFilter",{staticClass:"tui-workspaceFilter__filter",attrs:{label:e.$str("sortby","core"),"show-label":!0,options:e.options.sorts},model:{value:e.selection.sort,callback:function(i){e.$set(e.selection,"sort",i)},expression:"selection.sort"}})],1)]],2)}),[],!1,null,null,null);"function"==typeof m&&m(k),k.options.__hasBlocks={script:!0,template:!0};i.default=k.exports},Csd8:function(e,i,a){},D3AF:function(e,i){e.exports=tui.require("tui/components/adder/AudienceAdder")},D7rz:function(e,i,a){"use strict";a.r(i);var n=a("YPxT"),t=a.n(n),r=a("Mnur"),s=a.n(r),o=a("XgQu"),d=a.n(o),c=a("12HA"),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_engage_share_with_recipient"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"items"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_share_item"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recipient"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_recipient_in"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"shared"},name:{kind:"Name",value:"totara_engage_share_with_recipient"},arguments:[{kind:"Argument",name:{kind:"Name",value:"items"},value:{kind:"Variable",name:{kind:"Name",value:"items"}}},{kind:"Argument",name:{kind:"Name",value:"recipient"},value:{kind:"Variable",name:{kind:"Name",value:"recipient"}}}],directives:[]}]}}]},u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_contribution_cards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topic"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"section"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"image_preview_mode"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"contribution"},name:{kind:"Name",value:"container_workspace_contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"ObjectField",name:{kind:"Name",value:"topic"},value:{kind:"Variable",name:{kind:"Name",value:"topic"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"ObjectField",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"ObjectField",name:{kind:"Name",value:"section"},value:{kind:"Variable",name:{kind:"Name",value:"section"}}}]}},{kind:"Argument",name:{kind:"Name",value:"footnotes"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}]}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imagetuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}},{kind:"Argument",name:{kind:"Name",value:"preview_mode"},value:{kind:"Variable",name:{kind:"Name",value:"image_preview_mode"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"footnotes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"props"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_bookmark"},arguments:[],directives:[]}]}}]}}]}}]}}]},m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_check_share_access_for_library"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"items"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_share_item"}}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_check_share_access"},arguments:[{kind:"Argument",name:{kind:"Name",value:"items"},value:{kind:"Variable",name:{kind:"Name",value:"items"}}},{kind:"Argument",name:{kind:"Name",value:"workspace"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"instanceid"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"StringValue",value:"container_workspace",block:!1}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"StringValue",value:"library",block:!1}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"warning"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]},k=a("pxdy"),p=a.n(k),v={components:{EngageAdderModal:t.a,ModalPresenter:s.a,WorkspaceWarningModal:d.a},mixins:[p.a],props:{workspaceId:{type:[String,Number],required:!0},showAdder:Boolean},data:()=>({currentItems:[],warning:{message:"",modal:!1}}),watch:{showAdder(e){this.skipCardsQuery=!e}},created(){this.skipCardsQuery=!0},apollo:{contribution:{query:u,fetchPolicy:"network-only",variables(){return Object.assign({},this.filterValue,{workspace_id:this.workspaceId,area:"adder",include_footnotes:!1,image_preview_mode:"totara_engage_adder_thumbnail",theme:c.config.theme.name})},update({contribution:{cursor:e,cards:i}}){return{cursor:e,cards:this.canContribute?this.$_addContributeCard(i):i}},skip(){return this.skipCardsQuery}}},methods:{async processAddingItems(e){let i=e.map(e=>JSON.parse(e));this.currentItems=i;let{warning:a,message:n}=await this.checkAccessSetting(i);if(a)return this.warning.message=n,this.warning.modal=!0,void this.$emit("close");await this.shareItems(i)},async checkAccessSetting(e){const{data:{result:{warning:i,message:a}}}=await this.$apollo.query({query:m,variables:{items:e,workspace_id:this.workspaceId}});return{warning:i,message:a}},async shareItems(e){try{await this.$apollo.mutate({mutation:l,refetchAll:!1,refetchQueries:["container_workspace_shared_cards"],variables:{items:e,recipient:{instanceid:this.workspaceId,component:"container_workspace",area:"library"}}}),this.warning.modal=!1,this.warning.message=""}finally{this.$emit("close")}},closeWarning(){this.warning.modal=!1,this.warning.message="",this.currentItems=[]},async loadMoreItems(){this.contribution.cursor.next&&this.$apollo.queries.contribution.fetchMore({variables:{cursor:this.contribution.cursor.next,workspace_id:this.workspaceId,area:"adder",include_footnotes:!1,image_preview_mode:"totara_engage_adder_thumbnail",theme:c.config.theme.name},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.contribution.cards.concat(a.contribution.cards);return{contribution:{cursor:a.contribution.cursor,cards:n}}}})}}},_=a("KHd+"),g=function(e){e.options.__langStrings={container_workspace:["workspace:add_library","warning_change_title"],core:["continue"]}},f=Object(_.a)(v,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",[a("ModalPresenter",{attrs:{open:e.warning.modal},on:{"request-close":e.closeWarning}},[a("WorkspaceWarningModal",{attrs:{title:e.$str("warning_change_title","container_workspace"),"message-content":e.warning.message,"close-button":!1,"confirm-button-text":e.$str("continue","core")},on:{confirm:function(i){return e.shareItems(e.currentItems)}}})],1),e._v(" "),a("EngageAdderModal",{attrs:{title:e.$str("workspace:add_library","container_workspace"),open:e.showAdder,cards:e.contribution.cards,cursor:e.contribution.cursor,"filter-value":e.filterValue,"filter-component":"container_workspace","filter-area":"adder"},on:{"load-more":e.loadMoreItems,added:e.processAddingItems,cancel:function(i){return e.$emit("close",i)},topic:e.filterTopic,search:e.filterSearch,section:e.filterSection}})],1)}),[],!1,null,null,null);"function"==typeof g&&g(f),f.options.__hasBlocks={script:!0,template:!0};i.default=f.exports},D9If:function(e,i){e.exports=tui.require("tui/components/grid/GridItem")},DPa1:function(e,i){e.exports=tui.require("container_workspace/components/content/tabs/WorkspaceDiscussionTab")},DRyk:function(e,i,a){"use strict";a.r(i);var n=a("fCWf"),t=a.n(n),r=a("Mnur"),s=a.n(r),o=a("cNVA"),d=a.n(o),c={components:{ActionLink:t.a,ModalPresenter:s.a,WorkspaceModal:d.a},props:{canCreate:Boolean},data:()=>({openModal:!1}),methods:{navigateToSpace({id:e}){this.openModal=!1,document.location.href=this.$url("/container/type/workspace/workspace.php",{id:e})}}},l=(a("tSSp"),a("KHd+")),u=function(e){e.options.__langStrings={container_workspace:["no_spaces","find_spaces","or","create_space"]}},m=Object(l.a)(c,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-emptySpacesHeader"},[a("ModalPresenter",{attrs:{open:e.openModal},on:{"request-close":function(i){e.openModal=!1}}},[a("WorkspaceModal",{on:{"create-workspace":e.navigateToSpace}})],1),e._v(" "),a("h1",{staticClass:"tui-emptySpacesHeader__title"},[e._v("\n    "+e._s(e.$str("no_spaces","container_workspace"))+"\n  ")]),e._v(" "),a("div",{staticClass:"tui-emptySpacesHeader__actionBox"},[a("ActionLink",{staticClass:"tui-emptySpacesHeader__actionLink",attrs:{href:e.$url("/container/type/workspace/spaces.php"),text:e.$str("find_spaces","container_workspace"),styleclass:{primary:!0}}}),e._v(" "),e.canCreate?a("p",[a("span",[e._v(e._s(e.$str("or","container_workspace")))]),e._v(" "),a("a",{attrs:{href:"#"},on:{click:function(i){i.preventDefault(),e.openModal=!0}}},[e._v("\n        "+e._s(e.$str("create_space","container_workspace"))+"\n      ")])]):e._e()],1)],1)}),[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};i.default=m.exports},DmIm:function(e,i,a){"use strict";a.r(i);var n=a("yikf"),t=a.n(n),r=a("5qAA"),s=a.n(r),o=a("KGot"),d=a.n(o),c=a("vF5l"),l=a.n(c),u=a("JXQf"),m=a.n(u),k=a("ao45"),p={components:{HeaderCell:s.a,Cell:d.a,Button:l.a,PageLoader:m.a,Table:t.a},props:{workspaceId:{type:[Number,String],required:!0},selectedSort:{type:String,required:!0},selectedExtension:{type:String,default:""}},apollo:{page:{query:k.a,fetchPolicy:"network-only",variables(){return{workspace_id:this.workspaceId,extension:this.selectedExtension,sort:this.selectedSort}},update:({cursor:e,files:i})=>({cursor:e,files:i})}},data:()=>({page:{files:[],cursor:{total:0,next:null}}}),methods:{async loadMoreItems(){this.page.cursor.next&&this.$apollo.queries.page.fetchMore({variables:{workspace_id:this.workspaceId,extension:this.selectedExtension,sort:this.selectedSort,cursor:this.page.cursor.next},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.files.concat(a.files);return{cursor:a.cursor,files:n}}})}}},v=(a("q80e"),a("KHd+")),_=function(e){e.options.__langStrings={container_workspace:["actions","size","uploaded_by","file_name","file_date","format","view_discussion","loadmore","vieweditems","total_files"],core:["download","size"]}},g=Object(v.a)(p,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return e.page.files.length>0?a("div",[a("Table",{staticClass:"tui-workspaceFileTable",attrs:{data:e.page.files,"expandable-rows":!1},scopedSlots:e._u([{key:"header-row",fn:function(){return[a("HeaderCell",{attrs:{size:"7"}},[e._v("\n        "+e._s(e.$str("file_name","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"2"}},[e._v("\n        "+e._s(e.$str("format","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"2"}},[e._v("\n        "+e._s(e.$str("size","core"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"2"}},[e._v("\n        "+e._s(e.$str("file_date","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"5"}},[e._v("\n        "+e._s(e.$str("uploaded_by","container_workspace"))+"\n      ")]),e._v(" "),a("HeaderCell",{attrs:{size:"4"}},[e._v("\n        "+e._s(e.$str("actions","container_workspace"))+"\n      ")])]},proxy:!0},{key:"row",fn:function(i){var n=i.row;return[a("Cell",{attrs:{size:"7","column-header":e.$str("file_name","container_workspace")}},[a("a",{attrs:{href:"javascript:;"},on:{click:function(i){return i.preventDefault(),e.$emit("open",n)}}},[e._v("\n          "+e._s(n.file_name)+"\n        ")])]),e._v(" "),a("Cell",{attrs:{size:"2","column-header":e.$str("format","container_workspace")}},[e._v("\n        "+e._s(n.extension)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"2","column-header":e.$str("size","core")}},[e._v("\n        "+e._s(n.file_size)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"2","column-header":e.$str("file_date","container_workspace")}},[e._v("\n        "+e._s(n.date)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"5","column-header":e.$str("uploaded_by","container_workspace")}},[e._v("\n        "+e._s(n.author.fullname)+"\n      ")]),e._v(" "),a("Cell",{attrs:{size:"4","column-header":e.$str("actions","container_workspace")}},[a("div",{staticClass:"tui-workspaceFileTable__action"},[a("a",{attrs:{href:n.context_url}},[e._v("\n            "+e._s(e.$str("view_discussion","container_workspace"))+"\n          ")]),e._v(" "),a("a",{attrs:{href:n.download_url}},[e._v("\n            "+e._s(e.$str("download","core"))+"\n          ")])])])]}}],null,!1,2658767421)}),e._v(" "),a("PageLoader",{attrs:{fullpage:!1,loading:e.$apollo.loading}}),e._v(" "),e.page.files.length<e.page.cursor.total&&!e.$apollo.loading?a("div",{staticClass:"tui-workspaceFileTable__loadMoreContainer"},[a("div",{staticClass:"tui-workspaceFileTable__viewedFiles"},[e._v("\n      "+e._s(e.$str("vieweditems","container_workspace",e.page.files.length))+"\n      "+e._s(e.$str("total_files","container_workspace",e.page.cursor.total))+"\n    ")]),e._v(" "),a("Button",{staticClass:"tui-workspaceFileTable__loadMore",attrs:{text:e.$str("loadmore","container_workspace")},on:{click:e.loadMoreItems}})],1):e._e()],1):e._e()}),[],!1,null,null,null);"function"==typeof _&&_(g),g.options.__hasBlocks={script:!0,template:!0};i.default=g.exports},DmeC:function(e,i,a){"use strict";a.r(i);var n=a("59Wj"),t=a.n(n),r=a("49h4"),s=a.n(r),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_file_filter_options"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_file_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"extensions"},name:{kind:"Name",value:"container_workspace_file_extensions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}}]}}]},d={components:{FilterBar:t.a,SelectFilter:s.a},props:{selectedSort:{type:String,required:!0},selectedExtension:{type:String,default:""},workspaceId:{type:[Number,String],required:!0},showSort:{type:Boolean,required:!0}},apollo:{filter:{query:o,variables(){return{workspace_id:this.workspaceId}},update({sorts:e,extensions:i}){return(i=Array.prototype.map.call(i,({value:e,label:i})=>({id:e,label:i}))).unshift({id:"",label:this.$str("all","core")}),{extensions:i,sorts:Array.prototype.map.call(e,({label:e,value:i})=>({id:i,label:e}))}}}},data(){return{selection:{sort:this.selectedSort,extension:this.selectedExtension}}}},c=(a("Af+r"),a("KHd+")),l=function(e){e.options.__langStrings={container_workspace:["file_format","files","no_file_found"],core:["sortby","all"]}},u=Object(c.a)(d,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceFileFilter"},[e.$apollo.loading?e._e():[a("FilterBar",{staticClass:"tui-workspaceFileFilter__filter",attrs:{title:e.$str("files","container_workspace")},scopedSlots:e._u([{key:"filters-left",fn:function(i){var n=i.stacked;return[a("SelectFilter",{staticClass:"tui-workspaceFileFilter__label",attrs:{label:e.$str("file_format","container_workspace"),"show-label":!0,options:e.filter.extensions,stacked:n},on:{input:function(i){return e.$emit("update-filter",e.selection)}},model:{value:e.selection.extension,callback:function(i){e.$set(e.selection,"extension",i)},expression:"selection.extension"}})]}}],null,!1,1626062552)}),e._v(" "),e.showSort?a("SelectFilter",{staticClass:"tui-workspaceFileFilter__sortFilter",attrs:{label:e.$str("sortby","core"),"show-label":!0,options:e.filter.sorts},on:{input:function(i){return e.$emit("update-filter",e.selection)}},model:{value:e.selection.sort,callback:function(i){e.$set(e.selection,"sort",i)},expression:"selection.sort"}}):e._e()]],2)}),[],!1,null,null,null);"function"==typeof l&&l(u),u.options.__hasBlocks={script:!0,template:!0};i.default=u.exports},"E/ux":function(e,i){e.exports=tui.require("container_workspace/components/content/WorkspaceMemberRequestList")},EWoW:function(e,i,a){"use strict";a.r(i);var n=a("Xi9X"),t=a.n(n),r=a("rLBA"),s=a.n(r),o=a("vyVp"),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_accept_member_request"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member_request"},name:{kind:"Name",value:"container_workspace_update_member_request"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"new_status"},value:{kind:"EnumValue",value:"ACCEPTED"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_accepted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_declined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}}]}}]},c={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_decline_member_request"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member_request"},name:{kind:"Name",value:"container_workspace_update_member_request"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"new_status"},value:{kind:"EnumValue",value:"DECLINED"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_accepted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_declined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}}]}}]},l={components:{Avatar:t.a,LoadingButton:s.a},props:{memberRequestId:{type:[Number,String],required:!0},userId:{type:[Number,String],required:!0},userProfileImageUrl:{type:String,required:!0},userProfileImageAlt:String,userFullname:{type:String,required:!0},isApproved:Boolean,isDeclined:Boolean},data:()=>({submitting:{accept:!1,decline:!1}}),computed:{disabled(){return this.submitting.accept||this.submitting.decline},profileUrl(){return this.$url("/user/profile.php",{id:this.userId})},decisionLabelText(){return this.isDeclined?this.$str("declined","container_workspace"):this.$str("approved","container_workspace")}},methods:{async acceptMemberRequest(){if(!this.disabled){this.submitting.accept=!0;try{await this.$apollo.mutate({mutation:d,variables:{id:this.memberRequestId}}),this.$emit("accept-request",this.memberRequestId)}catch(e){await Object(o.notify)({message:this.$str("error:accept_member_request","container_workspace",this.userFullname),type:"error"})}finally{this.submitting.accept=!1}}},async declineMemberRequest(){if(!this.disabled){this.submitting.decline=!0;try{await this.$apollo.mutate({mutation:c,variables:{id:this.memberRequestId}}),this.$emit("decline-request",this.memberRequestId)}catch(e){await Object(o.notify)({message:this.$str("error:decline_member_request","container_workspace",this.userFullname),type:"error"})}finally{this.submitting.decline=!1}}}}},u=(a("R1AB"),a("KHd+")),m=function(e){e.options.__langStrings={container_workspace:["approve","decline","approve_member","decline_member","error:accept_member_request","error:decline_member_request","approved","declined"]}},k=Object(u.a)(l,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceMemberRequestCard"},[a("div",{staticClass:"tui-workspaceMemberRequestCard__info"},[a("a",{staticClass:"tui-workspaceMemberRequestCard__avatar",attrs:{href:e.profileUrl}},[a("Avatar",{attrs:{src:e.userProfileImageUrl,alt:e.userProfileImageAlt||e.userFullname,size:"xsmall"}})],1),e._v(" "),a("a",{staticClass:"tui-workspaceMemberRequestCard__info-userProfile",attrs:{href:e.profileUrl}},[e._v("\n      "+e._s(e.userFullname)+"\n    ")])]),e._v(" "),e.isApproved||e.isDeclined?a("div",[a("p",[e._v("\n      "+e._s(e.decisionLabelText)+"\n    ")])]):a("div",{staticClass:"tui-workspaceMemberRequestCard__actions"},[a("LoadingButton",{attrs:{loading:e.submitting.accept,disabled:e.disabled,"aria-label":e.$str("approve_member","container_workspace",e.userFullname),text:e.$str("approve","container_workspace"),primary:!0,small:!0},on:{click:e.acceptMemberRequest}}),e._v(" "),a("LoadingButton",{attrs:{loading:e.submitting.decline,disabled:e.disabled,"aria-label":e.$str("decline_member","container_workspace",e.userFullname),text:e.$str("decline","container_workspace"),small:!0},on:{click:e.declineMemberRequest}})],1)])}),[],!1,null,null,null);"function"==typeof m&&m(k),k.options.__hasBlocks={script:!0,template:!0};i.default=k.exports},"Emo+":function(e,i){e.exports=tui.require("container_workspace/components/card/DiscussionWithCommentCard")},F3ko:function(e,i,a){},FBvN:function(e,i){e.exports=tui.require("tui/components/filters/SearchFilter")},FMMY:function(e,i,a){var n={"./action/WorkspaceMuteButton":"Zb2W","./action/WorkspaceMuteButton.vue":"Zb2W","./action/WorkspacePrimaryAction":"SErm","./action/WorkspacePrimaryAction.vue":"SErm","./adder/WorkspaceUserAdder":"9ZTs","./adder/WorkspaceUserAdder.vue":"9ZTs","./card/DiscussionCard":"RbKi","./card/DiscussionCard.vue":"RbKi","./card/DiscussionWithCommentCard":"7zOY","./card/DiscussionWithCommentCard.vue":"7zOY","./card/MemberRequestCard":"EWoW","./card/MemberRequestCard.vue":"EWoW","./card/OriginalSpaceCard":"9r5D","./card/OriginalSpaceCard.vue":"9r5D","./card/WorkspaceContributeCard":"1eSe","./card/WorkspaceContributeCard.vue":"1eSe","./card/WorkspaceMemberCard":"3fFV","./card/WorkspaceMemberCard.vue":"3fFV","./content/WorkspaceContentLayout":"qt7v","./content/WorkspaceContentLayout.vue":"qt7v","./content/WorkspaceMemberRequestList":"eoFd","./content/WorkspaceMemberRequestList.vue":"eoFd","./content/tabs/WorkspaceDiscussionTab":"ipzb","./content/tabs/WorkspaceDiscussionTab.vue":"ipzb","./content/tabs/WorkspaceLibraryTab":"Lxyp","./content/tabs/WorkspaceLibraryTab.vue":"Lxyp","./content/tabs/WorkspaceMembersTab":"4mSp","./content/tabs/WorkspaceMembersTab.vue":"4mSp","./contribution/Share":"D7rz","./contribution/Share.vue":"D7rz","./create/ContributeWorkspace":"mU1F","./create/ContributeWorkspace.vue":"mU1F","./filter/DiscussionFilter":"Vk8W","./filter/DiscussionFilter.vue":"Vk8W","./filter/WorkspaceFileFilter":"DmeC","./filter/WorkspaceFileFilter.vue":"DmeC","./filter/WorkspaceFilter":"CdMC","./filter/WorkspaceFilter.vue":"CdMC","./form/EditPostDiscussionForm":"nvr5","./form/EditPostDiscussionForm.vue":"nvr5","./form/PostDiscussionForm":"hwPq","./form/PostDiscussionForm.vue":"hwPq","./form/WorkspaceDiscussionForm":"u+AG","./form/WorkspaceDiscussionForm.vue":"u+AG","./form/WorkspaceForm":"j7fv","./form/WorkspaceForm.vue":"j7fv","./form/WorkspaceTransferOwnerForm":"r+lC","./form/WorkspaceTransferOwnerForm.vue":"r+lC","./form/upload/SpaceImagePicker":"w9dR","./form/upload/SpaceImagePicker.vue":"w9dR","./grid/SpaceCardsGrid":"sith","./grid/SpaceCardsGrid.vue":"sith","./head/EmptySpacesHeader":"DRyk","./head/EmptySpacesHeader.vue":"DRyk","./head/WorkspaceFileHeader":"KD65","./head/WorkspaceFileHeader.vue":"KD65","./head/WorkspacePageHeader":"y8co","./head/WorkspacePageHeader.vue":"y8co","./modal/WorkspaceAccessModal":"ggJH","./modal/WorkspaceAccessModal.vue":"ggJH","./modal/WorkspaceAddAudienceModal":"jqKa","./modal/WorkspaceAddAudienceModal.vue":"jqKa","./modal/WorkspaceEditModal":"gTjB","./modal/WorkspaceEditModal.vue":"gTjB","./modal/WorkspaceFileViewModal":"8Jqe","./modal/WorkspaceFileViewModal.vue":"8Jqe","./modal/WorkspaceModal":"JYiV","./modal/WorkspaceModal.vue":"JYiV","./modal/WorkspaceTransferOwnerModal":"JMM/","./modal/WorkspaceTransferOwnerModal.vue":"JMM/","./modal/WorkspaceWarningModal":"sK2A","./modal/WorkspaceWarningModal.vue":"sK2A","./profile/DiscussionAvatar":"0V6N","./profile/DiscussionAvatar.vue":"0V6N","./profile/PostAvatar":"do59","./profile/PostAvatar.vue":"do59","./recommend/RecommendedSpaces":"YNvJ","./recommend/RecommendedSpaces.vue":"YNvJ","./sidepanel/WorkspaceControlMenu":"TFTh","./sidepanel/WorkspaceControlMenu.vue":"TFTh","./sidepanel/WorkspaceDescription":"Ysn+","./sidepanel/WorkspaceDescription.vue":"Ysn+","./sidepanel/WorkspaceMenu":"T79p","./sidepanel/WorkspaceMenu.vue":"T79p","./table/WorkspaceFileTable":"DmIm","./table/WorkspaceFileTable.vue":"DmIm"};function t(e){var i=r(e);return a(i)}function r(e){if(!a.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=r,e.exports=t,t.id="FMMY"},FoZm:function(e,i){e.exports=tui.require("tui/format")},FpDq:function(e,i,a){},Fwaj:function(e,i,a){"use strict";var n=a("l/bD");a.n(n).a},G6cq:function(e,i){e.exports=tui.require("tui/components/form/RadioGroup")},GJTK:function(e,i,a){},"GY/S":function(e,i,a){"use strict";var n=a("34bF");a.n(n).a},"H/tB":function(e,i){e.exports=tui.require("tui/tui")},HAbq:function(e,i,a){},HFUi:function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/WorkspaceDescription")},HMzb:function(e,i,a){"use strict";var n=a("OY+a");a.n(n).a},Hl3G:function(e,i){e.exports=tui.require("container_workspace/components/sidepanel/WorkspaceMenu")},Iik9:function(e,i,a){"use strict";a.r(i),a.d(i,"cardGrid",(function(){return n}));const n={xs:{name:"xs",boundaries:[0,764],direction:"horizontal",cardUnits:12},s:{name:"s",boundaries:[765,992],direction:"horizontal",cardUnits:6},m:{name:"m",boundaries:[993,1192],direction:"horizontal",cardUnits:3},l:{name:"l",boundaries:[1193,1396],direction:"horizontal",cardUnits:2},xl:{name:"xl",boundaries:[1397,1672],direction:"horizontal",cardUnits:2}}},"JMM/":function(e,i,a){"use strict";a.r(i);var n=a("tkAW"),t=a.n(n),r=a("u5iS"),s=a.n(r),o=a("R9mX"),d=a.n(o),c=a("vyVp"),l=a("12HA"),u=a("QgbB"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_transfer_owner"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"container_workspace_change_primary_owner"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"member_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_remove"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"workspace_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"time_joined"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]}]}}]}}]},k={components:{Modal:t.a,ModalContent:s.a,WorkspaceTransferOwnerForm:d.a},props:{workspaceId:{type:[String,Number],required:!0}},apollo:{workspace:{query:u.a,fetchPolicy:"network-only",variables(){return{id:this.workspaceId,theme:l.config.theme.name}}}},data:()=>({workspace:null,submitting:!1}),computed:{workspaceOwnerFullname(){return this.workspace&&this.workspace.owner?this.workspace.owner.fullname:""}},methods:{async updatePrimaryOwner({userId:e}){if(!this.submitting){this.submitting=!0;try{const{data:{member:i}}=await this.$apollo.mutate({mutation:m,variables:{workspace_id:this.workspaceId,user_id:e},refetchAll:!0});this.$emit("transfered-owner"),await Object(c.notify)({message:this.$str("transfer_ownership_success_alert","container_workspace",{user:i.user.fullname,workspace:this.workspace.name}),type:"success"})}finally{this.submitting=!1}}}}},p=(a("Lv08"),a("KHd+")),v=function(e){e.options.__langStrings={container_workspace:["transfer_ownership_of_workspace","transfer_ownership_success_alert"]}},_=Object(p.a)(k,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceTransferOwnerModal",attrs:{dismissable:{esc:!1,backdropClick:!1},size:"large"}},[a("ModalContent",{staticClass:"tui-workspaceTransferOwnerModal__modalContent",attrs:{title:e.$str("transfer_ownership_of_workspace","container_workspace"),"close-button":!1}},[e.$apollo.loading?e._e():a("WorkspaceTransferOwnerForm",{staticClass:"tui-workspaceTransferOwnerModal__form",attrs:{"workspace-id":e.workspaceId,"display-current-owner":!e.workspace.interactor.own,"current-owner-fullname":e.workspaceOwnerFullname,submitting:e.submitting},on:{submit:e.updatePrimaryOwner,cancel:function(i){return i.preventDefault(),e.$emit("request-close",i)}}})],1)],1)}),[],!1,null,null,null);"function"==typeof v&&v(_),_.options.__hasBlocks={script:!0,template:!0};i.default=_.exports},JXQf:function(e,i){e.exports=tui.require("tui/components/loading/Loader")},JYiV:function(e,i,a){"use strict";a.r(i);var n=a("tkAW"),t=a.n(n),r=a("gsPT"),s=a.n(r),o=a("u5iS"),d=a.n(o),c=a("vyVp"),l=a("12HA"),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_create_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"private"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hidden"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_create"},arguments:[{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"description_format"},value:{kind:"Variable",name:{kind:"Name",value:"description_format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}},{kind:"Argument",name:{kind:"Name",value:"private"},value:{kind:"Variable",name:{kind:"Name",value:"private"}}},{kind:"Argument",name:{kind:"Name",value:"hidden"},value:{kind:"Variable",name:{kind:"Name",value:"hidden"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]}]}}]}}]},m=a("Zvsn"),k={components:{Modal:t.a,ModalContent:d.a,WorkspaceForm:s.a},apollo:{categoryInteractor:{query:m.a,variables:()=>({workspace_id:null}),update:({category_interactor:e})=>e}},data:()=>({submitting:!1,categoryInteractor:{}}),computed:{canPrivate(){return this.categoryInteractor.can_create_private},canHidden(){return this.categoryInteractor.can_create_hidden},canPublic(){return this.categoryInteractor.can_create_public}},methods:{async createWorkspace({name:e,description:i,draftId:a,descriptionFormat:n,isPrivate:t,isHidden:r}){if(!this.submitting){this.submitting=!0;try{const{data:{workspace:s}}=await this.$apollo.mutate({mutation:u,refetchAll:!1,variables:{name:e,description:i,draft_id:a,description_format:n,private:t,hidden:r,theme:l.config.theme.name}});this.$emit("create-workspace",s)}catch(e){await Object(c.notify)({message:this.$str("error:create","container_workspace"),type:"error"})}}}}},p=(a("S0Wu"),a("KHd+")),v=function(e){e.options.__langStrings={container_workspace:["create_space","error:create"]}},_=Object(p.a)(k,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceModal",attrs:{size:"large",dismissable:{esc:!0,backdropClick:!1,overlayClose:!1}}},[a("ModalContent",{attrs:{"close-button":!1,title:e.$str("create_space","container_workspace"),"title-id":e.$id("create-space")}},[a("WorkspaceForm",{staticClass:"tui-workspaceModal__form",attrs:{"context-id":e.categoryInteractor?e.categoryInteractor.context_id:null,submitting:e.submitting,"can-set-public":e.canPublic,"can-set-private":e.canPrivate,"show-private-box":e.canPrivate,"show-hidden-check-box":e.canPrivate&&e.canHidden},on:{submit:e.createWorkspace,cancel:function(i){return e.$emit("request-close")}}})],1)],1)}),[],!1,null,null,null);"function"==typeof v&&v(_),_.options.__hasBlocks={script:!0,template:!0};i.default=_.exports},JeKY:function(e,i,a){"use strict";var n=a("awvy");a.n(n).a},K3ZL:function(e,i,a){var n={".":"0yND","./":"0yND","./access":"Vqu5","./access.js":"Vqu5","./grid/grid":"Iik9","./grid/grid.js":"Iik9","./index":"0yND","./index.js":"0yND","./mixins/virtual_scroll_mixin":"dQ8v","./mixins/virtual_scroll_mixin.js":"dQ8v"};function t(e){var i=r(e);return a(i)}function r(e){if(!a.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=r,e.exports=t,t.id="K3ZL"},KD65:function(e,i,a){"use strict";a.r(i);var n=a("/ae1"),t=a.n(n),r=a("5h9J"),s=a.n(r),o={components:{BackArrow:t.a,ButtonIcon:s.a}},d=(a("ndIo"),a("KHd+")),c=function(e){e.options.__langStrings={core:["back"],container_workspace:["files"]}},l=Object(d.a)(o,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceFileHeader"},[a("div",{staticClass:"tui-workspaceFileHeader__back"},[a("ButtonIcon",{attrs:{styleclass:{transparent:!0},"aria-label":e.$str("back","core"),text:e.$str("back","core")},on:{click:function(i){return e.$emit("go-back")}}},[a("BackArrow",{attrs:{size:"200",alt:e.$str("back","core")}})],1)],1),e._v(" "),a("div",{staticClass:"tui-workspaceFileHeader__title"},[e._v("\n    "+e._s(e.$str("files","container_workspace"))+"\n  ")])])}),[],!1,null,null,null);"function"==typeof c&&c(l),l.options.__hasBlocks={script:!0,template:!0};i.default=l.exports},KGcv:function(e,i){e.exports=tui.require("tui/components/dropdown/DropdownItem")},KGot:function(e,i){e.exports=tui.require("tui/components/datatable/Cell")},"KHd+":function(e,i,a){"use strict";function n(e,i,a,n,t,r,s,o){var d,c="function"==typeof e?e.options:e;if(i&&(c.render=i,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=d):t&&(d=o?function(){t.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:t),d)if(c.functional){c._injectStyles=d;var l=c.render;c.render=function(e,i){return d.call(i),l(e,i)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,d):[d]}return{exports:e,options:c}}a.d(i,"a",(function(){return n}))},L2v5:function(e,i,a){},LWsu:function(e,i,a){},LgEC:function(e,i,a){"use strict";var n=a("Csd8");a.n(n).a},LgKJ:function(e,i){e.exports=tui.require("container_workspace/components/contribution/Share")},Lv08:function(e,i,a){"use strict";var n=a("va7r");a.n(n).a},Lxyp:function(e,i,a){"use strict";a.r(i);var n=a("s5vj"),t=a.n(n),r=a("Uhf3"),s=a.n(r),o=a("tyu8"),d=a("12HA"),c=a("pxdy"),l=a.n(c),u=a("QP7s"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_shared_cards"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"access"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_engage_access"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"topic"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"section"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"saved"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"shared"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owned"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"source"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"contribution"},name:{kind:"Name",value:"container_workspace_shared_cards"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"filter"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"access"},value:{kind:"Variable",name:{kind:"Name",value:"access"}}},{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"type"}}},{kind:"ObjectField",name:{kind:"Name",value:"topic"},value:{kind:"Variable",name:{kind:"Name",value:"topic"}}},{kind:"ObjectField",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"ObjectField",name:{kind:"Name",value:"search"},value:{kind:"Variable",name:{kind:"Name",value:"search"}}},{kind:"ObjectField",name:{kind:"Name",value:"section"},value:{kind:"Variable",name:{kind:"Name",value:"section"}}},{kind:"ObjectField",name:{kind:"Name",value:"saved"},value:{kind:"Variable",name:{kind:"Name",value:"saved"}}},{kind:"ObjectField",name:{kind:"Name",value:"shared"},value:{kind:"Variable",name:{kind:"Name",value:"shared"}}},{kind:"ObjectField",name:{kind:"Name",value:"owned"},value:{kind:"Variable",name:{kind:"Name",value:"owned"}}}]}},{kind:"Argument",name:{kind:"Name",value:"footnotes"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"ObjectField",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"ObjectField",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"ObjectField",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}]}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"cards"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instanceid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"summary"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"timecreated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sharedbycount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bookmarked"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"extra"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"owned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"topics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"footnotes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_type"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_item_id"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_area"}}},{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"footnotes_component"}}}],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"include_footnotes"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"component"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tuicomponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"props"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[{kind:"Argument",name:{kind:"Name",value:"source"},value:{kind:"Variable",name:{kind:"Name",value:"source"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"can_bookmark"},arguments:[],directives:[]}]}}]}}]}}]}}]},k={components:{ContributionBaseContent:t.a,ContributionFilter:s.a},mixins:[l.a],props:{workspaceId:{type:[Number,String],required:!0}},data:()=>({interactor:{}}),computed:{canContribute(){return this.interactor.can_share_resources}},created(){this.filterValue=Object.assign({},this.filterValue,{sort:5}),this.includeFootnotes=!0},apollo:{interactor:{query:u.a,variables(){return{workspace_id:this.workspaceId}}},contribution:{query:m,fetchPolicy:"network-only",variables(){return Object.assign({},this.filterValue,{workspace_id:this.workspaceId,area:"library",include_footnotes:!0,footnotes_type:"shared",footnotes_item_id:this.workspaceId,footnotes_area:"library",footnotes_component:"container_workspace",source:o.UrlSourceType.workspace(this.workspaceId),theme:d.config.theme.name})},update({contribution:{cursor:e,cards:i}}){return{cursor:e,cards:this.canContribute?this.$_addContributeCard(i):i}},skip(){return this.skipCardsQuery}}},methods:{$_addContributeCard(e){return[{instanceid:this.workspaceId,component:"WorkspaceContributeCard",tuicomponent:"container_workspace/components/card/WorkspaceContributeCard",name:"",user:{}}].concat(e)},adderOpen(){this.showAdder=!0},adderCancelled(){this.showAdder=!1},adderUpdate(e){this.addedItems=e,this.showAdder=!1}}},p=(a("AcEP"),a("KHd+")),v=function(e){e.options.__langStrings={container_workspace:["search_library"]}},_=Object(p.a)(k,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceLibraryTab"},[a("ContributionBaseContent",{attrs:{units:e.units,loading:e.$apollo.loading,"loading-more":e.loadingMore,cards:e.contribution.cards,"total-cards":e.contribution.cursor.total,"show-heading":!1,"grid-direction":e.gridDirection,"show-footnotes":e.includeFootnotes,"is-load-more-visible":e.isLoadMoreVisible,"from-library":!0},on:{"scrolled-to-bottom":e.scrolledToBottom,"load-more":e.loadMore},scopedSlots:e._u([{key:"filters",fn:function(){return[a("ContributionFilter",{staticClass:"tui-workspaceLibraryTab__filter",attrs:{component:"container_workspace",area:"library","has-bottom-bar":!0,value:e.filterValue,"show-access":!1,"show-type":!0,"show-topic":!0,"show-sort":!0,"show-search":!0,"search-placeholder":e.$str("search_library","container_workspace")},on:{type:e.filterType,topic:e.filterTopic,search:e.filterSearch,sort:e.filterSort}})]},proxy:!0}])})],1)}),[],!1,null,null,null);"function"==typeof v&&v(_),_.options.__hasBlocks={script:!0,template:!0};i.default=_.exports},M3bB:function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceDiscussionForm")},Mea9:function(e,i,a){},Mia9:function(e,i,a){},Mnur:function(e,i){e.exports=tui.require("tui/components/modal/ModalPresenter")},NAOU:function(e,i){e.exports=tui.require("tui/components/grid/Grid")},NEm0:function(e,i){e.exports=tui.require("tui/components/form/Upload")},NHyX:function(e,i,a){var n={"./EmptySpacesPage":"cSWX","./EmptySpacesPage.vue":"cSWX","./SpacesPage":"1QIN","./SpacesPage.vue":"1QIN","./WorkspaceDiscussionPage":"Sben","./WorkspaceDiscussionPage.vue":"Sben","./WorkspaceEmptyPage":"zPS+","./WorkspaceEmptyPage.vue":"zPS+","./WorkspaceFilePage":"2rtS","./WorkspaceFilePage.vue":"2rtS","./WorkspacePage":"RdhG","./WorkspacePage.vue":"RdhG"};function t(e){var i=r(e);return a(i)}function r(e){if(!a.o(n,e)){var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}return n[e]}t.keys=function(){return Object.keys(n)},t.resolve=r,e.exports=t,t.id="NHyX"},NVzB:function(e,i,a){!function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("container_workspace")?console.warn('[tui bundle] The bundle "container_workspace" is already loaded, skipping initialisation.'):(tui._bundle.register("container_workspace"),tui._bundle.addModulesFromContext("container_workspace",a("K3ZL")),tui._bundle.addModulesFromContext("container_workspace/components",a("FMMY")),tui._bundle.addModulesFromContext("container_workspace/pages",a("NHyX")))}()},Nf3x:function(e,i,a){"use strict";var n=a("wL6w");a.n(n).a},Nh58:function(e,i,a){},O3Z6:function(e,i){e.exports=tui.require("container_workspace/components/head/WorkspacePageHeader")},"OY+a":function(e,i,a){},Oj5a:function(e,i){e.exports=tui.require("tui/components/sidepanel/SidePanelNavGroup")},OvaV:function(e,i,a){},"Oy+d":function(e,i){e.exports=tui.require("container_workspace/components/adder/WorkspaceUserAdder")},PNFE:function(e,i){e.exports=tui.require("tui/components/icons/Add")},PNtU:function(e,i){e.exports=tui.require("tui/components/lozenge/Lozenge")},Pn5P:function(e,i){e.exports=tui.require("container_workspace/components/content/tabs/WorkspaceMembersTab")},Q6By:function(e,i){e.exports=tui.require("container_workspace/components/filter/DiscussionFilter")},QP7s:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_workspace_interactor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"interactor"},name:{kind:"Name",value:"container_workspace_workspace_interactor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_add_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_leave"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_transfer_ownership"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_add_audiences"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"muted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_seen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}}]}}]}},QgbB:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_workspace"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_leave"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_transfer_ownership"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"muted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_seen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]}]}}]}}]}},R1AB:function(e,i,a){"use strict";var n=a("uP2a");a.n(n).a},R5BP:function(e,i){e.exports=tui.require("tui/components/virtualscroll/VirtualScroll")},R85T:function(e,i,a){},R9mX:function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceTransferOwnerForm")},RNCt:function(e,i,a){},RbKi:function(e,i,a){"use strict";a.r(i);var n=a("H/tB"),t=a.n(n),r=a("+ukd"),s=a.n(r),o=a("gLvT"),d=a.n(o),c=a("KGcv"),l=a.n(c),u=a("5h9J"),m=a.n(u),k=a("sxi1"),p=a.n(k),v=a("1R7l"),_=a.n(v),g=a("1G8L"),f=a.n(g),b=a("in8C"),N=a.n(b),w=a("vyVp"),h=a("PNtU"),y=a.n(h),F=a("Mnur"),S=a.n(F),C=a("XgQu"),x=a.n(C),V={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_update_discussion_content"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_update_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"content_format"},value:{kind:"Variable",name:{kind:"Name",value:"content_format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"removed"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_context_id"},arguments:[],directives:[]}]}}]}}]},A={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_delete_discussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_delete_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}]},q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_reportedcontent_create_review"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"component"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"area"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_area"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"item_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"url"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_url"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"review"},name:{kind:"Name",value:"totara_reportedcontent_create_review"},arguments:[{kind:"Argument",name:{kind:"Name",value:"component"},value:{kind:"Variable",name:{kind:"Name",value:"component"}}},{kind:"Argument",name:{kind:"Name",value:"area"},value:{kind:"Variable",name:{kind:"Name",value:"area"}}},{kind:"Argument",name:{kind:"Name",value:"item_id"},value:{kind:"Variable",name:{kind:"Name",value:"item_id"}}},{kind:"Argument",name:{kind:"Name",value:"url"},value:{kind:"Variable",name:{kind:"Name",value:"url"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"success"},arguments:[],directives:[]}]}}]}}]},D={components:{DiscussionAvatar:s.a,SimpleLike:_.a,Dropdown:d.a,DropdownItem:l.a,ButtonIcon:m.a,MoreIcon:p.a,EditPostDiscussionForm:f.a,CommentIcon:N.a,Lozenge:y.a,ModalPresenter:S.a,WorkspaceWarningModal:x.a},props:{creatorImageSrc:{type:String,required:!0},creatorImageAlt:{type:String,default:""},creatorId:{type:[String,Number],required:!0},creatorFullname:{type:String,required:!0},discussionContent:{type:String,required:!0},timeDescription:{type:String,required:!0},pinned:Boolean,reacted:Boolean,totalComments:{type:[String,Number],required:!0},totalReactions:{type:[String,Number],required:!0},discussionId:{type:[String,Number],required:!0},reactAble:{type:Boolean,default:!0},updateAble:{type:Boolean,default:!0},deleteAble:{type:Boolean,default:!0},reportAble:{type:Boolean,default:!1},commentAble:{type:Boolean,default:!0},removed:Boolean,showDiscussionLink:{type:Boolean,default:!0},edited:Boolean,labelId:String},data:()=>({edit:!1,submitting:!1,modal:{delete:!1}}),computed:{profileUrl(){return this.$url("/user/profile.php",{id:this.creatorId})},likeButtonAriaLabel(){return this.reacted?this.$str("remove_like_discussion","container_workspace"):this.$str("like_discussion","container_workspace")},discussionUrl(){return this.$url("/container/type/workspace/discussion.php",{id:this.discussionId})}},mounted(){this.$_scan()},updated(){this.$_scan()},methods:{$_scan(){if(!this.$refs["discussion-content"])return;let e=this.$refs["discussion-content"];t.a.scan(e)},async handleCopyLink(){let e=document.createElement("textarea");e.classList.add("tui-sr-only"),e.value=this.discussionUrl,document.body.appendChild(e),e.select();try{document.execCommand("copy"),await Object(w.notify)({message:this.$str("copied_to_clipboard","container_workspace"),type:"success"})}catch(e){await Object(w.notify)({message:this.$str("error:copy_to_clipboard","container_workspace"),type:"error"})}finally{document.body.removeChild(e)}},updateReactStatus(e){this.$emit("update-react-status",{discussionId:this.discussionId,status:e})},async updateDiscussionContent({content:e,contentFormat:i,itemId:a}){if(!this.submitting){this.submitting=!0;try{let{data:{discussion:n}}=await this.$apollo.mutate({mutation:V,refetchAll:!1,variables:{id:this.discussionId,content:e,content_format:i,draft_id:a}});this.edit=!1,this.$emit("update-discussion",n)}catch(e){await Object(w.notify)({message:this.$str("error:update_discussion","container_workspace"),type:"error"})}finally{this.submitting=!1}}},async deleteDiscussion(){if(!this.submitting){this.submitting=!0;try{let{data:{result:e}}=await this.$apollo.mutate({mutation:A,refetchAll:!1,variables:{id:this.discussionId}});if(e)return this.modal.delete=!1,void this.$emit("delete-discussion",this.discussionId);await Object(w.notify)({message:this.$str("error:delete_discussion","container_workspace"),type:"error"})}catch(e){await Object(w.notify)({message:this.$str("error:delete_discussion","container_workspace"),type:"error"})}finally{this.submitting=!1}}},async reportDiscussion(){if(!this.submitting){this.submitting=!0;try{(await this.$apollo.mutate({mutation:q,refetchAll:!1,variables:{component:"container_workspace",area:"discussion",item_id:this.discussionId,url:window.location.href}}).then(e=>e.data.review)).success?await Object(w.notify)({message:this.$str("reported","totara_reportedcontent"),type:"success"}):await Object(w.notify)({message:this.$str("reported_failed","totara_reportedcontent"),type:"error"})}catch(e){await Object(w.notify)({message:this.$str("error:report_discussion","container_workspace"),type:"error"})}finally{this.submitting=!1}}}}},T=(a("tc62"),a("KHd+")),$=function(e){e.options.__langStrings={container_workspace:["discussion_actions","copy_discussion_link_text","like_discussion","remove_like_discussion","comment","comment_on_discussion","error:update_discussion","error:copy_to_clipboard","view_full_discussion","bracket_number","edited","copied_to_clipboard","pinned_post","delete_discussion_warning_msg","delete_warning_title","error:delete_discussion","report_discussion","error:report_discussion","removed_discussion"],core:["edit","delete","confirm"],totara_reportedcontent:["reported","reported_failed"]}},I=Object(T.a)(D,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceDiscussionCard",attrs:{"data-id":e.discussionId}},[a("ModalPresenter",{attrs:{open:e.modal.delete},on:{"request-close":function(i){e.modal.delete=!1}}},[a("WorkspaceWarningModal",{attrs:{"message-content":e.$str("delete_discussion_warning_msg","container_workspace"),title:e.$str("delete_warning_title","container_workspace"),"confirm-button-text":e.$str("confirm","core")},on:{confirm:e.deleteDiscussion}})],1),e._v(" "),e.pinned?a("div",{staticClass:"tui-workspaceDiscussionCard__pinBox"},[a("Lozenge",{attrs:{text:e.$str("pinned_post","container_workspace"),type:"info"}})],1):e._e(),e._v(" "),a("div",{staticClass:"tui-workspaceDiscussionCard__card"},[a("DiscussionAvatar",{staticClass:"tui-workspaceDiscussionCard__avatar",attrs:{"image-src":e.creatorImageSrc,"image-alt":e.creatorImageAlt,"profile-url":e.profileUrl}}),e._v(" "),a("div",{staticClass:"tui-workspaceDiscussionCard__content"},[a("div",{staticClass:"tui-workspaceDiscussionCard__head"},[a("a",{attrs:{id:e.labelId,href:e.profileUrl}},[e._v("\n          "+e._s(e.creatorFullname)+"\n        ")]),e._v(" "),a("p",[e._v(e._s(e.timeDescription))]),e._v(" "),e.edited?a("p",[e._v("\n          "+e._s(e.$str("edited","container_workspace"))+"\n        ")]):e._e()]),e._v(" "),e.removed?a("div",{staticClass:"tui-workspaceDiscussionCard__body--deleted"},[a("p",[e._v(e._s(e.$str("removed_discussion","container_workspace")))])]):e.edit?a("EditPostDiscussionForm",{attrs:{"discussion-id":e.discussionId,submitting:e.submitting},on:{cancel:function(i){e.edit=!1},submit:e.updateDiscussionContent}}):a("div",{ref:"discussion-content",staticClass:"tui-workspaceDiscussionCard__body",domProps:{innerHTML:e._s(e.discussionContent)}}),e._v(" "),a("div",{staticClass:"tui-workspaceDiscussionCard__buttons"},[a("SimpleLike",{staticClass:"tui-workspaceDiscussionCard__buttons-like",attrs:{"button-aria-label":e.likeButtonAriaLabel,"total-likes":e.totalReactions,liked:e.reacted,disabled:!e.reactAble,component:"container_workspace",area:"discussion","show-text":!0,"instance-id":e.discussionId},on:{"update-like-status":e.updateReactStatus,"created-like":function(i){return e.updateReactStatus(!0)},"removed-like":function(i){return e.updateReactStatus(!1)}}}),e._v(" "),a("div",{staticClass:"tui-workspaceDiscussionCard__buttons-comment"},[a("ButtonIcon",{attrs:{"aria-label":e.$str("comment_on_discussion","container_workspace"),text:e.$str("comment","container_workspace"),styleclass:{small:!0,transparent:!0,transparentNoPadding:!0},disabled:!e.commentAble},on:{click:function(i){return e.$emit("trigger-comment")}}},[a("CommentIcon")],1),e._v(" "),0<e.totalComments?a("span",[e._v("\n            "+e._s(e.$str("bracket_number","container_workspace",e.totalComments))+"\n          ")]):e._e()],1)],1)],1),e._v(" "),a("Dropdown",{attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(i){var n=i.toggle,t=i.isOpen;return[a("ButtonIcon",{attrs:{"aria-expanded":t,"aria-label":e.$str("discussion_actions","container_workspace"),styleclass:{small:!0,transparentNoPadding:!0}},on:{click:function(e){return e.preventDefault(),n(e)}}},[a("MoreIcon",{attrs:{size:"300"}})],1)]}}])},[e._v(" "),e.updateAble?a("DropdownItem",{on:{click:function(i){e.edit=!0}}},[e._v("\n        "+e._s(e.$str("edit","core"))+"\n      ")]):e._e(),e._v(" "),e.deleteAble?a("DropdownItem",{on:{click:function(i){e.modal.delete=!0}}},[e._v("\n        "+e._s(e.$str("delete","core"))+"\n      ")]):e._e(),e._v(" "),e.reportAble?a("DropdownItem",{on:{click:e.reportDiscussion}},[e._v("\n        "+e._s(e.$str("report_discussion","container_workspace"))+"\n      ")]):e._e(),e._v(" "),e.showDiscussionLink?a("DropdownItem",{attrs:{href:e.discussionUrl}},[e._v("\n        "+e._s(e.$str("view_full_discussion","container_workspace"))+"\n      ")]):e._e(),e._v(" "),a("DropdownItem",{on:{click:e.handleCopyLink}},[e._v("\n        "+e._s(e.$str("copy_discussion_link_text","container_workspace"))+"\n      ")])],1)],1)],1)}),[],!1,null,null,null);"function"==typeof $&&$(I),I.options.__hasBlocks={script:!0,template:!0};i.default=I.exports},RdhG:function(e,i,a){"use strict";a.r(i);var n=a("dj/p"),t=a.n(n),r=a("Hl3G"),s=a.n(r),o=a("txsu"),d=a.n(o),c=a("1i2V"),l=a.n(c),u=a("Pn5P"),m=a.n(u),k=a("DPa1"),p=a.n(k),v=a("tBMW"),_=a.n(v),g=a("O3Z6"),f=a.n(g),b=a("vyVp"),N=a("BaY1"),w=a.n(N),h=a("HFUi"),y=a.n(h),F=a("zQe5"),S=a.n(F),C=a("4JD0"),x=a.n(C),V=a("UpZR"),A=a.n(V),q=a("12HA"),D=a("QgbB"),T=a("t5mg"),$={components:{WorkspacePrimaryAction:x.a,Layout:t.a,SidePanel:w.a,WorkspaceMenu:s.a,Tabs:d.a,Tab:l.a,WorkspaceMembersTab:m.a,WorkspaceDiscussionTab:p.a,WorkspaceLibraryTab:_.a,WorkspacePageHeader:f.a,WorkspaceDescription:y.a,WorkspaceContentLayout:S.a},props:{workspaceId:{type:[Number,String],required:!0},memberSortOption:{type:String,required:!0},discussionSortOption:{type:String,required:!0},selectedTab:{type:String,default:"discussion",validator:e=>"discussion"===e||"members"===e||"library"===e},showLibraryTab:{type:Boolean,required:!0}},apollo:{workspace:{query:D.a,context:{batch:!0},variables(){return{id:this.workspaceId,theme:q.config.theme.name}}},notifications:{query:T.a,context:{batch:!0},update:()=>[],result({data:{notifications:e}}){Array.prototype.forEach.call(e,({message:e,type:i})=>{Object(b.notify)({message:e,type:i})})}}},data(){return{workspace:null,innerSelectedTab:this.selectedTab}},methods:{updateWorkspace(e){A.a.writeQuery({query:D.a,variables:{id:this.workspaceId,theme:q.config.theme.name},data:{workspace:e}})},reloadWorkspace(){this.$apollo.queries.workspace.refetch()},redirectToSpacePage(){document.location.href=this.$url("/container/type/workspace/index.php",{hold_notification:1})},addDiscussion(){let{workspace:e}=A.a.readQuery({query:D.a,variables:{id:this.workspaceId,theme:q.config.theme.name}});e=Object.assign({},e,{total_discussions:e.total_discussions+1}),A.a.writeQuery({query:D.a,variables:{id:this.workspaceId,theme:q.config.theme.name},data:{workspace:e}})},redirectToWorkspace({id:e}){document.location.href=this.$url("/container/type/workspace/workspace.php",{id:e})},updateMuteStatus(e){let{workspace:i}=A.a.readQuery({query:D.a,variables:{id:this.workspaceId,theme:q.config.theme.name}});i=Object.assign({},i),i.interactor=Object.assign({},i.interactor),i.interactor.muted=e,A.a.writeQuery({query:D.a,variables:{id:this.workspaceId,theme:q.config.theme.name},data:{workspace:i}})}}},I=(a("Fwaj"),a("KHd+")),M=function(e){e.options.__langStrings={container_workspace:["discuss_tab_label","library_tab_label","member_tab_label","visibility_help"]}},W=Object(I.a)($,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Layout",{staticClass:"tui-workspacePage",scopedSlots:e._u([{key:"left",fn:function(i){return["horizontal"===i.direction?a("SidePanel",{attrs:{"show-button-control":!1,sticky:!1,"initially-open":!0}},[a("WorkspaceMenu",{attrs:{"selected-workspace-id":e.workspaceId},on:{"create-workspace":e.redirectToWorkspace}})],1):e._e()]}},{key:"right",fn:function(i){var n=i.units,t=i.direction;return[e.workspace?a("div",{staticClass:"tui-workspacePage__mainContent"},[a("WorkspacePageHeader",{staticClass:"tui-workspacePage__head",attrs:{"show-navigation":"vertical"===t,"workspace-id":e.workspace.id,"workspace-image":e.workspace.image,"workspace-name":e.workspace.name,"workspace-access":e.workspace.access,"workspace-muted":e.workspace.interactor.muted,"show-mute-button":e.workspace.interactor.joined},on:{"update-mute-status":e.updateMuteStatus}}),e._v(" "),a("div",{staticClass:"tui-workspacePage__primaryAction"},[a("WorkspacePrimaryAction",{staticClass:"tui-workspacePage__primaryAction-action",attrs:{"workspace-id":e.workspace.id,"workspace-name":e.workspace.name,"workspace-access":e.workspace.access,"workspace-context-id":e.workspace.context_id},on:{"update-workspace":e.updateWorkspace,"request-to-join-workspace":e.reloadWorkspace,"cancel-request-to-join-workspace":e.reloadWorkspace,"added-member":e.reloadWorkspace,"deleted-workspace":e.redirectToSpacePage,"update-mute-status":e.updateMuteStatus}})],1),e._v(" "),a("Tabs",{staticClass:"tui-workspacePage__tabs",attrs:{direction:"horizontal"},model:{value:e.innerSelectedTab,callback:function(i){e.innerSelectedTab=i},expression:"innerSelectedTab"}},[a("Tab",{attrs:{id:"discussion",name:e.$str("discuss_tab_label","container_workspace")}},[a("WorkspaceContentLayout",{staticClass:"tui-workspacePage__tabs-discussionTab",attrs:{"max-units":n,"grid-direction":t},scopedSlots:e._u([{key:"content",fn:function(){return[e.workspace.interactor.can_view_discussions?a("WorkspaceDiscussionTab",{attrs:{"workspace-total-discussions":e.workspace.total_discussions,"selected-sort":e.discussionSortOption,"workspace-id":e.workspaceId,"workspace-context-id":e.workspace.context_id},on:{"add-discussion":e.addDiscussion}}):a("p",{staticClass:"tui-workspacePage__tabs-text"},[e._v("\n                "+e._s(e.$str("visibility_help","container_workspace"))+"\n              ")])]},proxy:!0}],null,!0)},[e._v(" "),e.workspace.description?a("WorkspaceDescription",{attrs:{slot:"side","time-description":e.workspace.time_description,description:e.workspace.description},slot:"side"}):e._e()],1)],1),e._v(" "),e.showLibraryTab?a("Tab",{attrs:{id:"library",disabled:!e.workspace.interactor.can_view_library,name:e.$str("library_tab_label","container_workspace")}},[a("WorkspaceLibraryTab",{attrs:{"workspace-id":e.workspaceId,units:n,"grid-direction":t}})],1):e._e(),e._v(" "),a("Tab",{attrs:{id:"members",disabled:!e.workspace.interactor.can_view_members,name:e.$str("member_tab_label","container_workspace",e.workspace.total_members)}},[a("WorkspaceContentLayout",{attrs:{"grid-direction":t,"max-units":n}},[a("WorkspaceMembersTab",{attrs:{slot:"content","workspace-id":e.workspaceId,"can-view-member-requests":e.workspace.interactor.can_view_member_requests,"total-member-requests":e.workspace.total_member_requests,"total-members":e.workspace.total_members,"selected-sort":e.memberSortOption},slot:"content"})],1)],1)],1)],1):e._e()]}}])})}),[],!1,null,null,null);"function"==typeof M&&M(W),W.options.__hasBlocks={script:!0,template:!0};i.default=W.exports},Rerc:function(e,i,a){},S0Wu:function(e,i,a){"use strict";var n=a("R85T");a.n(n).a},SDfa:function(e,i,a){"use strict";var n=a("9CoU");a.n(n).a},SErm:function(e,i,a){"use strict";a.r(i);var n=a("D3AF"),t=a.n(n),r=a("vF5l"),s=a.n(r),o=a("C+/B"),d=a.n(o),c=a("Mnur"),l=a.n(c),u=a("XgQu"),m=a.n(u),k=a("rLBA"),p=a.n(k),v=a("fPwS"),_=a.n(v),g=a("vyVp"),f=a("gLvT"),b=a.n(f),N=a("KGcv"),w=a.n(N),h=a("U66g"),y=a.n(h),F=a("93eb"),S=a.n(F),C=a("Oy+d"),x=a.n(C),V=a("TYuk"),A=a.n(V),q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_add_bulk_audience_members"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_add_bulk_audience_members_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"container_workspace_add_bulk_audience_members"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"workspace"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_bulk_audience_members_to_add"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_bulk_audience_members_to_add_input"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"container_workspace_bulk_audience_members_to_add"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"members_to_add"},arguments:[],directives:[]}]}}]}}]},T=a("QP7s"),$=a("x4nq"),I=a("7Vjt"),M={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_delete_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_delete"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[]}]}}]},W=a("0/tD"),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_cancel_member_request"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member_request"},name:{kind:"Name",value:"container_workspace_cancel_member_request"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_accepted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_declined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}}]}}]},P={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_add_members"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_ids"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"members"},name:{kind:"Name",value:"container_workspace_add_members"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"user_ids"},value:{kind:"Variable",name:{kind:"Name",value:"user_ids"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"member_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_remove"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"time_joined"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]}]}}]}}]},j=a("phWl"),O=a("x/uc"),L=a("qF9/"),E={components:{AudienceAdder:t.a,Button:s.a,ConfirmationModal:d.a,ModalPresenter:l.a,WorkspaceWarningModal:m.a,LoadingButton:p.a,Loading:_.a,DropdownItem:w.a,Dropdown:b.a,WorkspaceAddAudienceModal:y.a,WorkspaceEditModal:S.a,WorkspaceUserAdder:x.a,WorkspaceTransferOwnerModal:A.a},props:{workspaceId:{type:[String,Number],required:!0},workspaceName:{type:String,required:!0},workspaceAccess:{type:String,required:!0,validator:e=>[L.PUBLIC,L.HIDDEN,L.PRIVATE].includes(e)},workspaceContextId:{type:Number}},apollo:{interactor:{query:T.a,context:{batch:!0},variables(){return{workspace_id:this.workspaceId}}}},data:()=>({interactor:{},innerSubmitting:!1,deleting:!1,modal:{audienceAdder:!1,confirmAudienceAdderSelection:!1,leaveConfirm:!1,deleteConfirm:!1,edit:!1,adder:!1,transferOwner:!1},audiencesToAdd:[],usersFromAudiencesToAdd:null,isAddingAudiences:!1,isRequestingAudiencesToAdd:!1}),computed:{getContentMessage(){return this.workspaceAccess===L.PUBLIC?this.$str("leave_workspace_message","container_workspace"):this.$str("leave_workspace_message_not_public","container_workspace")}},methods:{async joinWorkspace(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{await this.$apollo.mutate({mutation:$.a,refetchAll:!0,variables:{workspace_id:this.workspaceId}}),this.$emit("join-workspace")}catch(e){await Object(g.notify)({message:this.$str("error:join_space","container_workspace"),type:"error"})}finally{this.innerSubmitting=!1}}},async leaveWorkspace(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{const{data:{member:e}}=await this.$apollo.mutate({mutation:I.a,refetchAll:!0,variables:{workspace_id:this.workspaceId}});this.modal.leaveConfirm=!1,this.$emit("leave-workspace"),e&&this.workspaceAccess!==L.PUBLIC&&(document.location.href=this.$url("/container/type/workspace/workspace.php",{id:this.workspaceId}))}catch(e){await Object(g.notify)({message:this.$str("error:leave_workspace","container_workspace"),type:"error"})}finally{this.innerSubmitting=!1}}},async handleDelete(){if(this.deleting=!0,!this.innerSubmitting){this.innerSubmitting=!0;try{const{data:{result:e}}=await this.$apollo.mutate({mutation:M,refetchAll:!1,variables:{workspace_id:this.workspaceId}});e&&(this.modal.confirm=!1,this.$emit("deleted-workspace"))}catch(e){await Object(g.notify)({message:this.$str("error:delete_workspace","container_workspace"),type:"error"})}finally{this.innerSubmitting=!1}}},updateWorkspace(e){this.modal.edit=!1,this.$emit("update-workspace",e)},async requestToJoinWorkspace(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{await this.$apollo.mutate({mutation:W.a,variables:{workspace_id:this.workspaceId},update:e=>{let{interactor:i}=e.readQuery({query:T.a,variables:{workspace_id:this.workspaceId}});i=Object.assign({},i,{has_requested_to_join:!0,can_request_to_join:!0}),e.writeQuery({query:T.a,variables:{workspace_id:this.workspaceId},data:{interactor:i}})}}),this.$emit("request-to-join-workspace")}catch(e){await Object(g.notify)({message:this.$str("error:request_to_join","container_workspace"),type:"error"})}finally{this.innerSubmitting=!1}}},async cancelRequestToJoinWorkspace(){if(!this.innerSubmitting){this.innerSubmitting=!0;try{await this.$apollo.mutate({mutation:B,variables:{workspace_id:this.workspaceId},update:e=>{let{interactor:i}=e.readQuery({query:T.a,variables:{workspace_id:this.workspaceId}});i=Object.assign({},i),i.can_request_to_join=!0,i.has_requested_to_join=!1,e.writeQuery({query:T.a,variables:{workspace_id:this.workspaceId},data:{interactor:i}})}}),this.$emit("cancel-request-to-join-workspace")}catch(e){await Object(g.notify)({message:this.$str("error:cancel_member_request","container_workspace"),type:"error"})}finally{this.innerSubmitting=!1}}},async handleAddMembers(e){if(!this.innerSubmitting){this.innerSubmitting=!0;try{await this.$apollo.mutate({mutation:P,variables:{workspace_id:this.workspaceId,user_ids:e},refetchQueries:["container_workspace_get_workspace","container_workspace_find_members"]}),this.modal.adder=!1,this.$emit("added-member")}catch(e){await Object(g.notify)({message:this.$str("error:add_members","container_workspace"),type:"error"})}finally{this.innerSubmitting=!1}}},async updateMuteStatus(e){if(!this.innerSubmitting){this.innerSubmitting=!0;try{const i={workspace_id:this.workspaceId};let a=e?j.a:O.a;await this.$apollo.mutate({mutation:a,variables:i,update:a=>{a.writeQuery({query:T.a,variables:i,data:{interactor:Object.assign({},this.interactor,{muted:e})}})}}),this.$emit("update-mute-status",e)}finally{this.innerSubmitting=!1}}},async onAudiencesSelectedFromAdder(e){const{data:i}=await this.$apollo.query({query:D,variables:{input:{workspace_id:this.workspaceId,audience_ids:e.ids}}});this.usersFromAudiencesToAdd=i.container_workspace_bulk_audience_members_to_add?i.container_workspace_bulk_audience_members_to_add.members_to_add:0,this.audiencesToAdd=e.ids,this.modal.confirmAudienceAdderSelection=!0,this.isRequestingAudiencesToAdd=!1},cancelAddAudiences(){this.modal.confirmAudienceAdderSelection=!1,this.isRequestingAudiencesToAdd=!1},async confirmAddAudiences(){if(this.usersFromAudiencesToAdd<=0)this.modal.confirmAudienceAdderSelection=!1;else{this.isAddingAudiences=!0;try{await this.$apollo.mutate({mutation:q,variables:{input:{workspace_id:this.workspaceId,audience_ids:this.audiencesToAdd}}}),Object(g.notify)({message:this.$str("bulk_add_audiences_modal_confirmation_message","container_workspace"),type:"success"})}catch(e){Object(g.notify)({message:this.$str("error:bulk_add_audiences","container_workspace"),type:"error"})}finally{this.modal.confirmAudienceAdderSelection=!1,this.modal.audienceAdder=!1,this.isAddingAudiences=!1,this.isRequestingAudiencesToAdd=!1}}}}},R=(a("GY/S"),a("KHd+")),U=function(e){e.options.__langStrings={container_workspace:["actions","actions_label","add_members","bulk_add_audiences","bulk_add_audiences_modal_confirmation_message","cancel_request","delete_warning_msg","delete_warning_title","delete_workspace","edit_space","error:add_members","error:bulk_add_audiences","error:cancel_member_request","error:delete_workspace","error:join_space","error:leave_space","error:request_to_join","joined","join_workspace","join_space","leave","leave_workspace","leave_workspace_message","leave_workspace_message_not_public","member","mute_notifications","owner","request_to_join","transfer_ownership","unmute_notifications"],core:["admin","delete"]}},H=Object(R.a)(E,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspacePrimaryAction",class:{"tui-workspacePrimaryAction--initialised":e.$apollo.loading}},[a("ModalPresenter",{attrs:{open:e.modal.leaveConfirm},on:{"request-close":function(i){e.modal.leaveConfirm=!1}}},[a("WorkspaceWarningModal",{attrs:{title:e.$str("delete_warning_title","container_workspace"),"message-content":e.getContentMessage,"confirm-button-text":e.$str("leave","container_workspace")},on:{confirm:e.leaveWorkspace}})],1),e._v(" "),a("ConfirmationModal",{attrs:{open:e.modal.deleteConfirm,title:e.$str("delete_warning_title","container_workspace"),"confirm-button-text":e.$str("delete","core"),loading:e.deleting},on:{confirm:e.handleDelete,cancel:function(i){e.modal.deleteConfirm=!1}}},[a("p",{staticClass:"tui-workspaceWarningModal__content",domProps:{innerHTML:e._s(e.$str("delete_warning_msg","container_workspace"))}})]),e._v(" "),a("ModalPresenter",{attrs:{open:e.modal.edit},on:{"request-close":function(i){e.modal.edit=!1}}},[a("WorkspaceEditModal",{attrs:{"workspace-id":e.workspaceId},on:{"update-workspace":e.updateWorkspace}})],1),e._v(" "),a("ModalPresenter",{attrs:{open:e.modal.transferOwner},on:{"request-close":function(i){e.modal.transferOwner=!1}}},[a("WorkspaceTransferOwnerModal",{attrs:{"workspace-id":e.workspaceId},on:{"transfered-owner":function(i){e.modal.transferOwner=!1}}})],1),e._v(" "),e.interactor.own||e.interactor.workspaces_admin?a("WorkspaceUserAdder",{attrs:{open:e.modal.adder,"workspace-id":e.workspaceId},on:{cancel:function(i){e.modal.adder=!1},"add-members":e.handleAddMembers}}):e._e(),e._v(" "),a("AudienceAdder",{attrs:{open:e.modal.audienceAdder,"context-id":e.workspaceContextId,"show-loading-btn":e.isRequestingAudiencesToAdd},on:{added:function(i){return e.onAudiencesSelectedFromAdder(i)},"add-button-clicked":function(i){e.isRequestingAudiencesToAdd=!0},cancel:function(i){e.modal.audienceAdder=!1}}}),e._v(" "),a("ModalPresenter",{attrs:{open:e.modal.confirmAudienceAdderSelection},on:{"request-close":e.cancelAddAudiences}},[a("WorkspaceAddAudienceModal",{attrs:{loading:e.isAddingAudiences,"users-from-audiences-to-add":e.usersFromAudiencesToAdd},on:{confirm:e.confirmAddAudiences,cancel:e.cancelAddAudiences}})],1),e._v(" "),e.$apollo.loading?a("Loading"):[e.interactor.own||e.interactor.workspaces_admin?a("Dropdown",{staticClass:"tui-workspacePrimaryAction__dropdown",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(i){var n=i.toggle,t=i.isOpen;return[a("Button",{staticClass:"tui-workspacePrimaryAction__dropdown-button",attrs:{text:e.interactor.own?e.$str("owner","container_workspace"):e.$str("admin","core"),"aria-label":e.$str("actions_label","container_workspace",e.interactor.own?e.$str("owner","container_workspace"):e.$str("admin","core")),"aria-expanded":t,caret:!0},on:{click:function(e){return e.preventDefault(),n(e)}}})]}}],null,!1,3226766440)},[e._v(" "),e.interactor.can_join?a("DropdownItem",{on:{click:e.joinWorkspace}},[e._v("\n        "+e._s(e.$str("join_workspace","container_workspace"))+"\n      ")]):e._e(),e._v(" "),e.interactor.can_leave?a("DropdownItem",{on:{click:function(i){e.modal.leaveConfirm=!0}}},[e._v("\n        "+e._s(e.$str("leave_workspace","container_workspace"))+"\n      ")]):e._e(),e._v(" "),e.interactor.can_add_members?a("DropdownItem",{on:{click:function(i){e.modal.adder=!0}}},[e._v("\n        "+e._s(e.$str("add_members","container_workspace"))+"\n      ")]):e._e(),e._v(" "),e.interactor.can_add_audiences?a("DropdownItem",{on:{click:function(i){e.modal.audienceAdder=!0}}},[e._v("\n        "+e._s(e.$str("bulk_add_audiences","container_workspace"))+"\n      ")]):e._e(),e._v(" "),e.interactor.can_update?a("DropdownItem",{on:{click:function(i){e.modal.edit=!0}}},[e._v("\n        "+e._s(e.$str("edit_space","container_workspace"))+"\n      ")]):e._e(),e._v(" "),e.interactor.joined?a("DropdownItem",{on:{click:function(i){return e.updateMuteStatus(!e.interactor.muted)}}},[e.interactor.muted?[e._v("\n          "+e._s(e.$str("unmute_notifications","container_workspace"))+"\n        ")]:[e._v("\n          "+e._s(e.$str("mute_notifications","container_workspace"))+"\n        ")]],2):e._e(),e._v(" "),e.interactor.can_transfer_ownership?a("DropdownItem",{on:{click:function(i){e.modal.transferOwner=!0}}},[e._v("\n        "+e._s(e.$str("transfer_ownership","container_workspace"))+"\n      ")]):e._e(),e._v(" "),e.interactor.can_delete?a("DropdownItem",{on:{click:function(i){e.modal.deleteConfirm=!0}}},[e._v("\n        "+e._s(e.$str("delete_workspace","container_workspace"))+"\n      ")]):e._e()],1):[!e.interactor.joined&&e.interactor.can_join?a("LoadingButton",{staticClass:"tui-workspacePrimaryAction__button",attrs:{loading:e.innerSubmitting,text:e.$str("join_workspace","container_workspace"),"aria-disabled":e.innerSubmitting,"aria-label":e.$str("join_space","container_workspace",e.workspaceName)},on:{click:e.joinWorkspace}}):!e.interactor.joined&&e.interactor.has_requested_to_join?a("LoadingButton",{staticClass:"tui-workspacePrimaryAction__button",attrs:{loading:e.innerSubmitting,text:e.$str("cancel_request","container_workspace"),"aria-disabled":e.innerSubmitting,"aria-label":e.$str("cancel_request","container_workspace")},on:{click:e.cancelRequestToJoinWorkspace}}):!e.interactor.joined&&e.interactor.can_request_to_join?a("LoadingButton",{staticClass:"tui-workspacePrimaryAction__button",attrs:{loading:e.innerSubmitting,text:e.$str("request_to_join","container_workspace"),"aria-disabled":e.innerSubmitting,"aria-label":e.$str("request_to_join","container_workspace")},on:{click:e.requestToJoinWorkspace}}):a("Dropdown",{staticClass:"tui-workspacePrimaryAction__dropdown",attrs:{position:"bottom-right"},scopedSlots:e._u([{key:"trigger",fn:function(i){var n=i.toggle,t=i.isOpen;return[a("Button",{staticClass:"tui-workspacePrimaryAction__dropdown-button",attrs:{text:e.$str("joined","container_workspace"),"aria-label":e.$str("actions_label","container_workspace",e.$str("member","container_workspace")),caret:!0,"aria-expanded":t},on:{click:function(e){return e.preventDefault(),n(e)}}})]}}])},[e._v(" "),e.interactor.can_leave?a("DropdownItem",{on:{click:function(i){e.modal.leaveConfirm=!0}}},[e._v("\n          "+e._s(e.$str("leave_workspace","container_workspace"))+"\n        ")]):e._e(),e._v(" "),a("DropdownItem",{on:{click:function(i){return e.updateMuteStatus(!e.interactor.muted)}}},[e.interactor.muted?[e._v("\n            "+e._s(e.$str("unmute_notifications","container_workspace"))+"\n          ")]:[e._v("\n            "+e._s(e.$str("mute_notifications","container_workspace"))+"\n          ")]],2)],1)]]],2)}),[],!1,null,null,null);"function"==typeof U&&U(H),H.options.__hasBlocks={script:!0,template:!0};i.default=H.exports},SKvo:function(e,i,a){"use strict";var n=a("LWsu");a.n(n).a},SMGy:function(e,i,a){},Sben:function(e,i,a){"use strict";a.r(i);var n=a("dj/p"),t=a.n(n),r=a("Hl3G"),s=a.n(r),o=a("5gBL"),d=a.n(o),c=a("/ae1"),l=a.n(c),u=a("Z82V"),m=a.n(u),k=a("UpZR"),p=a.n(k),v=a("fPwS"),_=a.n(v),g=a("yAFK"),f=a("BaY1"),b=a.n(f),N=a("zQe5"),w=a.n(N),h={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_discussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"removed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]}]}}]}}]},y={components:{Layout:t.a,WorkspaceMenu:s.a,DiscussionCard:d.a,BackArrow:l.a,CommentBox:m.a,Loading:_.a,SidePanel:b.a,WorkspaceContentLayout:w.a},props:{discussionId:{type:[Number,String],required:!0}},apollo:{discussion:{query:h,variables(){return{id:this.discussionId}}}},data:()=>({discussion:null,submitting:!1,formElement:null}),computed:{size:()=>g.SIZE_LARGE},methods:{scrollToCommentForm(){this.formElement&&this.formElement.scrollIntoView(!1)},setFormElement(e){this.formElement=e},updateDiscussion(e){p.a.writeQuery({query:h,variables:{id:this.discussionId},data:{discussion:e}})},updateDiscussionComments(){let{discussion:e}=p.a.readQuery({query:h,variables:{id:this.discussionId}});e=Object.assign({},e),e.total_comments+=1,p.a.writeQuery({query:h,variables:{id:this.discussionId},data:{discussion:e}})},updateReactStatus({status:e}){let{discussion:i}=p.a.readQuery({query:h,variables:{id:this.discussionId}});i=Object.assign({},i),e?i.total_reactions+=1:0!=i.total_reactions&&(i.total_reactions-=1),i.discussion_interactor=Object.assign({},i.discussion_interactor),i.discussion_interactor.reacted=e,p.a.writeQuery({query:h,variables:{id:this.discussionId},data:{discussion:i}})}}},F=(a("cIa9"),a("KHd+")),S=function(e){e.options.__langStrings={container_workspace:["discussions","back_to_discussions","comment"],totara_comment:["comments"]}},C=Object(F.a)(y,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Layout",{staticClass:"tui-workspaceDiscussionPage",scopedSlots:e._u([e.$apollo.loading?null:{key:"left",fn:function(i){return["horizontal"===i.direction?a("SidePanel",{attrs:{sticky:!1,"initially-open":!0,"show-button-control":!1}},[a("WorkspaceMenu",{attrs:{"selected-workspace-id":e.discussion.workspace_id}})],1):e._e()]}},e.$apollo.loading?null:{key:"right",fn:function(i){var n=i.direction,t=i.units;return[a("WorkspaceContentLayout",{staticClass:"tui-workspaceDiscussionPage__column",attrs:{"grid-direction":n,"max-units":t}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("a",{staticClass:"tui-workspaceDiscussionPage__backButton",attrs:{href:e.$url("/container/type/workspace/workspace.php",{id:e.discussion.workspace_id})}},[a("BackArrow",{attrs:{size:"200"}}),e._v(" "),a("span",[e._v(" "+e._s(e.$str("discussions","container_workspace"))+" ")])],1),e._v(" "),a("DiscussionCard",{staticClass:"tui-workspaceDiscussionPage__discussion",attrs:{"discussion-id":e.discussion.id,"total-reactions":e.discussion.total_reactions,"total-comments":e.discussion.total_comments,"time-description":e.discussion.time_description,reacted:e.discussion.discussion_interactor.reacted,removed:e.discussion.discussion_interactor.removed,"comment-able":e.discussion.discussion_interactor.can_comment,"update-able":e.discussion.discussion_interactor.can_update,"delete-able":e.discussion.discussion_interactor.can_delete,"react-able":e.discussion.discussion_interactor.can_react,"report-able":e.discussion.discussion_interactor.can_report,"creator-id":e.discussion.owner.id,"creator-fullname":e.discussion.owner.fullname,"creator-image-alt":e.discussion.owner.profileimagealt||e.discussion.owner.fullname,"creator-image-src":e.discussion.owner.profileimageurl,"discussion-content":e.discussion.content,"show-discussion-link":!1,edited:e.discussion.edited},on:{"update-react-status":e.updateReactStatus,"update-discussion":e.updateDiscussion,"trigger-comment":e.scrollToCommentForm}}),e._v(" "),a("h3",{staticClass:"tui-workspaceDiscussionPage__title"},[a("span",[e._v("\n            "+e._s(e.$str("comments","totara_comment",e.discussion.total_comments))+"\n          ")]),e._v(" "),e.submitting?a("Loading",{attrs:{size:"300"}}):e._e()],1),e._v(" "),a("CommentBox",{staticClass:"tui-workspaceDiscussionPage__commentBox",attrs:{area:"discussion",component:"container_workspace","instance-id":e.discussion.id,editor:{variant:"container_workspace-discussion",compact:!1,contextId:e.discussion.workspace_context_id},size:e.size,"submit-form-button-text":e.$str("comment","container_workspace"),"show-like-button-text":!0,"show-reply-button-text":!0,"with-border":!0,submitting:e.submitting,"comment-able":e.discussion.discussion_interactor.can_comment,"comment-inline-head":!0},on:{"update-submitting":function(i){e.submitting=i},"create-comment":e.updateDiscussionComments,"form-ready":e.setFormElement}})],1)])]}}],null,!0)})}),[],!1,null,null,null);"function"==typeof S&&S(C),C.options.__hasBlocks={script:!0,template:!0};i.default=C.exports},T79p:function(e,i,a){"use strict";a.r(i);var n=a("ak/h"),t=a.n(n),r=a("UpZR"),s=a.n(r),o=a("o01z"),d=a.n(o),c=a("Oj5a"),l=a.n(c),u=a("c8bj"),m=a.n(u),k=a("1tX2"),p=a("Zvsn"),v={components:{SidePanelNavGroup:l.a,ContributeWorkspace:t.a,SidePanelNav:d.a,SidePanelNavLinkItem:m.a},props:{selectedWorkspaceId:[Number,String]},apollo:{workspaces:{query:k.a,context:{batch:!0}},categoryInteractor:{query:p.a,context:{batch:!0},variables:()=>({workspace_id:null}),update:({category_interactor:e})=>e}},data(){return{categoryInteractor:{},innerSelectedWorkspaceId:this.selectedWorkspaceId}},computed:{canCreateWorkspace(){return this.categoryInteractor.can_create}},watch:{selectedWorkspaceId(e){this.innerSelectedWorkspaceId=e}},methods:{addWorkspace(e){const i=Array.prototype.slice.call(this.workspaces);s.a.writeQuery({query:k.a,data:{workspaces:Array.prototype.concat.call(i,[e])}}),this.innerSelectedWorkspaceId=e.id,this.$emit("create-workspace",e)},canCreate(){return console.warn("canCreate() method has been deprecated, please do not use it."),this.categoryInteractor.can_create}}},_=(a("lOoG"),a("KHd+")),g=function(e){e.options.__langStrings={container_workspace:["your_spaces","find_spaces","workspace_navigation","workspace_updated_notification"]}},f=Object(_.a)(v,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("SidePanelNav",{staticClass:"tui-workspaceMenu",attrs:{"aria-label":e.$str("workspace_navigation","container_workspace")},model:{value:e.innerSelectedWorkspaceId,callback:function(i){e.innerSelectedWorkspaceId=i},expression:"innerSelectedWorkspaceId"}},[a("SidePanelNavGroup",{staticClass:"tui-workspaceMenu__group",attrs:{title:e.$str("your_spaces","container_workspace")}},[e.canCreateWorkspace?a("ContributeWorkspace",{attrs:{slot:"heading-side",disabled:e.$apollo.queries.workspaces.loading},on:{"create-workspace":e.addWorkspace},slot:"heading-side"}):e._e(),e._v(" "),e.$apollo.queries.workspaces.loading?e._e():e._l(e.workspaces,(function(i,n){var t=i.url,r=i.name,s=i.id,o=i.interactor;return a("SidePanelNavLinkItem",{key:n,attrs:{id:s,text:r,url:t,notification:e.innerSelectedWorkspaceId!=s&&!o.has_seen,"notification-text":e.$str("workspace_updated_notification","container_workspace",r)}})}))],2),e._v(" "),a("div",{staticClass:"tui-workspaceMenu__separator"}),e._v(" "),a("SidePanelNavGroup",{staticClass:"tui-workspaceMenu__group"},[a("SidePanelNavLinkItem",{attrs:{id:-1,url:e.$url("/container/type/workspace/spaces.php"),text:e.$str("find_spaces","container_workspace")}})],1)],1)}),[],!1,null,null,null);"function"==typeof g&&g(f),f.options.__hasBlocks={script:!0,template:!0};i.default=f.exports},TFTh:function(e,i,a){"use strict";a.r(i);var n=a("Hl3G"),t=a.n(n),r=a("5h9J"),s=a.n(r),o=a("ixxs"),d=a.n(o),c={components:{WorkspaceMenu:t.a,ButtonIcon:s.a,ShowIcon:d.a},props:{workspaceId:{type:[Number,String],required:!0},workspaceName:{type:String,required:!0},showNavigation:Boolean},data:()=>({showMenu:!1}),computed:{buttonMenuAriaLabel(){return this.showMenu?this.$str("collapse_nav","container_workspace"):this.$str("expand_nav","container_workspace")}}},l=(a("dD6o"),a("KHd+")),u=function(e){e.options.__langStrings={container_workspace:["collapse_nav","expand_nav"]}},m=Object(l.a)(c,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceControlMenu"},[a("div",{staticClass:"tui-workspaceControlMenu__head"},[a("div",{staticClass:"tui-workspaceControlMenu__control"},[a("h2",{staticClass:"tui-workspaceControlMenu__title"},[e._v("\n        "+e._s(e.workspaceName)+"\n      ")]),e._v(" "),e.showNavigation?a("ButtonIcon",{staticClass:"tui-workspaceControlMenu__menuButton",attrs:{"aria-label":e.buttonMenuAriaLabel,styleclass:{transparentNoPadding:!0,small:!0}},on:{click:function(i){i.preventDefault(),e.showMenu=!e.showMenu}}},[a("ShowIcon")],1):e._e()],1),e._v(" "),a("WorkspaceMenu",{directives:[{name:"show",rawName:"v-show",value:e.showMenu&&e.showNavigation,expression:"showMenu && showNavigation"}],staticClass:"tui-workspaceControlMenu__menu",attrs:{"selected-workspace-id":e.workspaceId}})],1)])}),[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};i.default=m.exports},TXEh:function(e,i){e.exports=tui.require("tui/util")},TYuk:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceTransferOwnerModal")},U66g:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceAddAudienceModal")},URbu:function(e,i){e.exports=tui.require("container_workspace/components/form/upload/SpaceImagePicker")},Ucf8:function(e,i,a){"use strict";var n=a("HAbq");a.n(n).a},Uhf3:function(e,i){e.exports=tui.require("totara_engage/components/contribution/Filter")},UnvU:function(e,i){e.exports=tui.require("tui/components/icons/NotificationDisabled")},UpZR:function(e,i){e.exports=tui.require("tui/apollo_client")},"VI/h":function(e,i){e.exports=tui.require("container_workspace/components/filter/WorkspaceFileFilter")},VNV1:function(e,i){e.exports=tui.require("tui/components/icons/Notification")},VX2K:function(e,i){e.exports=tui.require("tui/components/form/Radio")},Vk8W:function(e,i,a){"use strict";a.r(i);var n=a("FBvN"),t=a.n(n),r=a("49h4"),s=a.n(r),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_discussion_filter_options"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"sorts"},name:{kind:"Name",value:"container_workspace_discussion_sorts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]},d={components:{SearchFilter:t.a,SelectFilter:s.a},props:{searchTerm:String,sort:{type:String,required:!0},workspaceId:{type:[Number,String],required:!0}},apollo:{sortOptions:{query:o,context:{batch:!0},update:({sorts:e})=>Array.prototype.map.call(e,({value:e,label:i})=>({label:i,id:e}))}},data(){return{innerSearchTerm:this.searchTerm,innerSort:this.sort,sortOptions:[]}},watch:{sort(e){e!==this.innerSort&&(this.innerSort=e)},innerSearchTerm(){this.$emit("update-search-term",this.innerSearchTerm)},innerSort(e){e!==this.sort&&this.$emit("update-sort",e)}}},c=(a("vB2H"),a("KHd+")),l=function(e){e.options.__langStrings={container_workspace:["search_discussions","browse_files"],core:["sortby"]}},u=Object(c.a)(d,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceDiscussionFilter"},[a("div",{staticClass:"tui-workspaceDiscussionFilter__search"},[a("SearchFilter",{staticClass:"tui-workspaceDiscussionFilter__search-box",attrs:{label:e.$str("search_discussions","container_workspace"),"drop-label":"",placeholder:e.$str("search_discussions","container_workspace")},model:{value:e.innerSearchTerm,callback:function(i){e.innerSearchTerm=i},expression:"innerSearchTerm"}}),e._v(" "),a("a",{staticClass:"tui-workspaceDiscussionFilter__search-filesLink",attrs:{href:e.$url("/container/type/workspace/workspace_files.php",{id:e.workspaceId})}},[e._v("\n      "+e._s(e.$str("browse_files","container_workspace"))+"\n    ")])],1),e._v(" "),e._t("pinned-discussions"),e._v(" "),a("div",{staticClass:"tui-workspaceDiscussionFilter__sortBox"},[a("SelectFilter",{attrs:{label:e.$str("sortby","core"),"show-label":!0,options:e.sortOptions},model:{value:e.innerSort,callback:function(i){e.innerSort=i},expression:"innerSort"}})],1)],2)}),[],!1,null,null,null);"function"==typeof l&&l(u),u.options.__hasBlocks={script:!0,template:!0};i.default=u.exports},VqqB:function(e,i,a){"use strict";var n=a("RNCt");a.n(n).a},Vqu5:function(e,i,a){"use strict";a.r(i),a.d(i,"PUBLIC",(function(){return n})),a.d(i,"PRIVATE",(function(){return t})),a.d(i,"HIDDEN",(function(){return r})),a.d(i,"isPublic",(function(){return s})),a.d(i,"isPrivate",(function(){return o})),a.d(i,"isHidden",(function(){return d}));const n="PUBLIC",t="PRIVATE",r="HIDDEN";function s(e){return e===n}function o(e){return e===t}function d(e){return e===r}},XXtg:function(e,i,a){"use strict";var n=a("/Vgf");a.n(n).a},XgQu:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceWarningModal")},Xi9X:function(e,i){e.exports=tui.require("tui/components/avatar/Avatar")},Y4bG:function(e,i,a){},YNvJ:function(e,i,a){"use strict";a.r(i);var n=a("fPwS"),t=a.n(n),r=a("yc2X"),s=a.n(r),o=a("12HA"),d={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ml_recommender_get_recommended_user_workspaces"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"ml_recommender_recommended_user_workspaces_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"workspaces"},name:{kind:"Name",value:"ml_recommender_recommended_user_workspaces"},arguments:[{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]}]}}]}}]},c={components:{Loading:t.a,SpaceCardsGrid:s.a},props:{maxGridUnits:{type:[Number,String],required:!0}},apollo:{workspaces:{query:d,fetchPolicy:"network-only",variables:()=>({theme:o.config.theme.name})}},data:()=>({workspaces:[]}),methods:{joinWorkspace({workspace_id:e}){this.$emit("join-workspace",e)}}},l=(a("1c95"),a("KHd+")),u=function(e){e.options.__langStrings={container_workspace:["recommended_spaces","view_all_spaces"]}},m=Object(l.a)(c,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-recommendedSpaces"},[a("div",{staticClass:"tui-recommendedSpaces__head"},[a("h2",{staticClass:"tui-recommendedSpaces__title"},[a("span",[e._v(e._s(e.$str("recommended_spaces","container_workspace")))]),e._v(" "),e.$apollo.loading?a("Loading"):e._e()],1),e._v(" "),a("a",{staticClass:"tui-recommendedSpaces__link",attrs:{href:e.$url("/container/type/workspace/spaces.php")}},[e._v("\n      "+e._s(e.$str("view_all_spaces","container_workspace"))+"\n    ")])]),e._v(" "),e.$apollo.loading||0===e.workspaces.length?e._e():a("SpaceCardsGrid",{staticClass:"tui-recommendedSpaces__grid",attrs:{"max-grid-units":e.maxGridUnits,workspaces:e.workspaces},on:{"join-workspace":e.joinWorkspace}})],1)}),[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};i.default=m.exports},YPxT:function(e,i){e.exports=tui.require("totara_engage/components/modal/EngageAdderModal")},"Ysn+":function(e,i,a){"use strict";a.r(i);var n=a("kUb+"),t=a.n(n),r=a("H/tB"),s=a.n(r),o={components:{ActionCard:t.a},props:{timeDescription:{type:String,required:!0},description:{type:String,required:!0}},mounted(){this.$_scan()},updated(){this.$_scan()},methods:{$_scan(){if(!this.$refs.description)return;let e=this.$refs.description;s.a.scan(e)}}},d=(a("CDYD"),a("KHd+")),c=Object(d.a)(o,(function(){var e=this.$createElement,i=this._self._c||e;return i("ActionCard",{staticClass:"tui-workspaceDescription"},[i("div",{staticClass:"tui-workspaceDescription__body",attrs:{slot:"card-body"},slot:"card-body"},[i("p",{staticClass:"tui-workspaceDescription__time"},[this._v("\n      "+this._s(this.timeDescription)+"\n    ")]),this._v(" "),i("div",{ref:"description",domProps:{innerHTML:this._s(this.description)}})])])}),[],!1,null,null,null);c.options.__hasBlocks={script:!0,template:!0};i.default=c.exports},Z82V:function(e,i){e.exports=tui.require("totara_comment/components/box/CommentBox")},ZTsp:function(e,i,a){},Zb2W:function(e,i,a){"use strict";a.r(i);var n=a("5h9J"),t=a.n(n),r=a("VNV1"),s=a.n(r),o=a("UnvU"),d=a.n(o),c={components:{ButtonIcon:t.a,Notification:s.a,NotificationDisabled:d.a},props:{muted:{type:Boolean,required:!0}},computed:{buttonAriaLabel(){return this.muted?this.$str("unmute_workspace","container_workspace"):this.$str("mute_workspace","container_workspace")}}},l=a("KHd+"),u=function(e){e.options.__langStrings={container_workspace:["mute_workspace","unmute_workspace"]}},m=Object(l.a)(c,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("ButtonIcon",{attrs:{"aria-label":e.buttonAriaLabel,styleclass:{transparentNoPadding:!0}},on:{click:function(i){return i.preventDefault(),e.$emit("update",!e.muted)}}},[e.muted?a("NotificationDisabled"):a("Notification")],1)}),[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};i.default=m.exports},Zvsn:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_workspace_category_interactor"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"category_interactor"},name:{kind:"Name",value:"container_workspace_workspace_category_interactor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_public"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_private"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_hidden"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},"ak/h":function(e,i){e.exports=tui.require("container_workspace/components/create/ContributeWorkspace")},ao45:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_files"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_file_sort"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"extension"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_alphanum"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_file_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"extension"},value:{kind:"Variable",name:{kind:"Name",value:"extension"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"files"},name:{kind:"Name",value:"container_workspace_files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"extension"},value:{kind:"Variable",name:{kind:"Name",value:"extension"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_size"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"extension"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"date"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"alt_text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"download_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mimetype"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"file_type"},arguments:[],directives:[]}]}}]}}]}},awvy:function(e,i,a){},bYkL:function(e,i){e.exports=tui.require("tui/components/adder/Adder")},c8bj:function(e,i){e.exports=tui.require("tui/components/sidepanel/SidePanelNavLinkItem")},cIa9:function(e,i,a){"use strict";var n=a("p4CY");a.n(n).a},cNVA:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceModal")},cSWX:function(e,i,a){"use strict";a.r(i);var n=a("dj/p"),t=a.n(n),r=a("Hl3G"),s=a.n(r),o=a("g5S5"),d=a.n(o),c=a("1l6u"),l=a.n(c),u=a("BaY1"),m=a.n(u),k=a("vyVp"),p=a("t5mg"),v=a("Zvsn"),_={components:{SidePanel:m.a,LayoutTwoColumn:t.a,WorkspaceMenu:s.a,EmptySpacesHeader:d.a,RecommendSpaces:l.a},props:{showRecommended:{type:Boolean,required:!0}},apollo:{notifications:{query:p.a,update:()=>[],result({data:{notifications:e}}){Array.prototype.forEach.call(e,({message:e,type:i})=>{Object(k.notify)({message:e,type:i})})}},categoryInteractor:{query:v.a,variables:()=>({workspace_id:null}),update:({category_interactor:e})=>e}},data:()=>({notifications:[],categoryInteractor:{}}),computed:{canCreate(){return this.categoryInteractor.can_create}},methods:{navigateToWorkspace({id:e}){document.location.href=this.$url("/container/type/workspace/workspace.php",{id:e})},joinWorkspace(e){this.navigateToWorkspace({id:e})}}},g=(a("HMzb"),a("KHd+")),f=Object(g.a)(_,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("LayoutTwoColumn",{staticClass:"tui-emptySpacesPage",scopedSlots:e._u([{key:"right",fn:function(i){var n=i.units;return a("div",{staticClass:"tui-emptySpacesPage__content"},[a("EmptySpacesHeader",{staticClass:"tui-emptySpacesPage__header",attrs:{"can-create":e.canCreate}}),e._v(" "),e.showRecommended?a("hr",{staticClass:"tui-emptySpacesPage__horizontalLine"}):e._e(),e._v(" "),e.showRecommended?a("RecommendSpaces",{staticClass:"tui-emptySpacesPage__recommendedSpaces",attrs:{"max-grid-units":n},on:{"join-workspace":e.joinWorkspace}}):e._e()],1)}}])},[a("SidePanel",{attrs:{slot:"left","show-button-control":!1,"initially-open":!0},slot:"left"},[a("WorkspaceMenu",{on:{"create-workspace":e.navigateToWorkspace}})],1)],1)}),[],!1,null,null,null);f.options.__hasBlocks={script:!0,template:!0};i.default=f.exports},csKv:function(e,i){e.exports=tui.require("tui/components/form/FormRowStack")},dD6o:function(e,i,a){"use strict";var n=a("sdyJ");a.n(n).a},dQ8v:function(e,i,a){"use strict";a.r(i),i.default={data:()=>({isLoadMoreVisible:!1}),methods:{async onScrollToBottom(){this.isLoadMoreVisible||(await this.loadMoreItems(),this.isLoadMoreVisible=!0)},async loadMore(){await this.loadMoreItems(),this.isLoadMoreVisible=!1}}}},dTgY:function(e,i){e.exports=tui.require("container_workspace/index")},"dj/p":function(e,i){e.exports=tui.require("tui/components/layouts/LayoutTwoColumn")},do59:function(e,i,a){"use strict";a.r(i);var n=a("Xi9X"),t={components:{Avatar:a.n(n).a},props:{imageSrc:{required:!0,type:String},imageAlt:{required:!0,type:String},profileUrl:{required:!0,type:String}}},r=a("KHd+"),s=Object(r.a)(t,(function(){var e=this.$createElement,i=this._self._c||e;return i("a",{attrs:{href:this.profileUrl}},[i("Avatar",{attrs:{src:this.imageSrc,alt:this.imageAlt,size:"xsmall"}})],1)}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0};i.default=s.exports},drxS:function(e,i){e.exports=tui.require("container_workspace/components/table/WorkspaceFileTable")},dtfu:function(e,i){e.exports=tui.require("tui/components/responsive/Responsive")},e3MU:function(e,i){e.exports=tui.require("tui/components/buttons/InfoIconButton")},eXz4:function(e,i,a){"use strict";var n=a("Nh58");a.n(n).a},eoFd:function(e,i,a){"use strict";a.r(i);var n=a("hUlo"),t=a.n(n),r=a("UpZR"),s=a.n(r),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_pending_member_requests"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member_requests"},name:{kind:"Name",value:"container_workspace_member_requests"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"PENDING"}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"StringValue",value:"eyJsaW1pdCI6MCwicGFnZSI6MX0=",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_declined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_accepted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_member_request_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"PENDING"}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"StringValue",value:"eyJsaW1pdCI6MCwicGFnZSI6MX0=",block:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]},d={components:{MemberRequestCard:t.a},apollo:{memberRequests:{query:o,variables(){return{workspace_id:this.workspaceId}},update:({cursor:e,member_requests:i})=>({items:i,cursor:e})}},props:{workspaceId:{type:[Number,String],required:!0}},data:()=>({memberRequests:{cursor:{total:0,next:null},items:[]}}),methods:{acceptRequest(e){s.a.writeQuery({query:o,variables:{workspace_id:this.workspaceId},data:{cursor:this.memberRequests.cursor,membe_requests:this.memberRequests.items.map((function(i){return i.id==e&&((i=Object.assign({},i)).is_accepted=!0),i}))}}),this.$emit("accept-member-request")},declineRequest(e){s.a.writeQuery({query:o,variables:{workspace_id:this.workspaceId},data:{cursor:this.memberRequests.cursor,membe_requests:this.memberRequests.items.map((function(i){return i.id==e&&((i=Object.assign({},i)).is_declined=!0),i}))}}),this.$emit("decline-member-request")}}},c=(a("/FYy"),a("KHd+")),l=function(e){e.options.__langStrings={container_workspace:["requests_to_join"]}},u=Object(c.a)(d,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceMemberRequestList"},[a("h3",{staticClass:"tui-workspaceMemberRequestList__title"},[e._v("\n    "+e._s(e.$str("requests_to_join","container_workspace"))+"\n  ")]),e._v(" "),a("div",{staticClass:"tui-workspaceMemberRequestList__cards"},[e.memberRequests.items.length?e._l(e.memberRequests.items,(function(i,n){var t=i.user,r=i.id,s=i.is_accepted,o=i.is_declined;return a("MemberRequestCard",{key:n,staticClass:"tui-workspaceMemberRequestList__card",attrs:{"user-id":t.id,"user-fullname":t.fullname,"user-profile-image-alt":t.profileimagealt||t.fullname,"user-profile-image-url":t.profileimageurl,"member-request-id":r,"is-approved":s,"is-declined":o},on:{"accept-request":e.acceptRequest,"decline-request":e.declineRequest}})})):e._e()],2)])}),[],!1,null,null,null);"function"==typeof l&&l(u),u.options.__hasBlocks={script:!0,template:!0};i.default=u.exports},fCWf:function(e,i){e.exports=tui.require("tui/components/links/ActionLink")},fPwS:function(e,i){e.exports=tui.require("tui/components/icons/Loading")},fUGz:function(e,i){e.exports=tui.require("container_workspace/components/card/OriginalSpaceCard")},g5S5:function(e,i){e.exports=tui.require("container_workspace/components/head/EmptySpacesHeader")},"g8/U":function(e,i){e.exports=tui.require("tui/components/layouts/PageHeading")},gLvT:function(e,i){e.exports=tui.require("tui/components/dropdown/Dropdown")},gTjB:function(e,i,a){"use strict";a.r(i);var n=a("tkAW"),t=a.n(n),r=a("u5iS"),s=a.n(r),o=a("gsPT"),d=a.n(o),c=a("vyVp"),l=a("dTgY"),u=a("12HA"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_workspace_raw"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_workspace"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]}]}}]}}]},k={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_update_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"description_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"private"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"hidden"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_boolean"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"workspace"},name:{kind:"Name",value:"container_workspace_update"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}},{kind:"Argument",name:{kind:"Name",value:"description"},value:{kind:"Variable",name:{kind:"Name",value:"description"}}},{kind:"Argument",name:{kind:"Name",value:"description_format"},value:{kind:"Variable",name:{kind:"Name",value:"description_format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}},{kind:"Argument",name:{kind:"Name",value:"private"},value:{kind:"Variable",name:{kind:"Name",value:"private"}}},{kind:"Argument",name:{kind:"Name",value:"hidden"},value:{kind:"Variable",name:{kind:"Name",value:"hidden"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"PLAIN"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_leave"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_transfer_ownership"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"muted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_seen"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"access"},arguments:[],directives:[]}]}}]}}]},p=a("1tX2"),v=a("Zvsn"),_={components:{Modal:t.a,ModalContent:s.a,WorkspaceForm:d.a},props:{workspaceId:{type:[String,Number],required:!0}},apollo:{workspace:{query:m,fetchPolicy:"network-only",variables(){return{id:this.workspaceId}}},categoryInteractor:{query:v.a,variables(){return{workspace_id:this.workspaceId}},update:({category_interactor:e})=>e}},data:()=>({submitting:!1,workspace:{},categoryInteractor:{}}),computed:{isPublic(){return Object(l.isPublic)(this.workspace.access)},isPrivate(){return Object(l.isPrivate)(this.workspace.access)},isHidden(){return Object(l.isHidden)(this.workspace.access)},canUnhide(){return this.categoryInteractor.can_create_hidden}},methods:{async updateWorkspace({name:e,description:i,descriptionFormat:a,draftId:n,isHidden:t,isPrivate:r}){if(!this.submitting){this.submitting=!0;try{const s=!t&&this.isHidden,{data:{workspace:o}}=await this.$apollo.mutate({mutation:k,refetchAll:!1,refetchQueries:[{query:p.a}],variables:{id:this.workspaceId,name:e,description:i,description_format:a,draft_id:n,private:r,hidden:t,theme:u.config.theme.name}});s&&await Object(c.notify)({message:this.$str("updated_to_private","container_workspace"),type:"success"}),this.$emit("update-workspace",o)}catch(e){await Object(c.notify)({message:this.$str("error:update","container_workspace",this.workspace.name),type:"error"})}finally{this.submitting=!1}}}}},g=(a("679m"),a("KHd+")),f=function(e){e.options.__langStrings={container_workspace:["edit_space","save_changes","error:update","updated_to_private"]}},b=Object(g.a)(_,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceEditModal",attrs:{size:"large",dismissable:{esc:!0,backdropClick:!1,overlayClose:!1}}},[a("ModalContent",{staticClass:"tui-workspaceEditModal__content",attrs:{"close-button":!1,title:e.$str("edit_space","container_workspace"),"title-id":e.$id("edit-space")}},[e.$apollo.loading?e._e():a("WorkspaceForm",{staticClass:"tui-workspaceEditModal__form",attrs:{submitting:e.submitting,"workspace-id":e.workspaceId,"workspace-name":e.workspace.name,"workspace-description":e.workspace.description,"workspace-description-format":e.workspace.description_format,"submit-button-label":e.$str("save_changes","container_workspace"),"show-private-box":!1,"show-hidden-check-box":!1,"show-unhidden-check-box":e.isHidden&&e.canUnhide,"workspace-private":e.isPrivate||e.isHidden,"workspace-hidden":e.isHidden},on:{submit:e.updateWorkspace,cancel:function(i){return e.$emit("request-close")}}})],1)],1)}),[],!1,null,null,null);"function"==typeof f&&f(b),b.options.__hasBlocks={script:!0,template:!0};i.default=b.exports},ggJH:function(e,i,a){"use strict";a.r(i);var n=a("8opU"),t=a.n(n),r=a("tkAW"),s=a.n(r),o=a("u5iS"),d=a.n(o),c={components:{WorkspaceAccessForm:t.a,Modal:s.a,ModalContent:d.a},props:{submitting:Boolean,selectedTopics:{type:Array,default:()=>[],validator:e=>0===(e=Array.prototype.filter.call(e,e=>!("id"in e)||!("value"in e))).length}}},l=a("KHd+"),u=function(e){e.options.__langStrings={totara_engage:["accesssettings"]}},m=Object(l.a)(c,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceAccessModal",attrs:{dismissable:{backdropClick:!1,esc:!1}}},[a("ModalContent",{staticClass:"tui-workspaceAccessModal__content",attrs:{title:e.$str("accesssettings","totara_engage"),"close-button":!1}},[a("WorkspaceAccessForm",{attrs:{"selected-topics":e.selectedTopics,submitting:e.submitting},on:{cancel:function(i){return e.$emit("request-close")},submit:function(i){return e.$emit("submit-form",i)}}})],1)],1)}),[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};i.default=m.exports},grGL:function(e,i){e.exports=tui.require("totara_engage/components/contribution/Contribute")},gsPT:function(e,i){e.exports=tui.require("container_workspace/components/form/WorkspaceForm")},h4xG:function(e,i,a){"use strict";var n=a("Mia9");a.n(n).a},hUlo:function(e,i){e.exports=tui.require("container_workspace/components/card/MemberRequestCard")},hjaT:function(e,i){e.exports=tui.require("tui/components/form/Checkbox")},hwPq:function(e,i,a){"use strict";a.r(i);var n=a("w2wx"),t=a.n(n),r=a("M3bB"),s=a.n(r),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_discussion_draft_id"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"draft_id"},name:{kind:"Name",value:"container_workspace_discussion_draft_id"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[]}]}}]},d={components:{PostAvatar:t.a,WorkspaceDiscussionForm:s.a},props:{avatarImageUrl:{type:String,required:!0},avatarImageAlt:{type:String,required:!0},avatarImageSrc:{type:String,required:!0},workspaceContextId:{type:[Number,String],required:!0},submitting:Boolean},apollo:{draftId:{query:o,fetchPolicy:"network-only",variables(){return{id:this.discussionId}},update:({draft_id:e})=>e}}},c=(a("CQl8"),a("KHd+")),l=Object(c.a)(d,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspacePostDiscussionForm"},[a("PostAvatar",{staticClass:"tui-workspacePostDiscussionForm__avatar",attrs:{"profile-url":e.avatarImageUrl,"image-alt":e.avatarImageAlt,"image-src":e.avatarImageSrc}}),e._v(" "),e.$apollo.loading?e._e():a("WorkspaceDiscussionForm",{staticClass:"tui-workspacePostDiscussionForm__form",attrs:{submitting:e.submitting,"draft-id":e.draftId,"show-cancel-button":!1,"workspace-context-id":e.workspaceContextId},on:{submit:function(i){return e.$emit("submit",i)}}})],1)}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};i.default=l.exports},"i/kK":function(e,i){e.exports=tui.require("tui/components/form/FormRow")},in8C:function(e,i){e.exports=tui.require("tui/components/icons/Comment")},ipzb:function(e,i,a){"use strict";a.r(i);var n=a("BxDI"),t=a.n(n),r=a("Emo+"),s=a.n(r),o=a("Q6By"),d=a.n(o),c=a("UpZR"),l=a.n(c),u=a("vyVp"),m=a("z16U"),k=a.n(m),p=a("QP7s"),v={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_post_discussion"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"content_format"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_create_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"content"},value:{kind:"Variable",name:{kind:"Name",value:"content"}}},{kind:"Argument",name:{kind:"Name",value:"content_format"},value:{kind:"Variable",name:{kind:"Name",value:"content_format"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"removed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]}]}}]}}]},_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_discussions"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"search_term"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sort"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"container_workspace_discussion_sort"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cursor"},name:{kind:"Name",value:"container_workspace_discussion_cursor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"pinned"},value:{kind:"BooleanValue",value:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"discussions"},name:{kind:"Name",value:"container_workspace_discussions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"search_term"},value:{kind:"Variable",name:{kind:"Name",value:"search_term"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}},{kind:"Argument",name:{kind:"Name",value:"sort"},value:{kind:"Variable",name:{kind:"Name",value:"sort"}}},{kind:"Argument",name:{kind:"Name",value:"pinned"},value:{kind:"BooleanValue",value:!1}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"HTML"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"time_description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total_comments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total_reactions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_context_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discussion_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_comment"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_report"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"removed"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_react"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reacted"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edited"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comment_cursor"},arguments:[],directives:[]}]}}]}}]},g=a("R5BP"),f=a.n(g),b=a("vF5l"),N=a.n(b),w=a("JXQf"),h=a.n(w),y=a("oFhe"),F=a.n(y),S={components:{Separator:t.a,PostDiscussionForm:k.a,DiscussionCard:s.a,DiscussionFilter:d.a,VirtualScroll:f.a,Button:N.a,PageLoader:h.a},mixins:[F.a],props:{workspaceId:{type:[Number,String],required:!0},workspaceContextId:{type:[Number,String],required:!0},selectedSort:{type:String,required:!0},workspaceTotalDiscussions:{type:[Number,String],required:!0}},apollo:{interactor:{query:p.a,context:{batch:!0},variables(){return{workspace_id:this.workspaceId}}},page:{query:_,fetchPolicy:"network-only",context:{batch:!0},variables(){return{workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm}},update:({cursor:e,discussions:i})=>({cursor:e,discussions:i})}},data(){return{interactor:{},submitting:!1,page:{cursor:{total:0,next:null},discussions:[]},sort:this.selectedSort,searchTerm:""}},computed:{canPostDiscussion(){return this.interactor.can_create_discussions},user(){return this.interactor.user?this.interactor.user:{}},discussionQueryVariables(){return{workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm}},loadMoreVisibility(){return this.isLoadMoreVisible&&this.page.cursor.next&&!this.$apollo.loading}},watch:{selectedSort(e){this.sort=e}},methods:{$_getDiscussionCache(){return l.a.readQuery({query:_,variables:this.discussionQueryVariables})},async submit({content:e,itemId:i}){if(!this.submitting){this.submitting=!0;try{await this.$apollo.mutate({mutation:v,refetchAll:!1,variables:{workspace_id:this.workspaceId,content:e,draft_id:i},update:(e,{data:{discussion:i}})=>{const a={workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm};let{cursor:n,discussions:t}=e.readQuery({query:_,variables:a});n=Object.assign({},n),n.total+=1,e.writeQuery({query:_,variables:a,data:{cursor:n,discussions:Array.prototype.concat.call([i],t)}})}}),this.$emit("add-discussion")}catch(e){await Object(u.notify)({message:this.$str("error:create_discussion","container_workspace"),type:"error"})}finally{this.submitting=!1}}},updateDiscussionReactStatus({discussionId:e,status:i}){let{discussions:a,cursor:n}=this.$_getDiscussionCache();l.a.writeQuery({query:_,variables:this.discussionQueryVariables,data:{cursor:n,discussions:Array.prototype.map.call(a,a=>{if(a.id==e){let e=Object.assign({},a),n=Object.assign({},e.discussion_interactor);return n.reacted=i,e.discussion_interactor=n,i?e.total_reactions+=1:0!=e.total_reactions&&(e.total_reactions-=1),e}return a})}})},updateDiscussion(e){let{discussions:i,cursor:a}=this.$_getDiscussionCache();l.a.writeQuery({query:_,variables:this.discussionQueryVariables,data:{cursor:a,discussions:Array.prototype.map.call(i,i=>i.id===e.id?e:i)}})},addNewComment(e){let{discussions:i,cursor:a}=this.$_getDiscussionCache();l.a.writeQuery({query:_,variables:this.discussionQueryVariables,data:{cursor:a,discussions:Array.prototype.map.call(i,i=>{if(i.id==e){let e=Object.assign({},i);return e.total_comments+=1,e}return i})}})},async loadMoreItems(){this.page.cursor.next&&this.$apollo.queries.page.fetchMore({variables:{cursor:this.page.cursor.next,workspace_id:this.workspaceId,sort:this.sort,search_term:this.searchTerm},updateQuery:(e,{fetchMoreResult:i})=>{const a=i,n=e.discussions.concat(a.discussions);return{cursor:a.cursor,discussions:n}}})},deleteDiscussion(e){let{discussions:i,cursor:a}=this.$_getDiscussionCache();l.a.writeQuery({query:_,variables:this.discussionQueryVariables,data:{cursor:a,discussions:Array.prototype.filter.call(i,({id:i})=>i!=e)}})}}},C=(a("Ucf8"),a("KHd+")),x=function(e){e.options.__langStrings={container_workspace:["error:create_discussion","loadmore","total_discussions","vieweditems","discussions_list","no_discussion_result"]}},V=Object(C.a)(S,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspaceDiscussionTab"},[e.canPostDiscussion?[a("PostDiscussionForm",{attrs:{"avatar-image-alt":e.user.profileimagealt||e.user.fullname,"avatar-image-src":e.user.profileimageurl,submitting:e.submitting,"workspace-context-id":e.workspaceContextId,"avatar-image-url":e.$url("/user/profile.php",{id:e.user.id})},on:{submit:e.submit}}),e._v(" "),a("Separator",{attrs:{normal:!0}})]:e._e(),e._v(" "),e.workspaceTotalDiscussions?a("DiscussionFilter",{staticClass:"tui-workspaceDiscussionTab__filter",attrs:{sort:e.sort,"search-term":e.searchTerm,"workspace-id":e.workspaceId},on:{"update-search-term":function(i){e.searchTerm=i},"update-sort":function(i){e.sort=i}}}):e._e(),e._v(" "),e.$apollo.loading||0!==e.page.cursor.total||0===e.searchTerm.length?e._e():a("div",{staticClass:"tui-workspaceDiscussionTab__message"},[e._v("\n    "+e._s(e.$str("no_discussion_result","container_workspace"))+"\n  ")]),e._v(" "),a("VirtualScroll",{attrs:{"data-key":"id","data-list":e.page.discussions,"aria-label":e.$str("discussions_list","container_workspace"),"is-loading":e.$apollo.loading,"page-mode":!0},on:{scrollbottom:e.onScrollToBottom},scopedSlots:e._u([{key:"item",fn:function(i){var n=i.item,t=i.posInSet,r=i.setSize;return[a("DiscussionCard",{staticClass:"tui-workspaceDiscussionTab__card",attrs:{"creator-fullname":n.owner.fullname,"creator-image-alt":n.owner.profileimagealt||n.owner.fullname,"creator-image-src":n.owner.profileimageurl,"creator-id":n.owner.id,"discussion-content":n.content,"time-description":n.time_description,"total-comments":n.total_comments,"total-reactions":n.total_reactions,"discussion-id":n.id,"first-comment-cursor":n.comment_cursor,reacted:n.discussion_interactor.reacted,"update-able":n.discussion_interactor.can_update,"delete-able":n.discussion_interactor.can_delete,"comment-able":n.discussion_interactor.can_comment,"react-able":n.discussion_interactor.can_react,"report-able":n.discussion_interactor.can_report,removed:n.discussion_interactor.removed,edited:n.edited,"aria-posinset":t,"aria-setsize":r,"aria-labelledby":e.$id("item-"+n.id),"label-id":e.$id("item-"+n.id),"workspace-context-id":n.workspace_context_id},on:{"update-discussion-react-status":e.updateDiscussionReactStatus,"update-discussion":e.updateDiscussion,"add-new-comment":e.addNewComment,"delete-discussion":e.deleteDiscussion}})]}},{key:"footer",fn:function(){return[a("PageLoader",{attrs:{fullpage:!1,loading:e.$apollo.loading}})]},proxy:!0}])}),e._v(" "),e.loadMoreVisibility?a("div",{staticClass:"tui-workspaceDiscussionTab__loadMoreContainer"},[a("div",{staticClass:"tui-workspaceDiscussionTab__viewedDiscussions"},[e._v("\n      "+e._s(e.$str("vieweditems","container_workspace",e.page.discussions.length))+"\n      "+e._s(e.$str("total_discussions","container_workspace",e.page.cursor.total))+"\n    ")]),e._v(" "),a("Button",{staticClass:"tui-workspaceDiscussionTab__loadMore",attrs:{text:e.$str("loadmore","container_workspace")},on:{click:e.loadMore}})],1):e._e()],2)}),[],!1,null,null,null);"function"==typeof x&&x(V),V.options.__hasBlocks={script:!0,template:!0};i.default=V.exports},ixxs:function(e,i){e.exports=tui.require("tui/components/icons/Show")},j7fv:function(e,i,a){"use strict";a.r(i);var n=a("nEm4"),t=a.n(n),r=a("i/kK"),s=a.n(r),o=a("oMuj"),d=a.n(o),c=a("BN8m"),l=a.n(c),u=a("vF5l"),m=a.n(u),k=a("rLBA"),p=a.n(k),v=a("oMGV"),_=a.n(v),g=a("2wx7"),f=a.n(g),b=a("kkOl"),N=a.n(b),w=a("URbu"),h=a.n(w),y=a("nBTD"),F=a.n(y),S=a("FoZm"),C=a("G6cq"),x=a.n(C),V=a("VX2K"),A=a.n(V),q=a("hjaT"),D=a.n(q),T=a("e3MU"),$=a.n(T),I={components:{LoadingButton:p.a,InputText:d.a,Form:t.a,FormRow:s.a,ButtonGroup:l.a,Button:m.a,Weka:f.a,SpaceImagePicker:h.a,FieldError:F.a,RadioGroup:x.a,Radio:A.a,Checkbox:D.a,InfoIconButton:$.a,UnsavedChangesWarning:_.a},props:{submitting:Boolean,workspaceName:{type:String,default:""},workspaceDescription:{type:String,default:null},workspaceDescriptionFormat:{type:[String,Number],default:()=>S.FORMAT_JSON_EDITOR},showHiddenCheckBox:{type:Boolean,default:!0},showPrivateBox:{type:Boolean,default:!0},showUnhiddenCheckBox:Boolean,canSetPublic:{type:Boolean,default:!0},canSetPrivate:{type:Boolean,default:!0},workspacePrivate:Boolean,workspaceHidden:Boolean,workspaceId:[String,Number],contextId:[String,Number],submitButtonLabel:{type:String,default(){return this.$str("create","core")}}},data(){return{name:this.workspaceName,description:N.a.empty(),descriptionFormat:this.workspaceDescriptionFormat,draftId:null,innerWorkspacePrivate:this.workspacePrivate||!this.canSetPublic,innerWorkspaceHidden:this.workspaceHidden||!1,error:{upload:null},editorReady:!1}},computed:{disableSubmit(){return 0===this.name.length},unhideWorkspaceValue:{get(){return!this.innerWorkspaceHidden},set(e){this.innerWorkspaceHidden=!e}}},watch:{workspaceName(e){e!==this.name&&(this.name=e)},workspaceDescriptionFormat(e){e!==this.descriptionFormat&&(this.descriptionFormat=e)},workspaceDescription:{handler(e){if(e)try{this.description=N.a.fromDoc(JSON.parse(e))}catch(e){this.description=N.a.empty()}},immediate:!0},innerWorkspacePrivate(e){e||(this.innerWorkspaceHidden=!1)}},methods:{submit(){let e=null;this.description.isEmpty||(e=JSON.stringify(this.description.getDoc()));const i={name:this.name,description:e,draftId:this.draftId,descriptionFormat:this.workspaceDescriptionFormat,isPrivate:!!this.innerWorkspacePrivate,isHidden:!!this.innerWorkspaceHidden};this.$emit("submit",i)}}},M=(a("JeKY"),a("KHd+")),W=function(e){e.options.__langStrings={container_workspace:["space_name_label","description_label","workspace_type","public","private","hidden_workspace","hidden_workspace_text","unhidden_workspace_label","unhidden_workspace_help","unhide_workspace","workspace_type_help","hashtag_tip","hashtag_tip_help"],totara_engage:["hashtags"],core:["create","cancel","submit"]}},B=Object(M.a)(I,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-workspaceForm",attrs:{vertical:!0,"input-width":"full"}},[a("div",{staticClass:"tui-workspaceForm__container"},[a("div",{staticClass:"tui-workspaceForm__inputs"},[a("FormRow",{staticClass:"tui-workspaceForm__formRow",attrs:{label:e.$str("space_name_label","container_workspace")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("InputText",{attrs:{id:n,maxlength:75,disabled:e.submitting},model:{value:e.name,callback:function(i){e.name=i},expression:"name"}})]}}])}),e._v(" "),a("FormRow",{staticClass:"tui-workspaceForm__formRow",attrs:{label:e.$str("description_label","container_workspace")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("div",{staticClass:"tui-workspaceForm__editor"},[e.description.isEmpty||e.submitting?e._e():a("UnsavedChangesWarning",{attrs:{value:e.description}}),e._v(" "),a("Weka",{attrs:{id:n,"context-id":e.contextId,compact:!0,"usage-identifier":{component:"container_workspace",area:"description",instanceId:e.workspaceId},variant:"container_workspace-description"},on:{ready:function(i){e.editorReady=!0}},model:{value:e.description,callback:function(i){e.description=i},expression:"description"}}),e._v(" "),a("div",{staticClass:"tui-workspaceForm__editor-tip"},[a("span",{staticClass:"tui-workspaceForm__editor-tip-text"},[e._v("\n                "+e._s(e.$str("hashtag_tip","container_workspace"))+"\n              ")]),e._v(" "),a("InfoIconButton",{attrs:{"is-help-for":e.$str("hashtags","totara_engage")}},[e._v("\n                "+e._s(e.$str("hashtag_tip_help","container_workspace"))+"\n              ")])],1)],1)]}}])}),e._v(" "),e.showPrivateBox?a("FormRow",{staticClass:"tui-workspaceForm__formRow",attrs:{label:e.$str("workspace_type","container_workspace"),helpmsg:e.$str("workspace_type_help","container_workspace")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("RadioGroup",{attrs:{id:n,name:"workspace-access",horizontal:!0,required:!0},model:{value:e.innerWorkspacePrivate,callback:function(i){e.innerWorkspacePrivate=i},expression:"innerWorkspacePrivate"}},[e.canSetPublic?a("Radio",{attrs:{value:!1}},[e._v("\n            "+e._s(e.$str("public","container_workspace"))+"\n          ")]):e._e(),e._v(" "),e.canSetPrivate?a("Radio",{attrs:{value:!0}},[e._v("\n            "+e._s(e.$str("private","container_workspace"))+"\n          ")]):e._e()],1)]}}],null,!1,2046630370)}):e._e(),e._v(" "),e.showHiddenCheckBox&&e.innerWorkspacePrivate?a("FormRow",{attrs:{label:e.$str("hidden_workspace_text","container_workspace"),hidden:!0},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("Checkbox",{attrs:{id:n,name:"workspace-hidden",disabled:!e.innerWorkspacePrivate,"aria-disabled":!e.innerWorkspacePrivate},model:{value:e.innerWorkspaceHidden,callback:function(i){e.innerWorkspaceHidden=i},expression:"innerWorkspaceHidden"}},[e._v("\n          "+e._s(e.$str("hidden_workspace_text","container_workspace"))+"\n        ")])]}}],null,!1,3655472191)}):e._e(),e._v(" "),e.showUnhiddenCheckBox?a("FormRow",{staticClass:"tui-workspaceForm__unhiddenRow",attrs:{label:e.$str("unhidden_workspace_label","container_workspace")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("div",{staticClass:"tui-workspaceForm__unhiddenRow-box"},[a("Checkbox",{attrs:{id:n,name:"workspace-unhidden"},model:{value:e.unhideWorkspaceValue,callback:function(i){e.unhideWorkspaceValue=i},expression:"unhideWorkspaceValue"}},[e._v("\n              "+e._s(e.$str("unhide_workspace","container_workspace"))+"\n            ")]),e._v(" "),a("p",{staticClass:"tui-workspaceForm__unhiddenRow-helpText"},[e._v("\n              "+e._s(e.$str("unhidden_workspace_help","container_workspace"))+"\n            ")])],1)]}}],null,!1,3036567843)}):e._e()],1),e._v(" "),a("FormRow",{staticClass:"tui-workspaceForm__imagePicker",scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("SpaceImagePicker",{attrs:{id:n,"draft-id":e.draftId,"workspace-id":e.workspaceId},on:{ready:function(i){e.draftId=i.itemId},"upload-error":function(i){e.error.upload=i},"clear-error":function(i){e.error.upload=null}}}),e._v(" "),a("FieldError",{attrs:{error:e.error.upload}})]}}])})],1),e._v(" "),a("ButtonGroup",{staticClass:"tui-workspaceForm__buttonGroup"},[a("LoadingButton",{attrs:{loading:e.submitting||!e.editorReady,disabled:e.submitting||e.disableSubmit,text:e.submitButtonLabel,"aria-label":e.$str("submit","core"),primary:!0,type:"submit"},on:{click:function(i){return i.preventDefault(),e.submit(i)}}}),e._v(" "),a("Button",{attrs:{text:e.$str("cancel","core"),disabled:e.submitting},on:{click:function(i){return i.preventDefault(),e.$emit("cancel")}}})],1)],1)}),[],!1,null,null,null);"function"==typeof W&&W(B),B.options.__hasBlocks={script:!0,template:!0};i.default=B.exports},jJ8l:function(e,i){e.exports=tui.require("tui/components/card/Card")},jqKa:function(e,i,a){"use strict";a.r(i);var n=a("vF5l"),t=a.n(n),r=a("nXMa"),s=a.n(r),o=a("BN8m"),d=a.n(o),c=a("tkAW"),l=a.n(c),u=a("u5iS"),m=a.n(u),k={components:{Button:t.a,ButtonCancel:s.a,ButtonGroup:d.a,Modal:l.a,ModalContent:m.a},props:{usersFromAudiencesToAdd:{type:[Number],required:!0},loading:Boolean},computed:{id(){return this.$id(this.title)}}},p=(a("LgEC"),a("KHd+")),v=function(e){e.options.__langStrings={container_workspace:["bulk_add_audiences_modal_confirm_button","bulk_add_audiences_modal_content_1","bulk_add_audiences_modal_content_2","bulk_add_audiences_modal_content_3","bulk_add_audiences_modal_content_no_members","bulk_add_audiences_modal_reselect_button","bulk_add_audiences_modal_title","bulk_add_audiences_modal_title_no_members"]}},_=Object(p.a)(k,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{attrs:{size:"normal","aria-labelledby":e.id}},[a("ModalContent",{attrs:{"close-button":!0,title:e.$str(e.usersFromAudiencesToAdd>0?"bulk_add_audiences_modal_title":"bulk_add_audiences_modal_title_no_members","container_workspace",e.usersFromAudiencesToAdd),"title-id":e.id},on:{dismiss:function(i){return e.$emit("cancel")}},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("ButtonGroup",[a("Button",{attrs:{styleclass:{primary:"true"},disabled:e.loading,text:e.$str(e.usersFromAudiencesToAdd>0?"bulk_add_audiences_modal_confirm_button":"bulk_add_audiences_modal_reselect_button","container_workspace")},on:{click:function(i){return e.$emit("confirm")}}}),e._v(" "),e.usersFromAudiencesToAdd>0?a("ButtonCancel",{attrs:{disabled:e.loading},on:{click:function(i){return e.$emit("cancel")}}}):e._e()],1)]},proxy:!0}])},[a("div",{staticClass:"tui-workspaceAddAudienceModal"},[e.usersFromAudiencesToAdd>0?[a("p",[e._v("\n          "+e._s(e.$str("bulk_add_audiences_modal_content_1","container_workspace"))+"\n        ")]),e._v(" "),a("ul",{staticClass:"tui-workspaceAddAudienceModal__list"},[a("li",[e._v("\n            "+e._s(e.$str("bulk_add_audiences_modal_content_2","container_workspace"))+"\n          ")]),e._v(" "),a("li",[e._v("\n            "+e._s(e.$str("bulk_add_audiences_modal_content_3","container_workspace"))+"\n          ")])])]:[e._v("\n        "+e._s(e.$str("bulk_add_audiences_modal_content_no_members","container_workspace"))+"\n      ")]],2)])],1)}),[],!1,null,null,null);"function"==typeof v&&v(_),_.options.__hasBlocks={script:!0,template:!0};i.default=_.exports},"kUb+":function(e,i){e.exports=tui.require("tui/components/card/ActionCard")},kkOl:function(e,i){e.exports=tui.require("editor_weka/WekaValue")},"l/bD":function(e,i,a){},lLj0:function(e,i){e.exports=tui.require("tui/components/icons/Warning")},lOoG:function(e,i,a){"use strict";var n=a("Mea9");a.n(n).a},lU7F:function(e,i,a){"use strict";var n=a("ZTsp");a.n(n).a},lYm9:function(e,i,a){},lbpC:function(e,i,a){"use strict";var n=a("OvaV");a.n(n).a},mU1F:function(e,i,a){"use strict";a.r(i);var n=a("5h9J"),t=a.n(n),r=a("PNFE"),s=a.n(r),o=a("Mnur"),d=a.n(o),c=a("cNVA"),l=a.n(c),u={components:{ButtonIcon:t.a,AddIcon:s.a,ModalPresenter:d.a,WorkspaceModal:l.a},props:{disabled:Boolean,buttonAriaLabel:{type:String,default(){return this.$str("create_space","container_workspace")}}},data:()=>({submitting:!1,openModal:!1}),methods:{createWorkspace(e){this.openModal=!1,this.$emit("create-workspace",e)}}},m=a("KHd+"),k=function(e){e.options.__langStrings={container_workspace:["create_space"]}},p=Object(m.a)(u,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-contributeWorkspace"},[a("ModalPresenter",{attrs:{open:e.openModal},on:{"request-close":function(i){e.openModal=!1}}},[a("WorkspaceModal",{on:{"create-workspace":e.createWorkspace}})],1),e._v(" "),a("ButtonIcon",{staticClass:"tui-contributeWorkspace__button",attrs:{"aria-label":e.buttonAriaLabel,styleclass:{circle:!0,xsmall:!0},disabled:e.disabled},on:{click:function(i){i.preventDefault(),e.openModal=!0}}},[a("AddIcon")],1)],1)}),[],!1,null,null,null);"function"==typeof k&&k(p),p.options.__hasBlocks={script:!0,template:!0};i.default=p.exports},mURQ:function(e,i){e.exports=tui.require("tui/components/datatable/SelectTable")},mtzv:function(e,i){e.exports=tui.require("container_workspace/components/action/WorkspaceMuteButton")},nBTD:function(e,i){e.exports=tui.require("tui/components/form/FieldError")},nEm4:function(e,i){e.exports=tui.require("tui/components/form/Form")},nXMa:function(e,i){e.exports=tui.require("tui/components/buttons/Cancel")},ndIo:function(e,i,a){"use strict";var n=a("12gk");a.n(n).a},nvr5:function(e,i,a){"use strict";a.r(i);var n=a("M3bB"),t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_get_discussion_draft_content"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"discussion"},name:{kind:"Name",value:"container_workspace_discussion"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"draft_content"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"RAW"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"draft_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content_format"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_context_id"},arguments:[],directives:[]}]}}]}}]},r={components:{WorkspaceDiscussionForm:a.n(n).a},props:{discussionId:{type:[String,Number],required:!0},submitting:Boolean},apollo:{discussion:{query:t,fetchPolicy:"no-cache",variables(){return{id:this.discussionId}}}},data:()=>({discussion:null}),methods:{submitUpdate({content:e,itemId:i}){this.$emit("submit",{content:e,contentFormat:this.discussion.content_format,itemId:i})}}},s=a("KHd+"),o=function(e){e.options.__langStrings={container_workspace:["done"]}},d=Object(s.a)(r,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return e.discussion?a("WorkspaceDiscussionForm",{staticClass:"tui-workspaceEditPostDiscussionForm",attrs:{content:e.discussion.draft_content,"content-format":e.discussion.content_format,"draft-id":e.discussion.draft_id,"submit-button-text":e.$str("done","container_workspace"),submitting:e.submitting,"discussion-id":e.discussionId,"workspace-context-id":e.discussion.workspace_context_id},on:{submit:e.submitUpdate,cancel:function(i){return e.$emit("cancel")}}}):e._e()}),[],!1,null,null,null);"function"==typeof o&&o(d),d.options.__hasBlocks={script:!0,template:!0};i.default=d.exports},o01z:function(e,i){e.exports=tui.require("tui/components/sidepanel/SidePanelNav")},oFhe:function(e,i){e.exports=tui.require("container_workspace/mixins/virtual_scroll_mixin")},oMGV:function(e,i){e.exports=tui.require("totara_engage/components/form/UnsavedChangesWarning")},oMuj:function(e,i){e.exports=tui.require("tui/components/form/InputText")},"p+Y9":function(e,i,a){},p4CY:function(e,i,a){},pZp9:function(e,i){e.exports=tui.require("container_workspace/components/card/WorkspaceMemberCard")},phWl:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_mute_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_switch_notification"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"OFF"}}],directives:[]}]}}]}},pxdy:function(e,i){e.exports=tui.require("totara_engage/mixins/contribution_mixin")},q80e:function(e,i,a){"use strict";var n=a("zDna");a.n(n).a},"qF9/":function(e,i){e.exports=tui.require("container_workspace/access")},qeuR:function(e,i,a){},qt7v:function(e,i,a){"use strict";a.r(i);var n=a("NAOU"),t=a.n(n),r=a("D9If"),s={components:{GridItem:a.n(r).a,Grid:t.a},props:{maxUnits:{type:[Number,String],required:!0},stackAt:{type:Number,default:764},gridDirection:String},computed:{leftUnits(){return Math.floor(60*this.maxUnits/100)},rightUnits(){return this.maxUnits-this.leftUnits}}},o=a("KHd+"),d=Object(o.a)(s,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Grid",{staticClass:"tui-workspaceContentLayout",attrs:{direction:e.gridDirection,"max-units":e.maxUnits,"stack-at":e.stackAt}},[a("GridItem",{attrs:{units:e.leftUnits}},[e._t("content")],2),e._v(" "),a("GridItem",{attrs:{units:e.rightUnits}},[e._t("side")],2)],1)}),[],!1,null,null,null);d.options.__hasBlocks={script:!0,template:!0};i.default=d.exports},"r+lC":function(e,i,a){"use strict";a.r(i);var n=a("nEm4"),t=a.n(n),r=a("i/kK"),s=a.n(r),o=a("csKv"),d=a.n(o),c=a("Aros"),l=a.n(c),u=a("BN8m"),m=a.n(u),k=a("vF5l"),p=a.n(k),v=a("rLBA"),_=a.n(v),g=a("+MEP"),f=a.n(g),b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_search_users"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pattern"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_text"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"users"},name:{kind:"Name",value:"container_workspace_search_users"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"pattern"},value:{kind:"Variable",name:{kind:"Name",value:"pattern"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]}]}}]}}]}}]}}]},N={components:{Form:t.a,FormRow:s.a,FormRowStack:d.a,TagList:l.a,ButtonGroup:m.a,Button:p.a,LoadingButton:_.a,MiniProfileCard:f.a},props:{workspaceId:{type:[String,Number],required:!0},displayCurrentOwner:Boolean,currentOwnerFullname:String,submitting:Boolean},apollo:{availableUsers:{query:b,fetchPolicy:"network-only",variables(){return{pattern:this.searchPattern,workspace_id:this.workspaceId}},update:({users:e})=>e}},data:()=>({selectedUser:null,searchPattern:"",availableUsers:[]}),computed:{users(){return this.selectedUser?this.availableUsers.filter(({id:e})=>e!=this.selectedUser.id):this.availableUsers},selectedUsers(){return this.selectedUser?[{id:this.selectedUser.id,text:this.selectedUser.fullname}]:[]}},methods:{filterUsers(e){this.searchPattern=e},selectUser(e){this.selectedUser=e,this.searchPattern=""},removeUser(){this.selectedUser=null},submitForm(){this.selectedUser&&this.$emit("submit",{userId:this.selectedUser.id})}}},w=(a("885J"),a("KHd+")),h=function(e){e.options.__langStrings={container_workspace:["current_owner","select_new_owner","transfer_ownership_help_text_one","transfer_ownership_help_text_two"],core:["cancel","confirm"]}},y=Object(w.a)(N,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-workspaceTransferOwnerForm",attrs:{vertical:!0,"input-width":"full"}},[a("FormRowStack",{staticClass:"tui-workspaceTransferOwnerForm__content"},[e.displayCurrentOwner?a("FormRow",{attrs:{label:e.$str("current_owner","container_workspace"),"aria-disabled":!0},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("TagList",{attrs:{id:n,disabled:!0,tags:[{text:e.currentOwnerFullname}]}})]}}],null,!1,2828370500)}):e._e(),e._v(" "),a("FormRow",{attrs:{label:e.$str("select_new_owner","container_workspace")},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[a("TagList",{attrs:{id:n,tags:e.selectedUsers,items:e.users,filter:e.searchPattern},on:{filter:e.filterUsers,select:e.selectUser,remove:e.removeUser},scopedSlots:e._u([e.$apollo.loading?null:{key:"item",fn:function(e){var i=e.item.card_display;return[a("MiniProfileCard",{attrs:{"no-padding":!0,"no-border":!0,display:i,"read-only":!0}})]}}],null,!0)})]}}])}),e._v(" "),a("p",{staticClass:"tui-workspaceTransferOwnerForm__helpText"},[e.displayCurrentOwner?[e._v("\n        "+e._s(e.$str("transfer_ownership_help_text_two","container_workspace"))+"\n      ")]:[e._v("\n        "+e._s(e.$str("transfer_ownership_help_text_one","container_workspace"))+"\n      ")]],2)],1),e._v(" "),a("ButtonGroup",{staticClass:"tui-workspaceTransferOwnerForm__buttonGroup"},[a("LoadingButton",{attrs:{text:e.$str("confirm","core"),primary:!0,small:!0,loading:e.submitting,disabled:!e.selectedUser},on:{click:e.submitForm}}),e._v(" "),a("Button",{attrs:{text:e.$str("cancel","core"),styleclass:{small:!0}},on:{click:function(i){return e.$emit("cancel",i)}}})],1)],1)}),[],!1,null,null,null);"function"==typeof h&&h(y),y.options.__hasBlocks={script:!0,template:!0};i.default=y.exports},rLBA:function(e,i){e.exports=tui.require("totara_engage/components/buttons/LoadingButton")},rhow:function(e,i){e.exports=tui.require("tui/components/icons/files/compute/FileIcon")},rifF:function(e,i,a){"use strict";var n=a("Rerc");a.n(n).a},s5vj:function(e,i){e.exports=tui.require("totara_engage/components/contribution/BaseContent")},sK2A:function(e,i,a){"use strict";a.r(i);var n=a("tkAW"),t=a.n(n),r=a("u5iS"),s=a.n(r),o=a("lLj0"),d=a.n(o),c=a("BN8m"),l=a.n(c),u=a("vF5l"),m=a.n(u),k={components:{Modal:t.a,ModalContent:s.a,Warning:d.a,ButtonGroup:l.a,Button:m.a},props:{closeButton:{type:Boolean,default:!0},size:{type:String,default:"normal"},title:{type:String,required:!0},messageContent:{type:String,required:!0},confirmButtonText:{type:String,default(){return this.$str("remove","core")}},cancelButtonText:{type:String,default(){return this.$str("cancel","core")}}},data:()=>({dismissable:{overlayClose:!1,esc:!0,backdropClick:!1}})},p=(a("h4xG"),a("KHd+")),v=function(e){e.options.__langStrings={core:["cancel","remove"]}},_=Object(p.a)(k,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Modal",{staticClass:"tui-workspaceWarningModal",attrs:{dismissable:e.dismissable}},[a("ModalContent",{attrs:{"close-button":e.closeButton,title:e.title,"title-visible":!1},on:{dismiss:function(i){return e.$emit("request-close")}},scopedSlots:e._u([{key:"buttons",fn:function(){return[a("ButtonGroup",[a("Button",{attrs:{styleclass:{primary:!0,small:!0},text:e.confirmButtonText},on:{click:function(i){return e.$emit("confirm")}}}),e._v(" "),a("Button",{attrs:{styleclass:{small:!0},text:e.cancelButtonText},on:{click:function(i){return i.preventDefault(),e.$emit("request-close")}}})],1)]},proxy:!0}])},[a("div",{staticClass:"tui-workspaceWarningModal__container"},[a("Warning",{attrs:{size:"700","custom-class":"tui-icon--warning"}}),e._v(" "),a("div",{staticClass:"tui-workspaceWarningModal__box"},[a("h4",{staticClass:"tui-workspaceWarningModal__title"},[e._v("\n          "+e._s(e.title)+"\n        ")]),e._v(" "),a("p",{staticClass:"tui-workspaceWarningModal__content",domProps:{innerHTML:e._s(e.messageContent)}})])],1)])],1)}),[],!1,null,null,null);"function"==typeof v&&v(_),_.options.__hasBlocks={script:!0,template:!0};i.default=_.exports},sdyJ:function(e,i,a){},sith:function(e,i,a){"use strict";a.r(i);var n=a("NAOU"),t=a.n(n),r=a("D9If"),s=a.n(r),o=a("CWIl"),d=a("fUGz"),c=a.n(d),l=a("R5BP"),u=a.n(l),m=a("JXQf"),k=a.n(m),p=a("vF5l"),v=a.n(p),_={components:{OriginalSpaceCard:c.a,Grid:t.a,GridItem:s.a,VirtualScroll:u.a,PageLoader:k.a,Button:v.a},props:{maxGridUnits:{type:[Number,String],required:!0},workspaces:{type:Array,required:!0},workspaceUnits:{type:[Number,String],default:2},isLoading:Boolean,cursor:{type:Object,default:()=>({total:0,next:""})}},data:()=>({isLoadMoreVisible:!1}),computed:{loadMoreVisibility(){return this.isLoadMoreVisible&&this.cursor.next&&!this.isLoading},rows(){return Object(o.calculateRow)(this.workspaces,this.workspacesPerRow)},workspacesPerRow(){return Math.floor(this.maxGridUnits/this.workspaceUnits)}},methods:{async onScrollToBottom(){this.isLoadMoreVisible||(await this.$emit("loadmoreitems"),this.isLoadMoreVisible=!0)},async loadMore(){await this.$emit("loadmoreitems"),this.isLoadMoreVisible=!1}}},g=(a("w/WN"),a("KHd+")),f=function(e){e.options.__langStrings={container_workspace:["loadmore","space_empty_result","total_space_x","vieweditems","workspace_cards_grid"]}},b=Object(g.a)(_,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-spaceCardsGrid"},[a("VirtualScroll",{attrs:{"data-key":"index","data-list":e.rows,"page-mode":!0,"aria-label":e.$str("workspace_cards_grid","container_workspace"),"is-loading":e.isLoading},on:{scrollbottom:e.onScrollToBottom},scopedSlots:e._u([{key:"item",fn:function(i){var n=i.item;return[a("Grid",{staticClass:"tui-spaceCardsGrid__row",attrs:{"max-units":e.maxGridUnits}},e._l(n.items,(function(i,n){var t=i.id,r=i.url,s=i.image,o=i.name,d=i.interactor;return a("GridItem",{key:n,staticClass:"tui-spaceCardsGrid__row__card",attrs:{units:e.workspaceUnits}},[a("OriginalSpaceCard",{attrs:{"workspace-id":t,url:r,image:s,title:o,joined:d.joined,"join-able":d.can_join,"has-requested-to-join":d.has_requested_to_join,"request-to-join-able":d.can_request_to_join,owned:d.own},on:{"request-to-join-workspace":function(i){return e.$emit("request-to-join-workspace",i)},"join-workspace":function(i){return e.$emit("join-workspace",i)},"leave-workspace":function(i){return e.$emit("leave-workspace",i)}}})],1)})),1)]}},{key:"footer",fn:function(){return[a("PageLoader",{attrs:{fullpage:!1,loading:e.isLoading}})]},proxy:!0}])}),e._v(" "),e.isLoading||0!==e.cursor.total?e._e():a("div",{staticClass:"tui-spaceCardsGrid__emptyResult"},[e._v("\n    "+e._s(e.$str("space_empty_result","container_workspace"))+"\n  ")]),e._v(" "),e.loadMoreVisibility?a("div",{staticClass:"tui-spaceCardsGrid__loadMoreContainer"},[a("div",{staticClass:"tui-spaceCardsGrid__viewedSpaces"},[[e._v("\n        "+e._s(e.$str("vieweditems","container_workspace",e.workspaces.length))+"\n        "+e._s(e.$str("total_space_x","container_workspace",e.cursor.total))+"\n      ")]],2),e._v(" "),a("Button",{staticClass:"tui-spaceCardsGrid__loadMore",attrs:{text:e.$str("loadmore","container_workspace")},on:{click:e.loadMore}})],1):e._e()],1)}),[],!1,null,null,null);"function"==typeof f&&f(b),b.options.__hasBlocks={script:!0,template:!0};i.default=b.exports},sxi1:function(e,i){e.exports=tui.require("tui/components/icons/More")},t3Nu:function(e,i,a){"use strict";var n=a("L2v5");a.n(n).a},t5mg:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_notifications"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"notifications"},name:{kind:"Name",value:"container_workspace_notifications"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}},tBMW:function(e,i){e.exports=tui.require("container_workspace/components/content/tabs/WorkspaceLibraryTab")},tSSp:function(e,i,a){"use strict";var n=a("FpDq");a.n(n).a},tc62:function(e,i,a){"use strict";var n=a("GJTK");a.n(n).a},tkAW:function(e,i){e.exports=tui.require("tui/components/modal/Modal")},txsu:function(e,i){e.exports=tui.require("tui/components/tabs/Tabs")},tyu8:function(e,i){e.exports=tui.require("totara_engage/index")},"u+AG":function(e,i,a){"use strict";a.r(i);var n=a("i/kK"),t=a.n(n),r=a("nEm4"),s=a.n(r),o=a("BN8m"),d=a.n(o),c=a("nXMa"),l=a.n(c),u=a("rLBA"),m=a.n(u),k=a("oMGV"),p=a.n(k),v=a("2wx7"),_=a.n(v),g=a("kkOl"),f=a.n(g),b=a("FoZm"),N=a("TXEh"),w={components:{FormRow:t.a,Form:s.a,ButtonGroup:d.a,CancelButton:l.a,LoadingButton:m.a,UnsavedChangesWarning:p.a,WekaEditor:_.a},props:{submitting:Boolean,discussionId:{type:[String,Number],default:null},workspaceContextId:[Number,String],content:{type:String,default:null},contentFormat:{type:[String,Number],default:()=>b.FORMAT_JSON_EDITOR},draftId:{type:[String,Number],default:null},showCancelButton:{type:Boolean,default:!0},submitButtonText:{type:String,default(){return this.$str("post","core")}}},data:()=>({editorKey:"editor-weka-"+Object(N.uniqueId)(),formContent:f.a.empty()}),computed:{disableSubmit(){return this.formContent.isEmpty||this.submitting}},watch:{content:{immediate:!0,handler(e){if(b.FORMAT_JSON_EDITOR==this.contentFormat){if(!e)return void(this.formContent=f.a.empty());this.formContent=f.a.fromDoc(JSON.parse(this.content))}}}},methods:{submit(){this.$emit("submit",{content:JSON.stringify(this.formContent.getDoc()),itemId:this.draftId}),this.formContent=f.a.empty(),this.editorKey="editor-weka-"+Object(N.uniqueId)(),this.$forceUpdate()}}},h=(a("t3Nu"),a("KHd+")),y=function(e){e.options.__langStrings={container_workspace:["discussion","start_discussion"],core:["post"]}},F=Object(h.a)(w,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("Form",{staticClass:"tui-workspaceDiscussionForm",attrs:{vertical:!0,"input-width":"full"}},[a("FormRow",{attrs:{hidden:!0,label:e.$str("discussion","container_workspace"),required:!0},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.id;return[e.formContent.isEmpty||e.submitting?e._e():a("UnsavedChangesWarning",{attrs:{value:e.formContent}}),e._v(" "),a("WekaEditor",{key:e.editorKey,staticClass:"tui-workspaceDiscussionForm__editor",attrs:{id:n,variant:"container_workspace-discussion","usage-identifier":{component:"container_workspace",area:"discussion",instanceId:e.discussionId},"file-item-id":e.draftId,"context-id":e.workspaceContextId,placeholder:e.$str("start_discussion","container_workspace")},model:{value:e.formContent,callback:function(i){e.formContent=i},expression:"formContent"}})]}}])}),e._v(" "),a("ButtonGroup",{staticClass:"tui-workspaceDiscussionForm__buttonGroup"},[a("LoadingButton",{attrs:{loading:e.submitting,disabled:e.disableSubmit,"aria-disabled":e.disableSubmit,"aria-label":e.submitButtonText,text:e.submitButtonText,primary:!0},on:{click:function(i){return i.preventDefault(),e.submit(i)}}}),e._v(" "),e.showCancelButton?a("CancelButton",{attrs:{disabled:e.submitting},on:{click:function(i){return i.preventDefault(),e.$emit("cancel")}}}):e._e()],1)],1)}),[],!1,null,null,null);"function"==typeof y&&y(F),F.options.__hasBlocks={script:!0,template:!0};i.default=F.exports},u5iS:function(e,i){e.exports=tui.require("tui/components/modal/ModalContent")},uP2a:function(e,i,a){},ub7b:function(e,i,a){},vB2H:function(e,i,a){"use strict";var n=a("9yv5");a.n(n).a},vF5l:function(e,i){e.exports=tui.require("tui/components/buttons/Button")},va7r:function(e,i,a){},vyVp:function(e,i){e.exports=tui.require("tui/notifications")},"w/WN":function(e,i,a){"use strict";var n=a("y/JQ");a.n(n).a},w2wx:function(e,i){e.exports=tui.require("container_workspace/components/profile/PostAvatar")},w9dR:function(e,i,a){"use strict";a.r(i);var n=a("NEm0"),t=a.n(n),r=a("vF5l"),s=a.n(r),o=a("fPwS"),d=a.n(o),c=a("JXQf"),l=a.n(c),u=a("12HA"),m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"container_workspace_upload_metadata"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"draft_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"theme"}},type:{kind:"NamedType",name:{kind:"Name",value:"param_component"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"file_area"},name:{kind:"Name",value:"container_workspace_file_area"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"draft_id"},value:{kind:"Variable",name:{kind:"Name",value:"draft_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accept_types"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context_id"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"image_url"},name:{kind:"Name",value:"container_workspace_workspace_image"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"theme"},value:{kind:"Variable",name:{kind:"Name",value:"theme"}}}],directives:[]}]}}]};const k=Object.prototype.hasOwnProperty;var p={components:{Upload:t.a,Button:s.a,Loading:d.a,PageLoader:l.a},props:{draftId:[String,Number],workspaceId:[Number,String]},apollo:{metadata:{query:m,fetchPolicy:"network-only",skip(){return!(!k.call(this.metadata,"itemId")||!k.call(this.metadata,"workspaceId"))&&(this.metadata.itemId==this.draftId||this.metadata.workspaceId==this.workspaceId)},variables(){return{workspace_id:this.workspaceId,draft_id:this.draftId,theme:u.config.theme.name}},update({file_area:{item_id:e,repository_id:i,url:a,accept_types:n,context_id:t},image_url:r}){let s={itemId:e,repositoryId:i,acceptTypes:n,url:a,image:r,contextId:t,workspaceId:this.workspaceId};return this.$emit("ready",s),s}}},data:()=>({metadata:{},uploadedImage:null,isUploadImageLoaded:!1}),computed:{backgroundStyle(){return this.$apollo.loading?{"background-image":null}:this.uploadedImage?{"background-image":`url("${this.uploadedImage}")`}:{"background-image":`url("${this.metadata.image}")`}}},methods:{handleFileLoaded({file:{url:e}}){this.uploadedImage=e,this.isUploadImageLoaded=!1,this.$emit("clear-error")},handleError(){this.uploadedImage=null,this.isUploadImageLoaded=!1,this.$emit("upload-error",this.$str("error:upload_image","container_workspace"))},progressing(){this.isUploadImageLoaded=!0}}},v=(a("42bS"),a("KHd+")),_=function(e){e.options.__langStrings={container_workspace:["edit_image","error:upload_image"]}},g=Object(v.a)(p,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-spaceImagePicker",class:{"tui-spaceImagePicker--loading":e.$apollo.loading}},[e.$apollo.loading?a("Loading"):a("Upload",{attrs:{"repository-id":e.metadata.repositoryId,"item-id":e.metadata.itemId,href:e.metadata.url,"accepted-types":e.metadata.acceptTypes,overwrite:!0,"one-file":!0,"context-id":e.metadata.contextId},on:{load:e.handleFileLoaded,error:e.handleError,progress:e.progressing},scopedSlots:e._u([{key:"default",fn:function(i){var n=i.selectEvents,t=i.inputEvents;return a("div",{staticClass:"tui-spaceImagePicker__image",class:{"tui-spaceImagePicker__image--progressing":e.isUploadImageLoaded},style:e.backgroundStyle},[a("input",e._g({directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"inputFile",attrs:{type:"file"}},t)),e._v(" "),a("div",{staticClass:"tui-spaceImagePicker__loader"},[a("PageLoader",{attrs:{loading:e.isUploadImageLoaded}})],1),e._v(" "),a("Button",e._g({directives:[{name:"show",rawName:"v-show",value:!e.isUploadImageLoaded,expression:"!isUploadImageLoaded"}],staticClass:"tui-spaceImagePicker__editButton",attrs:{"aria-label":e.$str("edit_image","container_workspace"),text:e.$str("edit_image","container_workspace"),styleclass:{small:!0}}},n))],1)}}])})],1)}),[],!1,null,null,null);"function"==typeof _&&_(g),g.options.__hasBlocks={script:!0,template:!0};i.default=g.exports},wL6w:function(e,i,a){},"x/uc":function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_unmute_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"result"},name:{kind:"Name",value:"container_workspace_switch_notification"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"EnumValue",value:"ON"}}],directives:[]}]}}]}},x4nq:function(e,i,a){"use strict";i.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"container_workspace_join_workspace"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"param_integer"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"member"},name:{kind:"Name",value:"container_workspace_join"},arguments:[{kind:"Argument",name:{kind:"Name",value:"workspace_id"},value:{kind:"Variable",name:{kind:"Name",value:"workspace_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspace_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"workspace_interactor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_delete"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_update"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_invite"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"joined"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"workspaces_admin"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"own"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_request_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"has_requested_to_join"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_create_discussions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_library"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_members"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_view_member_requests"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_share_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_unshare_resources"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"muted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimagealt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileimageurl"},arguments:[],directives:[]}]}}]}}]}}]}}]}},xO7t:function(e,i){e.exports=tui.require("container_workspace/components/modal/WorkspaceFileViewModal")},"y/JQ":function(e,i,a){},y2AD:function(e,i,a){"use strict";var n=a("0XAu");a.n(n).a},y8co:function(e,i,a){"use strict";a.r(i);var n=a("Hl3G"),t=a.n(n),r=a("5h9J"),s=a.n(r),o=a("ixxs"),d=a.n(o),c=a("qF9/"),l=a("mtzv"),u=a.n(l),m=a("phWl"),k=a("x/uc"),p={components:{WorkspaceMenu:t.a,ButtonIcon:s.a,ShowIcon:d.a,WorkspaceMuteButton:u.a},props:{workspaceImage:{type:String,required:!0},workspaceId:{type:[Number,String],required:!0},workspaceAccess:{type:String,required:!0,validator:e=>[c.PUBLIC,c.HIDDEN,c.PRIVATE].includes(e)},workspaceName:{type:String,required:!0},showMuteButton:Boolean,workspaceMuted:Boolean,showNavigation:Boolean},data:()=>({showMenu:!1,submitting:!1}),computed:{buttonMenuAriaLabel(){return this.showMenu?this.$str("collapse_nav","container_workspace"):this.$str("expand_nav","container_workspace")},subTitle(){return this.workspaceAccess===c.PUBLIC?this.$str("public_workspace","container_workspace"):this.workspaceAccess===c.PRIVATE?this.$str("private_workspace","container_workspace"):this.$str("hidden_workspace","container_workspace")}},methods:{async updateMuteStatus(e){if(this.submitting)return;this.submitting=!0;const i={workspace_id:this.workspaceId};try{let a=e?m.a:k.a;await this.$apollo.mutate({mutation:a,variables:i,refetchQueries:["container_workspace_workspace_interactor"]}),this.$emit("update-mute-status",e)}finally{this.submitting=!1}}}},v=(a("rifF"),a("KHd+")),_=function(e){e.options.__langStrings={container_workspace:["workspace_image_alt","collapse_nav","expand_nav","workspace_image_alt","public_workspace","private_workspace","hidden_workspace"]}},g=Object(v.a)(p,(function(){var e=this,i=e.$createElement,a=e._self._c||i;return a("div",{staticClass:"tui-workspacePageHeader"},[a("div",{staticClass:"tui-workspacePageHeader__img",style:{"background-image":"url('"+e.workspaceImage+"')"},attrs:{title:e.$str("workspace_image_alt","container_workspace"),role:"img","aria-label":e.$str("workspace_image_alt","container_workspace")}}),e._v(" "),a("div",{staticClass:"tui-workspacePageHeader__content"},[a("div",{staticClass:"tui-workspacePageHeader__head"},[a("div",{staticClass:"tui-workspacePageHeader__title"},[a("h2",{staticClass:"tui-workspacePageHeader__title-text"},[e._v("\n          "+e._s(e.workspaceName)+"\n        ")]),e._v(" "),e.showNavigation?a("ButtonIcon",{staticClass:"tui-workspacePageHeader__title-buttonIcon",attrs:{"aria-label":e.buttonMenuAriaLabel,styleclass:{small:!0,transparentNoPadding:!0}},on:{click:function(i){i.preventDefault(),e.showMenu=!e.showMenu}}},[a("ShowIcon")],1):e._e()],1),e._v(" "),a("div",{staticClass:"tui-workspacePageHeader__subTitle"},[a("p",{staticClass:"tui-workspacePageHeader__subTitle-text"},[e._v("\n          "+e._s(e.subTitle)+"\n        ")]),e._v(" "),e.showMuteButton?a("WorkspaceMuteButton",{staticClass:"tui-workspacePageHeader__subTitle-button",attrs:{muted:e.workspaceMuted},on:{update:e.updateMuteStatus}}):e._e()],1)]),e._v(" "),e.showMenu&&e.showNavigation?a("WorkspaceMenu",{staticClass:"tui-workspacePageHeader__menu",attrs:{"selected-workspace-id":e.workspaceId}}):e._e()],1)])}),[],!1,null,null,null);"function"==typeof _&&_(g),g.options.__hasBlocks={script:!0,template:!0};i.default=g.exports},yAFK:function(e,i){e.exports=tui.require("totara_comment/size")},yAWT:function(e,i,a){},yc2X:function(e,i){e.exports=tui.require("container_workspace/components/grid/SpaceCardsGrid")},yikf:function(e,i){e.exports=tui.require("tui/components/datatable/Table")},z16U:function(e,i){e.exports=tui.require("container_workspace/components/form/PostDiscussionForm")},zDna:function(e,i,a){},"zPS+":function(e,i,a){"use strict";a.r(i);var n={props:{notFound:{type:Boolean,default:!1},type:{type:String,default:"workspace",validator:e=>["workspace","discussion"].includes(e)}},computed:{getContentMessage(){return this.notFound?"workspace"==this.type?this.$str("error:workspace_not_found","container_workspace"):this.$str("error:discussion_not_found","container_workspace"):this.$str("error:view_workspace","container_workspace")}}},t=(a("Nf3x"),a("KHd+")),r=function(e){e.options.__langStrings={container_workspace:["error:view_workspace","error:discussion_not_found","error:workspace_not_found"]}},s=Object(t.a)(n,(function(){var e=this.$createElement,i=this._self._c||e;return i("div",{staticClass:"tui-workspaceEmptyPage"},[i("p",{staticClass:"tui-workspaceEmptyPage__text"},[this._v("\n    "+this._s(this.getContentMessage)+"\n  ")])])}),[],!1,null,null,null);"function"==typeof r&&r(s),s.options.__hasBlocks={script:!0,template:!0};i.default=s.exports},zQe5:function(e,i){e.exports=tui.require("container_workspace/components/content/WorkspaceContentLayout")},zizw:function(e,i){e.exports=tui.require("container_workspace/components/head/WorkspaceFileHeader")},zkAu:function(e,i){e.exports=tui.require("container_workspace/components/filter/WorkspaceFilter")}});