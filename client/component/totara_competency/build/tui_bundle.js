!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="BAjG")}({"+6yQ":function(e,t){e.exports=tui.require("totara_competency/components/profile/competency_list/Filters")},"+KnN":function(e,t,i){"use strict";i.r(t);var n=i("JXQf"),a=i.n(n),s={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_competency_progress_for_user"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"order"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_competency_profile_assignment_filters"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_profile_competency_progress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}},{kind:"Argument",name:{kind:"Name",value:"order"},value:{kind:"Variable",name:{kind:"Name",value:"order"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"competency"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"archived_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_assigned"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"unassigned_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATE"}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"my_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scale_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"percentage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]}]}}]}}]}}]}}]},r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_scales"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_id"}},type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_scales"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"competency_id"},value:{kind:"Variable",name:{kind:"Name",value:"competency_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scaleid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numericscore"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sortorder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]}]}}]}}]}}]},o=i("+6yQ"),c=i.n(o),l=i("Q2E1"),d=i.n(l),u=i("R6ln"),m=i.n(u),p=i("TXEh"),_={components:{Loader:a.a,CurrentList:m.a,ArchivedList:d.a,Filters:c.a},props:{filters:{required:!1,type:Object,default:()=>({})},userId:{required:!0,type:Number},baseUrl:{required:!0,type:String},isMine:{required:!0,type:Boolean}},data:()=>({competencies:[],order:"alphabetical",proficientFilter:null,searchFilter:"",scales:[]}),computed:{selectedFilters(){const e={search:this.searchFilter};return this.filterNotArchived&&(e.proficient=this.proficientFilter),Object.assign(e,Object(p.pick)(this.filters,["status","type","user_group_id","user_group_type"]))},filterNotArchived(){return this.filters&&2!==this.filters.status}},apollo:{competencies:{query:s,variables(){return this.filterNotArchived?"recently-archived"===this.order&&(this.order="alphabetical"):"recently-assigned"===this.order&&(this.order="alphabetical"),{user_id:this.userId,order:this.order,filters:this.selectedFilters}},update:({totara_competency_profile_competency_progress:e})=>e},scales:{query:r,variables(){return{competency_id:this.competencies.map(({competency:e})=>e.id)}},update:({totara_competency_scales:e})=>e,skip(){return!this.competencies.length}}},methods:{filtersUpdated({search:e,proficient:t}){this.searchFilter=e,this.proficientFilter=t},orderUpdated(e){this.order=e}}},v=i("KHd+"),y=Object(v.a)(_,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Loader",{attrs:{loading:e.$apollo.loading}},[i("Filters",{attrs:{"is-for-archived":!e.filterNotArchived,"default-order":e.order,"default-filter-values":{proficient:e.proficientFilter,search:e.searchFilter}},on:{"filters-updated":e.filtersUpdated,"order-updated":e.orderUpdated}}),e._v(" "),e.filterNotArchived?i("CurrentList",{attrs:{competencies:e.competencies,"base-url":e.baseUrl,"user-id":e.userId,scales:e.scales}}):i("ArchivedList",{attrs:{competencies:e.competencies,scales:e.scales,"base-url":e.baseUrl,"user-id":e.userId}})],1)],1)}),[],!1,null,null,null);y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},"+MEP":function(e,t){e.exports=tui.require("tui/components/profile/MiniProfileCard")},"+TNE":function(e,t){e.exports=tui.require("totara_competency/components/details/ArchivedAssignments")},"+d5V":function(e,t,i){"use strict";i.r(t);var n={props:{complete:{type:Boolean},completed:{type:Number},target:{type:Number}}},a=(i("C4mR"),i("KHd+")),s=function(e){e.options.__langStrings={totara_competency:["achieved_n_out_of_n","completed"]}},r=Object(a.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-progressCircle",class:{"tui-progressCircle--complete":e.complete}},[i("div",{staticClass:"tui-progressCircle__circle"},[i("span",{staticClass:"tui-progressCircle__circle-text"},[e._v("\n      "+e._s(e.$str("achieved_n_out_of_n","totara_competency",{current:e.completed,target:e.target}))+"\n    ")])]),e._v(" "),i("div",{staticClass:"tui-progressCircle__label"},[e._v("\n    "+e._s(e.$str("completed","totara_competency"))+"\n  ")])])}),[],!1,null,null,null);"function"==typeof s&&s(r),r.options.__hasBlocks={script:!0,template:!0};t.default=r.exports},"/NCw":function(e,t,i){"use strict";i.r(t);var n=i("MhKF"),a=i.n(n),s=i("KGot"),r=i.n(s),o=i("5qAA"),c=i.n(o),l=i("9G+f"),d=i.n(l),u=i("C4bi"),m=i.n(u),p=i("lyMP"),_=i.n(p),v=i("yikf"),y=i.n(v),g={components:{AddUserIcon:a.a,Cell:r.a,HeaderCell:c.a,Popover:d.a,ProficientStatus:m.a,RemoveUserIcon:_.a,Table:y.a},props:{log:{type:Array}},methods:{showProgressName:e=>null!=e.assignment&&!["tracking_started","tracking_ended"].includes(e.assignment_action)}},f=(i("YDfs"),i("KHd+")),h=function(e){e.options.__langStrings={core:["date","description"],totara_competency:["assignment","proficiency_status","progress_name_by_user"]}},k=Object(f.a)(g,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Table",{staticClass:"tui-competencyDetailActivityLogTable",attrs:{data:e.log},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("date","core"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"8"}},[e._v("\n      "+e._s(e.$str("description","core"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v("\n      "+e._s(e.$str("proficiency_status","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v("\n      "+e._s(e.$str("assignment","totara_competency"))+"\n    ")])]},proxy:!0},{key:"row",fn:function(t){var n=t.row;t.expand;return[i("Cell",{attrs:{size:"2","column-header":e.$str("date","core")}},[i("Popover",{attrs:{triggers:["hover"]},scopedSlots:e._u([{key:"trigger",fn:function(){return[i("span",{staticClass:"tui-competencyDetailActivityLogTable__date"},[e._v("\n            "+e._s(n.date)+"\n          ")])]},proxy:!0}],null,!0)},[e._v(" "),i("div",[e._v(e._s(n.datetime))])])],1),e._v(" "),i("Cell",{staticClass:"tui-competencyDetailActivityLogTable__description",attrs:{size:"8","column-header":e.$str("description","core")}},["assigned"===n.assignment_action?i("AddUserIcon",{attrs:{size:"200"}}):e._e(),e._v(" "),"unassigned_archived"===n.assignment_action||"unassigned_usergroup"===n.assignment_action?i("RemoveUserIcon",{attrs:{size:"200"}}):e._e(),e._v(" "),i("span",{class:{"tui-competencyDetailActivityLogTable__description-rating":null!=n.proficient_status,"tui-competencyDetailActivityLogTable__description-system":n.assignment&&"system"===n.assignment.type,"tui-competencyDetailActivityLogTable__description-tracking":n.assignment_action&&("tracking_started"===n.assignment_action||"tracking_ended"===n.assignment_action)}},[e._v("\n        "+e._s(n.description)+"\n      ")])],1),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("proficiency_status","totara_competency")}},[null!=n.proficient_status?i("ProficientStatus",{attrs:{"proficient-status":n.proficient_status}}):e._e()],1),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("assignment","totara_competency")}},[e.showProgressName(n)?i("span",[e._v("\n        "+e._s(n.assignment.progress_name)+"\n      ")]):e._e()])]}}])})}),[],!1,null,null,null);"function"==typeof h&&h(k),k.options.__hasBlocks={script:!0,template:!0};t.default=k.exports},"/X/1":function(e,t){e.exports=tui.require("tui/components/toggle/ToggleSet")},"/bax":function(e,t,i){"use strict";i.r(t);var n=i("Sn4P"),a=i.n(n),s=i("QPG3"),r=i.n(s),o=i("+TNE"),c=i.n(o),l=i("Lany"),d=i.n(l),u=i("vF5l"),m=i.n(u),p=i("NAOU"),_=i.n(p),v=i("D9If"),y=i.n(v),g=i("bxeI"),f=i.n(g),h=i("+MEP"),k=i.n(h),b=i("tkAW"),N=i.n(b),S=i("Mnur"),C=i.n(S),A=i("zdti"),F=i.n(A),x=i("zs4z"),$=i.n(x),q=i("kPEt"),w=i.n(q),D=i("vyVp"),I=i("qGal"),V=i("gqVV"),T=i("wMJ/"),O={components:{Achievements:a.a,ActivityLog:r.a,ArchivedAssignments:c.a,Assignment:d.a,Button:m.a,Grid:_.a,GridItem:y.a,Layout:f.a,MiniProfileCard:k.a,Modal:N.a,ModalPresenter:C.a,NotificationBanner:F.a,PageBackLink:$.a,Progress:w.a},props:{competencyId:{required:!0,type:Number},goBackLink:{required:!0,type:String},goBackText:{required:!0,type:String},userId:{required:!0,type:Number},isMine:{required:!0,type:Boolean},showActivityLogByDefault:{default:!1,type:Boolean},toastMessage:{type:String},hasPendingAggregation:{type:Boolean}},data:()=>({activityLogModalOpen:!1,archivedAssignmentModalOpen:!1,assignmentFilter:0,data:{competency:null,items:[]},user:null}),apollo:{data:{query:V.a,variables(){return{user_id:this.userId,competency_id:this.competencyId,status:I.ASSIGNMENT_ACTIVE}},update({totara_competency_profile_competency_details:e}){const t=e;return null===t?{competency:null,items:[]}:{competency:t.competency,items:t.items}}},user:{query:T.a,variables(){return{user_id:this.userId}},update:e=>e.totara_competency_user,skip(){return this.isMine}}},computed:{selectedAssignment(){return this.data.items.length&&this.data.items[this.assignmentFilter]?this.data.items[this.assignmentFilter]:null},selectedAssignmentData(){return this.selectedAssignment?this.selectedAssignment.assignment:{}},selectedAssignmentProficiency(){return this.selectedAssignment&&this.selectedAssignment.my_value?this.selectedAssignment.my_value:{}},selectedAssignmentProficiencyValue(){return this.selectedAssignmentProficiency&&this.selectedAssignmentProficiency.id?this.selectedAssignmentProficiency.id:NaN},activeAssignmentList(){let e=[];return e=this.data.items.map((e,t)=>({archived:e.assignment.archived_at||"legacy"===e.assignment.type,id:t,assignment_id:e.assignment.id,can_archive:e.assignment.can_archive,label:this.getFilterLabel(e)})).filter((function(e){return!e.archived})),e.length&&this.updateAssignmentFilterValue(e[0].id),e}},mounted(){this.toastMessage&&Object(D.notify)({message:this.toastMessage}),this.activityLogModalOpen=this.showActivityLogByDefault},methods:{openActivityLogModal(){this.activityLogModalOpen=!0},openArchivedAssignmentModal(){this.archivedAssignmentModalOpen=!0},closeActivityLogModal(){this.activityLogModalOpen=!1},closeArchivedAssignmentModal(){this.archivedAssignmentModalOpen=!1},updateAssignmentFilterValue(e){this.assignmentFilter=e},getFilterLabel(e){let t=e.assignment.progress_name;if(this.isDirectlyAssigned(e.assignment)){let i={progress_name:e.assignment.progress_name,user_fullname_role:e.assignment.reason_assigned};t=this.$str("progress_name_by_user","totara_competency",i)}return t},isDirectlyAssigned:e=>"user"===e.user_group_type&&("admin"===e.type||"other"===e.type)}},P=(i("ykDy"),i("KHd+")),L=function(e){e.options.__langStrings={totara_competency:["activity_log","archived_assignments","current_assignment_details","competency_does_not_exist","no_active_assignments","warning_pending_aggregation_detail"]}},M=Object(P.a)(O,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Layout",{staticClass:"tui-competencyDetail",attrs:{loading:e.$apollo.loading,title:e.data.competency?e.data.competency.fullname:""},scopedSlots:e._u([e.hasPendingAggregation?{key:"feedback-banner",fn:function(){return[i("NotificationBanner",{attrs:{type:"warning",message:e.$str("warning_pending_aggregation_detail","totara_competency")}})]},proxy:!0}:null,e.user&&!e.isMine?{key:"user-overview",fn:function(){return[i("MiniProfileCard",{attrs:{display:e.user.card_display}})]},proxy:!0}:null,{key:"content-nav",fn:function(){return[i("PageBackLink",{attrs:{link:e.goBackLink,text:e.goBackText}})]},proxy:!0},e.data.competency?{key:"content",fn:function(){return[i("div",{staticClass:"tui-competencyDetail__content"},[i("Grid",{attrs:{"stack-at":700}},[i("GridItem",{attrs:{units:7}},[i("div",{staticClass:"tui-competencyDetail__description",domProps:{innerHTML:e._s(e.data.competency.description)}})]),e._v(" "),i("GridItem",{class:"tui-competencyDetail__buttons",attrs:{units:5}},[i("Button",{attrs:{styleclass:{small:!0},text:e.$str("archived_assignments","totara_competency")},on:{click:e.openArchivedAssignmentModal}}),e._v(" "),i("Button",{attrs:{styleclass:{small:!0},text:e.$str("activity_log","totara_competency")},on:{click:e.openActivityLogModal}})],1)],1),e._v(" "),i("div",{staticClass:"tui-competencyDetail__body"},[i("h3",{staticClass:"tui-competencyDetail__body-title"},[e._v("\n          "+e._s(e.$str("current_assignment_details","totara_competency"))+"\n        ")]),e._v(" "),e.activeAssignmentList.length?i("div",[i("Assignment",{attrs:{"active-assignment-list":e.activeAssignmentList,"selected-assignment-proficiency":e.selectedAssignmentProficiency,"competency-id":e.competencyId,"user-id":e.userId},model:{value:e.assignmentFilter,callback:function(t){e.assignmentFilter=t},expression:"assignmentFilter"}}),e._v(" "),i("Progress",{attrs:{"competency-id":e.competencyId,"my-value":e.selectedAssignmentProficiencyValue}}),e._v(" "),i("Achievements",{attrs:{assignment:e.selectedAssignmentData,"user-id":e.userId}})],1):i("div",{staticClass:"tui-competencyDetail__body-empty"},[e._v("\n          "+e._s(e.$str("no_active_assignments","totara_competency"))+"\n        ")])])],1)]},proxy:!0}:null,{key:"modals",fn:function(){return[i("ModalPresenter",{attrs:{open:e.activityLogModalOpen},on:{"request-close":e.closeActivityLogModal}},[i("Modal",{attrs:{size:"sheet"}},[i("ActivityLog",{attrs:{"competency-id":e.competencyId,"user-id":e.userId}})],1)],1),e._v(" "),i("ModalPresenter",{attrs:{open:e.archivedAssignmentModalOpen},on:{"request-close":e.closeArchivedAssignmentModal}},[i("Modal",{attrs:{size:"sheet"}},[i("ArchivedAssignments",{attrs:{"competency-id":e.competencyId,"user-id":e.userId}})],1)],1)]},proxy:!0}],null,!0)})}),[],!1,null,null,null);"function"==typeof L&&L(M),M.options.__hasBlocks={script:!0,template:!0};t.default=M.exports},"/gTP":function(e,t,i){var n={"./CompetencyDetail":"/bax","./CompetencyDetail.vue":"/bax","./CompetencyProfile":"4roC","./CompetencyProfile.vue":"4roC","./CompetencySummary":"CAFL","./CompetencySummary.vue":"CAFL","./UserAssignment":"H8/h","./UserAssignment.vue":"H8/h"};function a(e){var t=s(e);return i(t)}function s(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="/gTP"},"/sVv":function(e,t,i){"use strict";var n=i("AY6a");i.n(n).a},"0Ys5":function(e,t,i){},"1LXY":function(e,t){e.exports=tui.require("totara_competency/components/summary/LinkedCourses")},"1i2V":function(e,t){e.exports=tui.require("tui/components/tabs/Tab")},"2z5M":function(e,t,i){"use strict";var n=i("e7qB");i.n(n).a},"2zrd":function(e,t){e.exports=tui.require("tui/components/progresstracker/ProgressTracker")},"3WCR":function(e,t,i){"use strict";i.r(t);var n=i("jJ8l"),a=i.n(n),s=i("E0Ja"),r=i.n(s),o=i("rNse"),c=i.n(o),l=i("NAOU"),d=i.n(l),u=i("D9If"),m=i.n(u),p=i("k7/G"),_=i.n(p),v=i("BxDI"),y=i.n(v),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_achievement_criteria"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"summarized"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_achievement_criteria"},arguments:[{kind:"Argument",name:{kind:"Name",value:"competency_id"},value:{kind:"Variable",name:{kind:"Name",value:"competency_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"competency_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"overall_aggregation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"aggregation_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"paths"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pathway_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"instance_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sortorder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"classification"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scale_value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"criteria_summary"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"summarized"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"item_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"item_aggregation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]},f={components:{Card:a.a,Criteria:r.a,EditIcon:c.a,Grid:d.a,GridItem:m.a,OrBox:_.a,Separator:y.a},props:{competencyId:{type:Number}},data:()=>({editUrl:"",paths:[]}),computed:{hasPathways(){return this.achievementConfiguration.paths&&this.achievementConfiguration.paths.length>0},pathGroups(){let e=[],t=null,i=this.paths,n=[];for(let a in i){let s=Object.assign({},i[a]);if(s.multiCriteria=s.criteria_summary.length>1,"MULTIVALUE"===s.classification)t?e.push({key:"group-"+a,scaleValues:[{value:this.$str("any_scale_value","totara_competency"),paths:[s]}]}):n.push({key:"group-"+a,scaleValues:[{value:this.$str("any_scale_value","totara_competency"),paths:[s]}]});else{t||(t={key:"group-"+a,scaleValues:[]});let e=t.scaleValues.findIndex(e=>e.value===s.scale_value);-1===e&&(e=t.scaleValues.length,t.scaleValues.push({value:s.scale_value,paths:[]})),t.scaleValues[e].paths.push(s)}}return t?[].concat(n,t,e):n}},apollo:{achievementConfiguration:{query:g,variables(){return{competency_id:this.competencyId,summarized:!0}},update({totara_competency_achievement_criteria:e}){return this.editUrl=this.$url("/totara/competency/competency_edit.php",{s:"achievement_paths",id:this.competencyId}),this.paths=e.paths,e}}}},h=(i("luBG"),i("KHd+")),k=function(e){e.options.__langStrings={core:["edit"],totara_competency:["achievement_paths","overall_rating_calc","any_scale_value","no_paths"]}},b=Object(h.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencySummaryAchievementConfiguration"},[i("div",{staticClass:"tui-competencySummary__sectionHeader"},[i("h3",{staticClass:"tui-competencySummary__sectionHeader-title"},[e._v("\n      "+e._s(e.$str("achievement_paths","totara_competency"))+"\n    ")]),e._v(" "),i("a",{staticClass:"tui-competencySummary__sectionHeader-edit",attrs:{href:e.editUrl,title:e.$str("edit","core")}},[i("EditIcon",{attrs:{size:200,alt:e.$str("edit","core")}})],1)]),e._v(" "),!e.$apollo.loading&&e.hasPathways?[i("div",{staticClass:"tui-competencySummaryAchievementConfiguration__aggregation"},[i("span",{staticClass:"tui-competencySummaryAchievementConfiguration__aggregation-label"},[e._v("\n        "+e._s(e.$str("overall_rating_calc","totara_competency"))+"\n      ")]),e._v("\n\n      "+e._s(e.achievementConfiguration.overall_aggregation.title)+"\n    ")]),e._v(" "),e._l(e.pathGroups,(function(t,n){return i("Card",{key:"pathGroup"+n},[i("div",{staticClass:"tui-competencySummaryAchievementConfiguration__pathGroup"},e._l(t.scaleValues,(function(t,n){return i("Grid",{key:"scaleValue"+n,staticClass:"tui-competencySummaryAchievementConfiguration__scaleValue",attrs:{"stack-at":700}},[i("GridItem",{attrs:{units:2}},[i("h4",{staticClass:"tui-competencySummaryAchievementConfiguration__scaleValue-header"},[e._v("\n              "+e._s(t.value)+"\n            ")])]),e._v(" "),i("GridItem",{attrs:{units:10}},e._l(t.paths,(function(t,n){return i("div",{key:t.id},[n?i("Separator",{staticClass:"tui-competencySummaryAchievementConfiguration__scaleValue-or"},[i("OrBox")],1):e._e(),e._v(" "),i("Criteria",{attrs:{path:t}})],1)})),0)],1)})),1)])}))]:e.$apollo.loading?e._e():i("div",{staticClass:"tui-competencySummaryAchievementConfiguration__noPaths"},[e._v("\n    "+e._s(e.$str("no_paths","totara_competency"))+"\n  ")])],2)}),[],!1,null,null,null);"function"==typeof k&&k(b),b.options.__hasBlocks={script:!0,template:!0};t.default=b.exports},"3fD/":function(e,t){e.exports=tui.require("tui_charts/components/ChartJs")},"3gXZ":function(e,t,i){},"3kcf":function(e,t){e.exports=tui.require("tui/components/filters/MultiSelectFilter")},"3qNn":function(e,t,i){},"3s/G":function(e,t){e.exports=tui.require("totara_competency/components/summary/AchievementConfiguration")},"49h4":function(e,t){e.exports=tui.require("tui/components/filters/SelectFilter")},"4Zth":function(e,t,i){"use strict";var n=i("0Ys5");i.n(n).a},"4roC":function(e,t,i){"use strict";i.r(t);var n=i("fCWf"),a=i.n(n),s=i("vqlw"),r=i.n(s),o=i("NUDN"),c=i.n(o),l=i("Vpbp"),d=i.n(l),u=i("Yoo0"),m=i.n(u),p=i("D6uX"),_=i.n(p),v=i("JXQf"),y=i.n(v),g=i("+MEP"),f=i.n(g),h=i("epks"),k=i.n(h),b=i("zdti"),N=i.n(b),S=i("g8/U"),C=i.n(S),A=i("51bi"),F=i.n(A),x=i("dtfu"),$=i.n(x),q=i("kV+/"),w=i.n(q),D=i("/X/1"),I=i.n(D),V=i("vyVp"),T=i("TXEh"),O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_progress_for_user"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_competency_profile_assignment_filters"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_profile_progress"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"overall_progress"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"min_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"percentage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"my_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"percentage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"competency"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"filters"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_group_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_group_type"},arguments:[],directives:[]}]}}]}}]}}]},P=i("wMJ/");var L={components:{ActionLink:a.a,BarChartIcon:r.a,CompetencyCharts:c.a,CompetencyList:d.a,CurrentProgress:m.a,ListIcon:_.a,Loader:y.a,MiniProfileCard:f.a,NoCompetencyAssignments:k.a,NotificationBanner:N.a,PageHeading:C.a,ProgressAssignmentFilters:F.a,Responsive:$.a,ToggleButton:w.a,ToggleSet:I.a},props:{selfAssignmentUrl:{required:!0,type:String},userId:{required:!0,type:Number},baseUrl:{required:!0,type:String},isMine:{required:!0,type:Boolean},canRateCompetencies:{required:!0,type:Boolean},toastMessage:{type:String},hasPendingAggregation:{type:Boolean},canAssign:Boolean},data(){return{data:{},user:null,activeTab:"charts",selectedFilters:this.$_addFilterKey({status:1,type:null,user_group_id:null,user_group_type:null}),currentProgressData:[]}},apollo:{data:{query:O,variables(){return{user_id:this.userId,filters:Object(T.pick)(this.selectedFilters,["status","type","user_group_id","user_group_type"])}},update:e=>e.totara_competency_profile_progress,result({data:{totara_competency_profile_progress:e}}){if(1!=this.selectedFilters.status||this.currentProgressData.length||(this.currentProgressData=e.items.slice(0)),e.filters&&e.filters.length){const t=this.selectedFilters,i=null===t.type&&null===t.user_group_id&&null===t.user_group_type;(i?e.filters.some(e=>e.status==this.selectedFilters.status):e.filters.some(e=>this.$_filterKey(e)==this.selectedFilters.key))||(this.selectedFilters=this.$_addFilterKey(i?{status:e.filters[0].status,type:null,user_group_id:null,user_group_type:null}:e.filters[0]))}}},user:{query:P.a,variables(){return{user_id:this.userId}},update:e=>e.totara_competency_user,skip(){return this.isMine}}},computed:{filterOptions(){return this.data&&this.data.filters?Object.entries(Object(T.groupBy)(this.data.filters,e=>e.status)).map(([e,t])=>{const i=this.$_addFilterKey({status:t[0].status,type:null,user_group_id:null,user_group_type:null});return{id:i.key,name:t[0].status_name,value:i,filters:t.map(e=>{const t=this.$_addFilterKey(this.$_filterValue(e));return{id:t.key,name:e.name,value:t}})}}):[]},noAssignments(){return!this.$apollo.loading&&!this.filterOptions.length},rateCompetenciesUrl(){return this.canRateCompetencies?this.$url("/totara/competency/rate_competencies.php",{user_id:this.userId}):null}},mounted(){this.toastMessage&&Object(V.notify)({message:this.toastMessage})},methods:{$_filterValue:e=>Object(T.pick)(e,["status","type","user_group_id","user_group_type"]),$_addFilterKey(e){return Object.assign({key:this.$_filterKey(e)},e)},$_filterKey:e=>JSON.stringify([e.status,e.type,e.user_group_id,e.user_group_type])}},M=(i("fCaH"),i("KHd+")),B=function(e){e.options.__langStrings={totara_competency:["assign_competencies","competency_profile","current_assignment_progress","header_competencies","self_assign_competencies","toggle_charts","toggle_competency_view_format","toggle_table","warning_pending_aggregation_profile"],pathway_manual:["rate_competencies"]}},E=Object(M.a)(L,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Loader",{attrs:{loading:e.$apollo.loading}},[i("div",{staticClass:"tui-competencyProfile"},[e.hasPendingAggregation?i("NotificationBanner",{attrs:{type:"warning",message:e.$str("warning_pending_aggregation_profile","totara_competency")}}):e._e(),e._v(" "),i("div",{staticClass:"tui-competencyProfile__header"},[e.user&&!e.isMine?i("MiniProfileCard",{attrs:{display:e.user.card_display}}):e._e(),e._v(" "),i("PageHeading",{attrs:{title:e.$str("competency_profile","totara_competency")}})],1),e._v(" "),e.noAssignments?i("NoCompetencyAssignments",{attrs:{"is-mine":e.isMine,"is-assign-enabled":e.canAssign,"self-assignment-url":e.selfAssignmentUrl}}):i("div",[i("div",{staticClass:"tui-competencyProfile__currentHeading"},[i("h3",{staticClass:"tui-competencyProfile__currentHeading-title"},[e._v("\n          "+e._s(e.$str("current_assignment_progress","totara_competency"))+"\n        ")]),e._v(" "),e.noAssignments?e._e():i("div",{staticClass:"tui-competencyProfile__currentHeading-buttons"},[e.rateCompetenciesUrl?i("ActionLink",{attrs:{href:e.rateCompetenciesUrl,text:e.$str("rate_competencies","pathway_manual")}}):e._e(),e._v(" "),e.canAssign?i("ActionLink",{attrs:{href:e.selfAssignmentUrl,text:e.$str(e.isMine?"self_assign_competencies":"assign_competencies","totara_competency")}}):e._e()],1)]),e._v(" "),i("CurrentProgress",{attrs:{data:e.currentProgressData,"is-current-user":e.isMine}}),e._v(" "),i("Responsive",{staticClass:"tui-competencyProfile__competencies",attrs:{breakpoints:[{name:"small",boundaries:[0,700]},{name:null,boundaries:[701,701]}]},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.currentBoundaryName;return[i("div",{staticClass:"tui-competencyProfile__competencies-content"},[i("h3",{staticClass:"tui-competencyProfile__sectionTitle"},[e._v("\n            "+e._s(e.$str("header_competencies","totara_competency"))+"\n          ")]),e._v(" "),i("div",{staticClass:"tui-competencyProfile__filtersBar"},[i("ProgressAssignmentFilters",{attrs:{filters:e.filterOptions},model:{value:e.selectedFilters,callback:function(t){e.selectedFilters=t},expression:"selectedFilters"}}),e._v(" "),"small"!=n?i("div",{staticClass:"tui-competencyProfile__tabs"},[i("ToggleSet",{attrs:{"aria-label":e.$str("toggle_competency_view_format","totara_competency")},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[i("ToggleButton",{attrs:{value:"charts","aria-label":e.$str("toggle_charts","totara_competency")}},[i("BarChartIcon")],1),e._v(" "),i("ToggleButton",{attrs:{value:"table","aria-label":e.$str("toggle_table","totara_competency")}},[i("ListIcon")],1)],1)],1):e._e()],1),e._v(" "),"small"!=n&&"charts"===e.activeTab?i("div",[i("CompetencyCharts",{attrs:{data:e.data,"user-id":e.userId,"is-current-user":e.isMine}})],1):e._e(),e._v(" "),"small"==n||"table"===e.activeTab?i("div",[i("CompetencyList",{attrs:{filters:e.selectedFilters,"user-id":e.userId,"is-mine":e.isMine,"base-url":e.baseUrl}})],1):e._e()])]}}])})],1)],1)])}),[],!1,null,null,null);"function"==typeof B&&B(E),E.options.__hasBlocks={script:!0,template:!0};t.default=E.exports},"51bi":function(e,t){e.exports=tui.require("totara_competency/components/ProgressAssignmentFilters")},"554a":function(e,t){e.exports=tui.require("tui/components/filters/FilterSidePanel")},"59Wj":function(e,t){e.exports=tui.require("tui/components/filters/FilterBar")},"5h9J":function(e,t){e.exports=tui.require("tui/components/buttons/ButtonIcon")},"5qAA":function(e,t){e.exports=tui.require("tui/components/datatable/HeaderCell")},"7OoD":function(e,t){e.exports=tui.require("totara_competency/components/details/ActivityLogTable")},"7rD8":function(e,t,i){"use strict";i.r(t);var n=i("Ygam"),a=i.n(n),s=i("JXQf"),r=i.n(s),o=i("qGal"),c=i("gqVV"),l={components:{ArchivedAssignmentsTable:a.a,Loader:r.a},props:{userId:{required:!0,type:Number},competencyId:{required:!0,type:Number}},data:function(){return{data:{competency:{},items:[]}}},apollo:{data:{query:c.a,fetchPolicy:"network-only",variables(){return{user_id:this.userId,competency_id:this.competencyId,status:o.ASSIGNMENT_ARCHIVED}},update:({totara_competency_profile_competency_details:{competency:e,items:t}})=>({competency:e,items:t})}},computed:{archivedAssignmentList(){let e=[];return e=this.data.items.map((function(e){let t=null;return t=e.assignment.archived_at?e.assignment.archived_at:e.assignment.unassigned_at,{name:e.assignment.progress_name,archivedAt:t,legacy:"legacy"===e.assignment.type,proficient:e.my_value.proficient}})),e}}},d=(i("ymIi"),i("KHd+")),u=function(e){e.options.__langStrings={totara_competency:["archived_assignments"]}},m=Object(d.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tui-competencyDetailArchivedAssignments"},[t("h4",{staticClass:"tui-competencyDetailArchivedAssignments__title"},[this._v("\n    "+this._s(this.$str("archived_assignments","totara_competency"))+"\n  ")]),this._v(" "),t("Loader",{attrs:{loading:this.$apollo.loading}},[t("ArchivedAssignmentsTable",{attrs:{assignments:this.archivedAssignmentList}})],1)],1)}),[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};t.default=m.exports},"7roX":function(e,t,i){},"8DMs":function(e,t,i){},"8Lk7":function(e,t,i){"use strict";i.r(t);var n=i("AFyC"),a={components:{AssignmentProgress:i.n(n).a},props:{data:{required:!0,type:Array},isCurrentUser:{type:Boolean,required:!0}}},s=(i("/sVv"),i("KHd+")),r=function(e){e.options.__langStrings={totara_competency:["no_current_assignments_other","no_current_assignments_self"]}},o=Object(s.a)(a,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tui-competencyProfileCurrentProgress"},[this.data.length?t("ul",{staticClass:"tui-competencyProfileCurrentProgress__progress"},this._l(this.data,(function(e,i){return t("li",{key:i},[t("AssignmentProgress",{attrs:{progress:e}})],1)})),0):t("div",{staticClass:"tui-competencyProfileCurrentProgress__empty"},[this._v("\n    "+this._s(this.$str(this.isCurrentUser?"no_current_assignments_self":"no_current_assignments_other","totara_competency"))+"\n  ")])])}),[],!1,null,null,null);"function"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},"8QXL":function(e,t,i){"use strict";i.r(t);var n=i("3fD/"),a=i.n(n),s=i("i3se"),r=i.n(s),o=i("TXEh");let c=(e,t,i)=>({x:e*Math.cos(i)-t*Math.sin(i),y:e*Math.sin(i)+t*Math.cos(i)}),l=(e,t,i,n)=>{let a=e.offsetX,s=e.offsetY,r=i.helpers,o=t.ctx;if("bar"===t.config.type){let i=t.getElementsAtEvent(e);if(i.length>0){let e=i[0]._index;return void 0!==n.data.competencies[e]?n.data.competencies[e]:null}let r=t.scales["x-axis-0"],l=4,d=null;return r._computeLabelItems().forEach(e=>{let t=e.x,i=e.y,r=e.rotation,u=Math.abs(r)>=.001,{width:m,height:p}=function(e,t){let i=t.label,n=0;return e.font=t.font.fontString,void 0!==i&&""!==(""+i).trim()&&(n=e.measureText(i).width),{width:n,height:t.font.lineHeight}}(o,e);if(0===m)return;m+=l,p+=l;let _=-m,v=_,y=p/-2,g=p/-2,f=p/2,h=p/2,k={x:m/-2,y:-l/2},b={x:m/2,y:-l/2},N={x:b.x,y:p-l/2},S={x:k.x,y:p-l/2};if(u&&(k=c(_,y,r),b=c(0,g,r),N=c(0,f,r),S=c(v,h,r)),((e,t,i,n,a,s,r,o,c,l)=>{let d=Math.sqrt(Math.pow(i-a,2)+Math.pow(n-s,2)),u=Math.sqrt(Math.pow(a-r,2)+Math.pow(s-o,2)),m=Math.sqrt(Math.pow(r-c,2)+Math.pow(o-l,2)),p=Math.sqrt(Math.pow(c-i,2)+Math.pow(l-n,2)),_=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),v=Math.sqrt(Math.pow(a-e,2)+Math.pow(s-t,2)),y=Math.sqrt(Math.pow(r-e,2)+Math.pow(o-t,2)),g=Math.sqrt(Math.pow(c-e,2)+Math.pow(l-t,2)),f=(d+_+v)/2,h=(u+v+y)/2,k=(m+y+g)/2,b=(p+g+_)/2,N=Math.sqrt(f*(f-d)*(f-_)*(f-v)),S=Math.sqrt(h*(h-u)*(h-v)*(h-y)),C=Math.sqrt(k*(k-m)*(k-y)*(k-g)),A=Math.sqrt(b*(b-p)*(b-g)*(b-_));return Math.round(N+S+C+A)===Math.round(d*u)})(a,s,t+k.x,i+k.y,t+b.x,i+b.y,t+N.x,i+N.y,t+S.x,i+S.y)){n.debug&&(o.save(),o.strokeStyle="red",o.lineWidth=1,o.beginPath(),o.moveTo(t+k.x,i+k.y),o.lineTo(t+b.x,i+b.y),o.lineTo(t+N.x,i+N.y),o.lineTo(t+S.x,i+S.y),o.lineTo(t+k.x,i+k.y),o.stroke(),o.restore(),console.log("SCIENCE, B!"));let a=n.assignmentProgress.items.find(t=>t.competency.fullname===e.label);a&&(d=a)}else n.debug&&console.log("OUTSIDE")}),d?d.competency.id:null}let l=t.scale,d=l.options,u=d.ticks,m=u.display&&d.display?r.valueOrDefault(u.fontSize,i.defaults.global.defaultFontSize)+5:0,p=l.getDistanceFromCenterForValue(d.ticks.reverse?l.min:l.max);for(let e=0;e<l.pointLabels.length;e++){let t=0===e?m/2:0,i=l.getPointPosition(e,p+t+5),c=l._pointLabelSizes[e],d=l.getIndexAngle(e),u=r.toDegrees(d),_="right";0===u||180===u?_="center":u<180&&(_="left");let v=0;90===u||270===u?v=c.h/2:(u>270||u<90)&&(v=c.h);let y,g=i.y-v-5,f=10+c.h,h=g+f,k=c.w+10;switch(_){case"center":y=i.x-k/2;break;case"left":y=i.x-5;break;case"right":y=i.x-k+5;break;default:console.log("ERROR: unknown textAlign "+_)}let b=y+k;if(n.debug&&(o.save(),o.strokeStyle="red",o.lineWidth=1,o.strokeRect(y,g,k,f),o.restore()),a>=y&&a<=b&&s<=h&&s>=g)return n.data.competencies[e]}return null};var d={components:{ChartJs:a.a},props:{assignmentProgress:{required:!0,type:Object},userId:{type:Number,required:!0},isCurrentUser:{type:Boolean,required:!0},debug:{type:Boolean,default:!1}},data(){return{labels:this.assignmentProgress.items.map(e=>e.competency.fullname)}},computed:{options:function(){let e=this,t={tooltips:{filter(e,t){let i=t.labels[e.index];return[""].indexOf(i.join(" ").trim())}},legend:{position:"bottom",display:!0,labels:{boxWidth:15,lineWidth:0,padding:25}}};if("radar"===this.type)t.scale={pointLabels:{fontSize:12,fontColor:r.a.getVar("color-state")},ticks:{beginAtZero:!0,display:!1,max:100}};else{let e=this.assignmentProgress.items.slice(0,1).pop(),i=this.assignmentProgress.items.slice(-1).pop();e&&(e=e.competency.fullname),i&&(i=i.competency.fullname,this.assignmentProgress.items.length<=2&&(i="   ")),t.scales={yAxes:[{ticks:{beginAtZero:!0,display:!1,fontSize:12,max:110}}],xAxes:[{ticks:{min:e,max:i,fontSize:12,fontColor:r.a.getVar("color-state")}}]}}return t.tooltips.callbacks={title:t=>Object(o.unique)(t.map(e=>e.index)).map(t=>e.shorten(e.labels[t],60)).reduce((e,t)=>(t.map(t=>e.push(t)),e),[]),label(e,t){let i=t.datasets[e.datasetIndex].label||"";return i&&t.datasets[e.datasetIndex].rawData[e.index]&&(i+=": "+t.datasets[e.datasetIndex].rawData[e.index].name),i}},t},data:function(){let e={labels:[],competencies:[],datasets:[{label:this.$str("achievement_level","totara_competency"),backgroundColor:r.a.getVar("color-chart-transparent-1"),borderColor:r.a.getVar("color-chart-background-1"),borderWidth:2,rawData:[],data:[],values:[]},{label:this.$str("proficiency_level","totara_competency"),backgroundColor:"bar"===this.type?"transparent":r.a.getVar("color-chart-transparent-4"),borderColor:r.a.getVar("color-chart-background-4"),pointBorderColor:r.a.getVar("color-chart-background-4"),pointBackgroundColor:r.a.getVar("color-chart-background-4"),borderWidth:2,steppedLine:"middle",rawData:[],data:[],values:[]}]};if(this.assignmentProgress.items.forEach(function(t){e.competencies.push(t.competency.id),e.labels.push(this.shorten(t.competency.fullname,35)),e.datasets[0].data.push(t.my_value.percentage),e.datasets[1].data.push(t.min_value.percentage),e.datasets[0].values.push(t.my_value.name),e.datasets[1].values.push(t.min_value.name),e.datasets[0].rawData.push(t.my_value),e.datasets[1].rawData.push(t.min_value)}.bind(this)),"bar"===this.type&&(e.datasets[1].type="line",e.datasets[0].data.length)){const t=e.datasets[1].data.slice(0,1).pop(),i=e.datasets[1].data.slice(-1).pop();if(this.assignmentProgress.items.length<=2)for(let t=this.assignmentProgress.items.length;t<=3;t++)e.datasets[0].data.push(null),e.datasets[1].data.push(i),e.competencies.push(null),3===t?e.labels.push("   "):e.labels.push(" ");e.datasets[0].rawData.push(null),e.datasets[0].rawData.unshift(null),e.datasets[1].rawData.push(null),e.datasets[1].rawData.unshift(null),e.datasets[0].data.push(null),e.datasets[0].data.unshift(null),e.datasets[1].data.unshift(t),e.datasets[1].data.push(i),e.competencies.push(null),e.competencies.unshift(null),e.labels.unshift(""),e.labels.push("")}return e},type:function(){return this.assignmentProgress.items.length<=2||this.assignmentProgress.items.length>=12?"bar":"radar"}},methods:{competencyLink(e){const t={competency_id:e};return this.isMine||(t.user_id=this.userId),this.$url("/totara/competency/profile/details/index.php",t)},chartHovered(e,t,i,n){requestAnimationFrame(()=>{l(e,i,n,this)?e.target.style.cursor="pointer":e.target.style.cursor="auto"})},chartClicked(e,t,i,n){let a=l(e,i,n,this);a&&(window.location.href=this.competencyLink(a))},shorten:function(e,t,i=" "){let n,a=[],s=0;if(e.length<=t)return[e.trim()];for(let r=0;r<2;r++){if(s+t>=e.length){a.push(e.substr(s).trim());break}{n=e.lastIndexOf(i,s+t);let o=e.substr(s,n-s).trim();s=n+1,1===r&&(o+=String.fromCharCode(8230)),a.push(o)}}return a}}},u=i("KHd+"),m=function(e){e.options.__langStrings={totara_competency:["proficient","not_proficient","proficiency_level","achievement_level"]}},p=Object(u.a)(d,(function(){var e=this.$createElement;return(this._self._c||e)("ChartJs",{attrs:{type:this.type,data:this.data,options:this.options,header:this.assignmentProgress.name},on:{click:this.chartClicked,hover:this.chartHovered}})}),[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},"8cak":function(e,t){e.exports=tui.require("tui/components/progresstracker/ProgressTrackerCircle")},"8n92":function(e,t){e.exports=tui.require("totara_competency/components/profile/MyRatingCell")},"9G+f":function(e,t){e.exports=tui.require("tui/components/popover/Popover")},AENL:function(e,t){e.exports=tui.require("totara_competency/components/user_assignment/SelectionTable")},AFyC:function(e,t){e.exports=tui.require("totara_competency/components/AssignmentProgress")},AY6a:function(e,t,i){},BAjG:function(e,t,i){!function(){"use strict";"undefined"!=typeof tui&&tui._bundle.isLoaded("totara_competency")?console.warn('[tui bundle] The bundle "totara_competency" is already loaded, skipping initialisation.'):(tui._bundle.register("totara_competency"),tui._bundle.addModulesFromContext("totara_competency",i("vMqX")),tui._bundle.addModulesFromContext("totara_competency/components",i("W+j5")),tui._bundle.addModulesFromContext("totara_competency/pages",i("/gTP")))}()},BbQS:function(e,t,i){"use strict";var n=i("7roX");i.n(n).a},BxDI:function(e,t){e.exports=tui.require("tui/components/decor/Separator")},"C+/B":function(e,t){e.exports=tui.require("tui/components/modal/ConfirmationModal")},C4bi:function(e,t){e.exports=tui.require("totara_competency/components/details/ProficientStatus")},C4mR:function(e,t,i){"use strict";var n=i("KDHu");i.n(n).a},CAFL:function(e,t,i){"use strict";i.r(t);var n=i("3s/G"),a=i.n(n),s=i("bAb2"),r=i.n(s),o=i("1LXY"),c=i.n(o),l=i("g8/U"),d=i.n(l),u={components:{AchievementConfiguration:a.a,General:r.a,LinkedCourses:c.a,PageHeading:d.a},props:{competencyId:{type:Number,required:!0},competencyName:{type:String,required:!0},frameworkId:{type:Number,required:!0},frameworkName:{type:String,required:!0},performEnabled:{type:Boolean,required:!0}},computed:{backLinkUrl(){return this.$url("/totara/hierarchy/index.php",{prefix:"competency",frameworkid:this.frameworkId})}}},m=(i("nvA/"),i("KHd+")),p=function(e){e.options.__langStrings={totara_competency:["back_to"],totara_hierarchy:["competency_title"]}},_=Object(m.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencySummary"},[i("a",{attrs:{href:e.backLinkUrl}},[e._v("\n    "+e._s(e.$str("back_to","totara_competency",e.frameworkName))+"\n  ")]),e._v(" "),i("div",{staticClass:"tui-competencySummary__content"},[i("PageHeading",{attrs:{title:e.$str("competency_title","totara_hierarchy",{framework:e.frameworkName,fullname:e.competencyName})}}),e._v(" "),i("General",{attrs:{"competency-id":e.competencyId}}),e._v(" "),i("LinkedCourses",{attrs:{"competency-id":e.competencyId}}),e._v(" "),e.performEnabled?i("AchievementConfiguration",{attrs:{"competency-id":e.competencyId}}):e._e()],1)])}),[],!1,null,null,null);"function"==typeof p&&p(_),_.options.__hasBlocks={script:!0,template:!0};t.default=_.exports},CpVI:function(e,t,i){},D6uX:function(e,t){e.exports=tui.require("tui/components/icons/List")},D9If:function(e,t){e.exports=tui.require("tui/components/grid/GridItem")},DGVr:function(e,t,i){},DZZz:function(e,t,i){"use strict";var n=i("b5Rx");i.n(n).a},E0Ja:function(e,t){e.exports=tui.require("totara_competency/components/summary/AchievementConfigurationCriteria")},FBvN:function(e,t){e.exports=tui.require("tui/components/filters/SearchFilter")},FKgf:function(e,t,i){"use strict";var n=i("We4D");i.n(n).a},"H8/h":function(e,t,i){"use strict";i.r(t);var n=i("xNwe"),a=i.n(n),s=i("vF5l"),r=i.n(s),o=i("5h9J"),c=i.n(o),l=i("J1fj"),d=i.n(l),u=i("C+/B"),m=i.n(u),p={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_competency_create_user_assignments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_ids"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_create_user_assignments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"competency_ids"},value:{kind:"Variable",name:{kind:"Name",value:"competency_ids"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]},_=i("554a"),v=i.n(_),y=i("NAOU"),g=i.n(y),f=i("D9If"),h=i.n(f),k=i("JXQf"),b=i.n(k),N=i("+MEP"),S=i.n(N),C=i("3kcf"),A=i.n(C),F=i("g8/U"),x=i.n(F),$=i("FBvN"),q=i.n($),w=i("49h4"),D=i.n(w),I=i("AENL"),V=i.n(I),T=i("vyVp"),O={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_user_assignable_competencies"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_competency_self_assigned_competencies_filter"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"order_by"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"order_dir"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_competency_order_dir"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_user_assignable_competencies"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}},{kind:"Argument",name:{kind:"Name",value:"order_by"},value:{kind:"Variable",name:{kind:"Name",value:"order_by"}}},{kind:"Argument",name:{kind:"Name",value:"order_dir"},value:{kind:"Variable",name:{kind:"Name",value:"order_dir"}}},{kind:"Argument",name:{kind:"Name",value:"cursor"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_assignments"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_group_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason_assigned"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"next_cursor"},arguments:[],directives:[]}]}}]}}]},P=i("wMJ/"),L={components:{Basket:a.a,Button:r.a,ButtonIcon:c.a,ClearIcon:d.a,ConfirmationModal:m.a,FilterSidePanel:v.a,Grid:g.a,GridItem:h.a,Loader:b.a,MiniProfileCard:S.a,MultiSelectFilter:A.a,PageHeading:x.a,SearchFilter:q.a,SelectFilter:D.a,SelectionTable:V.a},props:{basePageHeading:{required:!0,type:String},goBackLink:{required:!0,type:String},goBackText:{required:!0,type:String},frameworks:{required:!0,type:Array},types:{required:!0,type:Array},userId:{required:!0,type:Number},isMine:{required:!0,type:Boolean}},data(){return{allSelected:!1,selectedItems:[],isViewingSelections:!1,isShowingConfirmationModal:!1,isSaving:!1,data:{items:[],total:null,next_cursor:null},frameworkSelection:null,filters:{assignment_status:"",text:"",type:[]},activeFilterCount:0,assignmentStatusesOptions:[{id:"",label:this.$str("any","totara_competency")},{id:1,label:this.$str("currently_assigned","totara_competency")},{id:0,label:this.$str("not_assigned","totara_competency")}],basketActions:[{label:this.$str("assign_competencies","totara_competency"),action:this.showConfirmationModal}],user:null}},computed:{pageHeading(){return this.isViewingSelections?this.$str("view_selected_competencies","totara_competency"):this.basePageHeading},hasLoadedCompetencies(){return this.data&&null!==this.data.total},firstPageQueryVariables(){return{user_id:this.userId,filters:this.filtersForQuery,cursor:null}},subsequentPageQueryVariables(){return{user_id:this.userId,filters:this.filtersForQuery,cursor:this.data.next_cursor}},filtersForQuery(){return Object.assign({},this.filters,{framework:this.frameworkSelection})},hasEmptyResult(){return this.data&&0===this.data.total},isViewingDefaultOptions(){return null===this.frameworkSelection&&0===this.activeFilterCount},competencyTypeOptions(){return this.types.map(e=>({id:e.id,label:e.name}))},frameworkOptions(){return[{id:null,label:this.$str("filter_framework_all_frameworks","totara_competency")},...this.frameworks.map(e=>({id:e.id,label:e.name}))]},shouldShowLoadMoreButton(){return this.data.items.length>0&&""!==this.data.next_cursor},selectionDescription(){return 1===this.selectedItems.length?this.$str("one_competency_selected","totara_competency",this.selectedItems.length):this.$str("n_competencies_selected","totara_competency",this.selectedItems.length)},buttonText(){return this.isViewingSelections?this.$str("back_to_all_competencies","totara_competency"):this.$str("viewselected","totara_core")}},watch:{frameworkSelection:"applyFilter",filters:{deep:!0,handler:"applyFilter"}},methods:{async viewSelections(){await this.$apollo.queries.data.refetch({user_id:this.userId,filters:{ids:this.selectedItems}}),this.isViewingSelections=!0},async clearSelections(){this.resetFilters(),this.selectedItems=[]},resetFilters(){this.filters=this.$options.data.call(this).filters},showConfirmationModal(){this.isShowingConfirmationModal=!0},async confirmAssignment(){await this.tryAssign(),this.isShowingConfirmationModal=!1},async tryAssign(){this.isSaving=!0;try{const{data:e}=await this.assign();this.isSaving=!1;const t=e.totara_competency_create_user_assignments.length;0===t?this.showErrorNotification():window.location.href=this.$url(this.goBackLink,{assign_success:t})}catch(e){this.showErrorNotification(),this.isSaving=!1}},assign(){return this.$apollo.mutate({mutation:p,variables:{user_id:this.userId,competency_ids:this.selectedItems},refetchAll:!1})},async applyFilter(){const e=await this.$apollo.queries.data.refetch(this.firstPageQueryVariables);return this.isViewingSelections=!1,e},loadMore(){this.$apollo.queries.data.fetchMore({variables:this.subsequentPageQueryVariables,updateQuery:(e,{fetchMoreResult:t})=>{e=e.totara_competency_user_assignable_competencies;const i=t.totara_competency_user_assignable_competencies;return{totara_competency_user_assignable_competencies:{__typename:e.__typename,items:[...e.items,...i.items],total:i.total,next_cursor:i.next_cursor}}}})},showErrorNotification(){Object(T.notify)({message:this.$str("error_generic_mutation","totara_competency"),type:"error"})},selectOrFilter(){this.isViewingSelections?this.applyFilter():this.viewSelections()}},apollo:{data(){return{query:O,variables:this.firstPageQueryVariables,update:({totara_competency_user_assignable_competencies:e})=>e}},user:{query:P.a,variables(){return{user_id:this.userId}},update:e=>e.totara_competency_user,skip(){return this.isMine}}}},M=(i("dNVj"),i("KHd+")),B=function(e){e.options.__langStrings={totara_core:["loadmore","search","viewselected"],totara_hierarchy:["assign","competencyframeworks","competencytypes"],totara_competency:["all","any","assign_competencies","back_to_all_competencies","competencies","confirm_generic","currently_assigned","error_generic_mutation","filter_framework_all_frameworks","filter_competencies","header_assignment_status","n_competencies_selected","no_competency_to_assign","not_assigned","one_competency_selected","view_selected_competencies"]}},E=Object(M.a)(L,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencySelfAssignment"},[i("div",{staticClass:"tui-competencySelfAssignment__header"},[!e.isMine&&e.user?i("MiniProfileCard",{attrs:{display:e.user.card_display}}):e._e(),e._v(" "),i("div",[i("a",{attrs:{href:e.goBackLink}},[e._v("\n        "+e._s(e.goBackText)+"\n      ")])]),e._v(" "),i("PageHeading",{attrs:{title:e.pageHeading}})],1),e._v(" "),i("Grid",{staticClass:"tui-competencySelfAssignment__actions",attrs:{"stack-at":900}},[i("GridItem",{attrs:{units:3}},[e.frameworks.length>1&&!e.isViewingSelections?i("SelectFilter",{attrs:{label:e.$str("competencyframeworks","totara_hierarchy"),"show-label":!1,options:e.frameworkOptions},model:{value:e.frameworkSelection,callback:function(t){e.frameworkSelection=t},expression:"frameworkSelection"}}):e._e()],1),e._v(" "),i("GridItem",{attrs:{units:6}},[i("Basket",{attrs:{items:e.selectedItems,"bulk-actions":e.basketActions},scopedSlots:e._u([{key:"status",fn:function(t){var n=t.empty;return[e.isViewingSelections&&!n?i("ButtonIcon",{attrs:{styleclass:{small:!0},text:e.$str("clearall","totara_core"),"aria-label":e.$str("clearall","totara_core")},on:{click:e.clearSelections}},[i("ClearIcon")],1):e._e()]}},{key:"actions",fn:function(t){return[t.empty?e._e():i("Button",{attrs:{styleclass:{transparent:!0},text:e.buttonText},on:{click:e.selectOrFilter}})]}}])})],1)],1),e._v(" "),i("Grid",{attrs:{"stack-at":900}},[e.isViewingSelections?e._e():i("GridItem",{attrs:{units:3}},[i("FilterSidePanel",{attrs:{title:e.$str("filter_competencies","totara_competency")},on:{"active-count-change":function(t){e.activeFilterCount=t}},model:{value:e.filters,callback:function(t){e.filters=t},expression:"filters"}},[i("SearchFilter",{attrs:{label:e.$str("search","totara_core"),placeholder:e.$str("search","totara_core"),"show-label":!1,stacked:!0},model:{value:e.filters.text,callback:function(t){e.$set(e.filters,"text",t)},expression:"filters.text"}}),e._v(" "),e.types.length>1?i("MultiSelectFilter",{attrs:{title:e.$str("competencytypes","totara_hierarchy"),"show-label":!0,options:e.competencyTypeOptions},model:{value:e.filters.type,callback:function(t){e.$set(e.filters,"type",t)},expression:"filters.type"}}):e._e(),e._v(" "),i("SelectFilter",{attrs:{label:e.$str("header_assignment_status","totara_competency"),"show-label":!0,stacked:!0,options:e.assignmentStatusesOptions},model:{value:e.filters.assignment_status,callback:function(t){e.$set(e.filters,"assignment_status",t)},expression:"filters.assignment_status"}})],1)],1),e._v(" "),i("GridItem",{attrs:{units:9,grows:""}},[i("Loader",{attrs:{loading:e.$apollo.loading}},[e.hasLoadedCompetencies?i("SelectionTable",{attrs:{competencies:e.data.items,"total-competency-count":e.data.total},model:{value:e.selectedItems,callback:function(t){e.selectedItems=t},expression:"selectedItems"}}):i("p"),e._v(" "),e.shouldShowLoadMoreButton?i("Button",{staticClass:"tui-competencySelfAssignment__loadMore",attrs:{text:e.$str("loadmore","totara_core")},on:{click:e.loadMore}}):e._e()],1)],1)],1),e._v(" "),i("ConfirmationModal",{attrs:{title:e.$str("assign_competencies","totara_competency"),open:e.isShowingConfirmationModal,loading:e.isSaving},on:{confirm:e.confirmAssignment,cancel:function(t){e.isShowingConfirmationModal=!1}}},[i("p",[e._v("\n      "+e._s(e.selectionDescription)+"\n    ")]),e._v(" "),i("p",[e._v("\n      "+e._s(e.$str("confirm_generic","totara_competency"))+"\n    ")])])],1)}),[],!1,null,null,null);"function"==typeof B&&B(E),E.options.__hasBlocks={script:!0,template:!0};t.default=E.exports},HZ23:function(e,t){e.exports=tui.require("tui_charts/components/PercentageDoughnut")},HjqD:function(e,t,i){"use strict";var n=i("ZoqZ");i.n(n).a},I1l6:function(e,t,i){},IqB1:function(e,t){e.exports=tui.require("tui/components/collapsible/Collapsible")},IvBL:function(e,t,i){"use strict";i.r(t);var n=i("JThd"),a={components:{CheckSuccess:i.n(n).a},props:{scale:{required:!0,type:Object},showDescriptions:{type:Boolean,default:!1},reverseValues:{type:Boolean,default:!1}},computed:{scaleValues(){return this.reverseValues?this.scale.values.slice(0).reverse():this.scale.values}},methods:{showDescription(e){return this.showDescriptions&&null!=e&&e.length>0}}},s=(i("pFDD"),i("KHd+")),r=function(e){e.options.__langStrings={totara_competency:["is_not_proficient_value","is_proficient_value","rating_scale"]}},o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencyRatingScaleOverview"},[i("p",{staticClass:"tui-competencyRatingScaleOverview__title",attrs:{id:e.$id("rating-scale-title")}},[e._v("\n    "+e._s(e.$str("rating_scale","totara_competency"))+"\n  ")]),e._v(" "),i("ol",{staticClass:"tui-competencyRatingScaleOverview__list",attrs:{"aria-labelledby":e.$id("rating-scale-title")}},e._l(e.scaleValues,(function(t){return i("li",{key:t.id,staticClass:"tui-competencyRatingScaleOverview__list-item"},[i("div",{staticClass:"tui-competencyRatingScaleOverview__proficientStatus"},[t.proficient?i("CheckSuccess",{attrs:{size:"200"}}):e._e()],1),e._v(" "),i("div",{staticClass:"tui-competencyRatingScaleOverview__scaleValue"},[i("p",{staticClass:"tui-competencyRatingScaleOverview__scaleValue-name"},[e._v("\n          "+e._s(t.name)+"\n        ")]),e._v(" "),e.showDescription(t.description)?i("p",{staticClass:"tui-competencyRatingScaleOverview__scaleValue-description",domProps:{innerHTML:e._s(t.description)}}):e._e(),e._v(" "),i("span",{staticClass:"sr-only"},[e._v("\n          "+e._s(t.proficient?e.$str("is_proficient_value","totara_competency"):e.$str("is_not_proficient_value","totara_competency"))+"\n        ")])])])})),0)])}),[],!1,null,null,null);"function"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},J1fj:function(e,t){e.exports=tui.require("tui/components/icons/Clear")},JAtL:function(e,t,i){},JThd:function(e,t){e.exports=tui.require("tui/components/icons/CheckSuccess")},JXQf:function(e,t){e.exports=tui.require("tui/components/loading/Loader")},KDHu:function(e,t,i){},KGot:function(e,t){e.exports=tui.require("tui/components/datatable/Cell")},"KHd+":function(e,t,i){"use strict";function n(e,t,i,n,a,s,r,o){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},l._ssrRegister=c):a&&(c=o?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:e,options:l}}i.d(t,"a",(function(){return n}))},KUeq:function(e,t,i){"use strict";i.r(t);var n=i("fCWf"),a=i.n(n),s=i("zdti"),r=i.n(s),o={components:{ActionLink:a.a,NotificationBanner:r.a},props:{display:{type:Boolean,default:!0},selfAssignmentUrl:{required:!0,type:String},isMine:Boolean,isAssignEnabled:Boolean}},c=(i("acdx"),i("KHd+")),l=function(e){e.options.__langStrings={totara_competency:["assign_competencies","self_assign_competencies","no_competencies_assigned"]}},d=Object(c.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.display?i("div",{staticClass:"tui-noCompetencyAssignments"},[i("NotificationBanner",{attrs:{type:"warning",message:e.$str("no_competencies_assigned","totara_competency")}}),e._v(" "),e.isAssignEnabled?i("div",{staticClass:"tui-noCompetencyAssignments__search-competencies"},[i("ActionLink",{attrs:{href:e.selfAssignmentUrl,text:e.isMine?e.$str("self_assign_competencies","totara_competency"):e.$str("assign_competencies","totara_competency"),styleclass:{primary:!0}}})],1):e._e()],1):e._e()}),[],!1,null,null,null);"function"==typeof l&&l(d),d.options.__hasBlocks={script:!0,template:!0};t.default=d.exports},Lany:function(e,t){e.exports=tui.require("totara_competency/components/details/Assignment")},MhKF:function(e,t){e.exports=tui.require("tui/components/icons/AddUser")},Mnur:function(e,t){e.exports=tui.require("tui/components/modal/ModalPresenter")},NAOU:function(e,t){e.exports=tui.require("tui/components/grid/Grid")},NUDN:function(e,t){e.exports=tui.require("totara_competency/components/profile/CompetencyCharts")},OBdB:function(e,t,i){"use strict";i.r(t);var n=i("59Wj"),a=i.n(n),s=i("49h4"),r=i.n(s),o=i("FBvN"),c=i.n(o),l={components:{FilterBar:a.a,SelectFilter:r.a,SearchFilter:c.a},props:{isForArchived:{required:!0,type:Boolean},defaultFilterValues:{type:Object,default:()=>({search:"",proficient:null})},defaultOrder:{required:!1,type:String,default:"alphabetical"}},data:()=>({filters:{search:"",proficient:null},order:"alphabetical"}),computed:{proficientOptions(){return[{id:null,label:this.$str("all","totara_competency")},{id:!0,label:this.$str("proficient","totara_competency")},{id:!1,label:this.$str("not_proficient","totara_competency")}]},orderOptions(){return[{id:"alphabetical",label:this.$str("sort_alphabetical","totara_competency")},!this.isForArchived&&{id:"recently-assigned",label:this.$str("sort_recently_assigned","totara_competency")},this.isForArchived&&{id:"recently-archived",label:this.$str("sort_recently_archived","totara_competency")}].filter(Boolean)}},watch:{defaultFilters(e){this.filters.search=e.search,this.filters.proficient=e.proficient},defaultOrder(e){this.order=e}},mounted(){this.filters.search=this.defaultFilterValues.search,this.filters.proficient=this.defaultFilterValues.proficient,this.order=this.defaultOrder},methods:{filtersUpdated(){this.$emit("filters-updated",this.filters)},orderUpdated(){this.$emit("order-updated",this.order)}}},d=(i("2z5M"),i("KHd+")),u=function(e){e.options.__langStrings={admin:["filters"],core:["search","sortby"],totara_competency:["proficient","not_proficient","all","sort_alphabetical","sort_recently_archived","sort_recently_assigned","proficiency_status","filter_competencies"]}},m=Object(d.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("FilterBar",{staticClass:"tui-competencyProfileListFilters",attrs:{title:this.$str("filter_competencies","totara_competency")},scopedSlots:e._u([{key:"filters-left",fn:function(t){var n=t.stacked;return[e.isForArchived?e._e():i("SelectFilter",{attrs:{label:e.$str("proficiency_status","totara_competency"),"show-label":!0,options:e.proficientOptions,stacked:n},on:{input:e.filtersUpdated},model:{value:e.filters.proficient,callback:function(t){e.$set(e.filters,"proficient",t)},expression:"filters.proficient"}}),e._v(" "),i("SearchFilter",{attrs:{label:e.$str("search","core"),stacked:n},on:{input:e.filtersUpdated},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})]}},{key:"filters-right",fn:function(t){var n=t.stacked;return[i("SelectFilter",{attrs:{label:e.$str("sortby","core"),"show-label":!0,stacked:n,options:e.orderOptions},on:{input:e.orderUpdated},model:{value:e.order,callback:function(t){e.order=t},expression:"order"}})]}}]),model:{value:e.filters,callback:function(t){e.filters=t},expression:"filters"}})}),[],!1,null,null,null);"function"==typeof u&&u(m),m.options.__hasBlocks={script:!0,template:!0};t.default=m.exports},PNtU:function(e,t){e.exports=tui.require("tui/components/lozenge/Lozenge")},Q2E1:function(e,t){e.exports=tui.require("totara_competency/components/profile/competency_list/ArchivedList")},QPG3:function(e,t){e.exports=tui.require("totara_competency/components/details/ActivityLog")},R6ln:function(e,t){e.exports=tui.require("totara_competency/components/profile/competency_list/CurrentList")},SBbP:function(e,t,i){"use strict";i.r(t);var n=i("7OoD"),a=i.n(n),s=i("59Wj"),r=i.n(s),o=i("JXQf"),c=i.n(o),l=i("49h4"),d=i.n(l),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_activity_log"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filters"}},type:{kind:"NamedType",name:{kind:"Name",value:"totara_competency_activity_log_filters"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_activity_log"},arguments:[{kind:"Argument",name:{kind:"Name",value:"competency_id"},value:{kind:"Variable",name:{kind:"Name",value:"competency_id"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"filters"},value:{kind:"Variable",name:{kind:"Name",value:"filters"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"date"},name:{kind:"Name",value:"timestamp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATELONG"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"datetime"},name:{kind:"Name",value:"timestamp"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATETIMELONG"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient_status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_group_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason_assigned"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignment_action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]},m={components:{ActivityLogTable:a.a,FilterBar:r.a,Loader:c.a,SelectFilter:d.a},props:{userId:{required:!0,type:Number},competencyId:{required:!0,type:Number}},data:function(){return{log:[],assignments:[],assignmentFilter:0}},apollo:{log:{query:u,variables(){return{user_id:this.userId,competency_id:this.competencyId,filters:this.selectedFilter}},update({totara_competency_activity_log:e}){return this.assignments=this.refreshAssignmentList(e),e}}},computed:{selectedFilter(){return this.assignmentFilter?{assignment_id:this.assignmentFilter}:{}}},methods:{refreshAssignmentList(e){let t={};return e.forEach(e=>{null!=e.assignment&&(t[e.assignment.id]={id:e.assignment.id,label:this.getFilterLabel(e)})}),t=Object.values(t),t.length>=this.assignments.length?(t.unshift({label:this.$str("all","core"),id:0}),t):this.assignments},getFilterLabel(e){let t=e.assignment.progress_name;if(this.isDirectlyAssigned(e.assignment)){let i={progress_name:e.assignment.progress_name,user_fullname_role:e.assignment.reason_assigned};t=this.$str("progress_name_by_user","totara_competency",i)}return t},isDirectlyAssigned:e=>"user"===e.user_group_type&&("admin"===e.type||"other"===e.type)}},p=(i("Y2OC"),i("KHd+")),_=function(e){e.options.__langStrings={core:["all"],totara_competency:["activity_log","activity_log_filter","assignment","progress_name_by_user"]}},v=Object(p.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencyDetailActivityLog"},[i("h4",{staticClass:"tui-competencyDetailActivityLog__title"},[e._v("\n    "+e._s(e.$str("activity_log","totara_competency"))+"\n  ")]),e._v(" "),e.assignments.length>1?i("FilterBar",{attrs:{title:e.$str("activity_log_filter","totara_competency")},scopedSlots:e._u([{key:"filters-left",fn:function(){return[i("SelectFilter",{attrs:{label:e.$str("assignment","totara_competency"),name:"activity_log_select",options:e.assignments,"show-label":!0,stacked:!1},model:{value:e.assignmentFilter,callback:function(t){e.assignmentFilter=t},expression:"assignmentFilter"}})]},proxy:!0}],null,!1,3296399798)}):e._e(),e._v(" "),i("Loader",{attrs:{loading:e.$apollo.loading}},[i("ActivityLogTable",{attrs:{log:e.log}})],1)],1)}),[],!1,null,null,null);"function"==typeof _&&_(v),v.options.__hasBlocks={script:!0,template:!0};t.default=v.exports},ShU0:function(e,t,i){"use strict";i.r(t);var n=i("Zoit"),a=i.n(n),s=i("IqB1"),r=i.n(s),o=i("PNtU"),c=i.n(o),l=i("k7/G"),d=i.n(l),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_scale_achievements"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignment_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_scale_achievements"},arguments:[{kind:"Argument",name:{kind:"Name",value:"assignment_id"},value:{kind:"Variable",name:{kind:"Name",value:"assignment_id"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"scale_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numericscore"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"achieved"},name:{kind:"Name",value:"has_scale_value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"date_achieved"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"pathway"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"instance_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pathway_type"},arguments:[],directives:[]}]}}]}}]}}]}}]},m={components:{AchievementLayout:a.a,Collapsible:r.a,Lozenge:c.a,OrBox:d.a},inheritAttrs:!1,props:{userId:{required:!0,type:Number},assignmentId:{required:!0,type:Number},type:String},data:function(){return{achievements:[],achievementComponents:[],itemsLoaded:0}},apollo:{achievements:{query:u,context:{batch:!0},variables(){return{assignment_id:this.assignmentId,user_id:this.userId}},update({totara_competency_scale_achievements:e}){let t=[],i=0;return e.forEach(e=>{let n={achieved:!1,items:[],scale_value:e.scale_value};e.items.forEach(e=>{let t=`pathway_${e.pathway.pathway_type}/components/achievements/AchievementDisplay`;i+=1,n.items.push({component:tui.asyncComponent(t),props:{assignmentId:this.assignmentId,instanceId:parseInt(e.pathway.instance_id),userId:this.userId,dateAchieved:e.date_achieved}}),e.achieved&&(n.achieved=!0)}),0===i&&this.$emit("loaded"),t.push(n)}),t}}},computed:{numberOfItems(){return this.achievements?this.achievements.reduce((function(e,t){return e+t.items.length}),0):0}},watch:{itemsLoaded:function(e){e===this.numberOfItems&&this.$emit("loaded")}},methods:{isLastItem:(e,t)=>e===t.length-1,itemLoaded(){this.itemsLoaded+=1}}},p=(i("TV6p"),i("KHd+")),_=function(e){e.options.__langStrings={totara_competency:["criteria_fulfilled","work_towards_level"]}},v=Object(p.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencyAchievementsScale"},e._l(e.achievements,(function(t,n){return i("div",{key:n},[i("Collapsible",{attrs:{"always-render":!0,"initial-state":!t.achieved,label:e.$str("work_towards_level","totara_competency")},scopedSlots:e._u([{key:"label-extra",fn:function(){return[i("span",{staticClass:"tui-competencyAchievementsScale__title"},[e._v("\n          "+e._s(t.scale_value.name)+"\n        ")])]},proxy:!0},t.achieved?{key:"collapsible-side-content",fn:function(){return[i("Lozenge",{attrs:{text:e.$str("criteria_fulfilled","totara_competency"),type:"success"}})]},proxy:!0}:null,{key:"default",fn:function(n){var a=n.expanded;return[e._l(t.items,(function(n,s){return[i("div",{key:s,class:"tui-competencyAchievementsScale__item"},[i(n.component,e._b({tag:"component",attrs:{displayed:a},on:{loaded:e.itemLoaded}},"component",n.props,!1))],1),e._v(" "),e.isLastItem(s,t.items)?e._e():i("div",{key:s+"orseparator",staticClass:"tui-competencyAchievementsScale__separator"},[i("AchievementLayout",{attrs:{"no-borders":!0},scopedSlots:e._u([{key:"left",fn:function(){return[i("OrBox")]},proxy:!0}],null,!0)})],1)]}))]}}],null,!0)})],1)})),0)}),[],!1,null,null,null);"function"==typeof _&&_(v),v.options.__hasBlocks={script:!0,template:!0};t.default=v.exports},Sn4P:function(e,t){e.exports=tui.require("totara_competency/components/achievements/Achievements")},TV6p:function(e,t,i){"use strict";var n=i("nRyV");i.n(n).a},TXEh:function(e,t){e.exports=tui.require("tui/util")},"Tz/z":function(e,t,i){"use strict";i.r(t);var n=i("NAOU"),a=i.n(n),s=i("D9If"),r=i.n(s),o=i("dtfu"),c=i.n(o),l=i("yuC0"),d=i.n(l),u={components:{Grid:a.a,GridItem:r.a,Responsive:c.a,IndividualAssignmentProgress:d.a},props:{data:{required:!0,type:Object},userId:{type:Number,required:!0},isCurrentUser:{type:Boolean,required:!0}}},m=(i("cfoa"),i("KHd+")),p=Object(m.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Responsive",{attrs:{breakpoints:[{name:"small",boundaries:[0,1330]},{name:null,boundaries:[1331,1331]}]},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.currentBoundaryName;return[e.data.items&&e.data.items.length>0?i("Grid",{attrs:{"stack-at":1329}},e._l(e.data.items,(function(t,a){return i("GridItem",{key:a+t.name+t.overall_progress,attrs:{units:6}},[i("div",{staticClass:"tui-competencyCharts__chart",class:{"tui-competencyCharts__chart--center":"small"==n}},[i("IndividualAssignmentProgress",{attrs:{"assignment-progress":t,"user-id":e.userId,"is-current-user":e.isCurrentUser}})],1)])})),1):e._e()]}}])})}),[],!1,null,null,null);p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},"UW6/":function(e,t,i){"use strict";i.r(t);var n=i("yikf"),a=i.n(n),s=i("5qAA"),r=i.n(s),o=i("KGot"),c=i.n(o),l=i("JThd"),d=i.n(l),u=i("8n92"),m=i.n(u),p={components:{Table:a.a,HeaderCell:r.a,Cell:c.a,CheckIcon:d.a,MyRatingCell:m.a},props:{competencies:{required:!0,type:Array},baseUrl:{required:!0,type:String},userId:{required:!0,type:Number},scales:{required:!0,type:Array}},methods:{competencyDetailsLink(e){const t={competency_id:e.competency.id};return this.isMine||(t.user_id=this.userId),this.$url(this.baseUrl+"/details/index.php",t)}}},_=i("KHd+"),v=function(e){e.options.__langStrings={core:["no","yes"],totara_competency:["achievement_level","header_competency","proficient"]}},y=Object(_.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Table",{attrs:{data:e.competencies},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"10"}},[e._v("\n      "+e._s(e.$str("header_competency","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",align:"center"}},[e._v("\n      "+e._s(e.$str("proficient","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v("\n      "+e._s(e.$str("achievement_level","totara_competency"))+"\n    ")])]},proxy:!0},{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"10","column-header":e.$str("header_competency","totara_competency")}},[i("a",{attrs:{href:e.competencyDetailsLink(n)}},[e._v(e._s(n.competency.fullname))])]),e._v(" "),i("Cell",{attrs:{size:"2",align:"center","column-header":e.$str("proficient","totara_competency")}},[n.items[0].my_value&&n.items[0].my_value.proficient?i("CheckIcon",{attrs:{size:"200",alt:e.$str("yes","core")}}):i("span",[i("span",{attrs:{"aria-hidden":!0}},[e._v("-")]),e._v(" "),i("span",{staticClass:"sr-only"},[e._v(e._s(e.$str("no","core")))])])],1),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("achievement_level","totara_competency")}},[n.items[0].my_value?i("MyRatingCell",{attrs:{value:n.items[0].my_value,scales:e.scales}}):e._e()],1)]}}])})}),[],!1,null,null,null);"function"==typeof v&&v(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},UjaO:function(e,t){e.exports=tui.require("tui/components/icons/Archive")},VFXp:function(e,t,i){"use strict";i.r(t);var n=i("49h4"),a={components:{SelectFilter:i.n(n).a},props:{filters:{type:Array,required:!0},value:{type:Object,required:!0},disable:{type:Boolean,default:!1}},computed:{displayFilters(){return!(1===this.filters.length&&1===this.filters[0].status)},filterOptions(){const e=[];return this.filters.forEach(t=>{e.push({name:t.name,id:t.id,value:t.value}),t.filters.forEach(t=>e.push(Object.assign({},t,{name:"   "+t.name})))}),e}},methods:{toggle(){this.open=!this.open},filterUpdated(e){const t=this.filterOptions.find(t=>t.id==e);this.$emit("input",t&&t.value)}}},s=i("KHd+"),r=function(e){e.options.__langStrings={totara_competency:["filter_viewing_by_assignment","viewing_by_assignment"]}},o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{staticClass:"sr-only"},[e._v("\n    "+e._s(e.$str("filter_viewing_by_assignment","totara_competency"))+"\n  ")]),e._v(" "),e.displayFilters?i("SelectFilter",{attrs:{"show-label":!0,label:e.$str("viewing_by_assignment","totara_competency"),options:e.filterOptions.map((function(e){return{id:e.id,label:e.name}})),disabled:e.disable,value:e.value&&e.value.key},on:{input:e.filterUpdated}}):e._e()],1)}),[],!1,null,null,null);"function"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},Vpbp:function(e,t){e.exports=tui.require("totara_competency/components/profile/competency_list/List")},"W+j5":function(e,t,i){var n={"./AssignmentProgress":"YCS+","./AssignmentProgress.vue":"YCS+","./IndividualAssignmentProgress":"8QXL","./IndividualAssignmentProgress.vue":"8QXL","./ProgressAssignmentFilters":"VFXp","./ProgressAssignmentFilters.vue":"VFXp","./RatingScaleOverview":"IvBL","./RatingScaleOverview.vue":"IvBL","./achievements/AchievementLayout":"tVAA","./achievements/AchievementLayout.vue":"tVAA","./achievements/Achievements":"nMuw","./achievements/Achievements.vue":"nMuw","./achievements/Multivalue":"lTsS","./achievements/Multivalue.vue":"lTsS","./achievements/ProgressCircle":"+d5V","./achievements/ProgressCircle.vue":"+d5V","./achievements/Singlevalue":"ShU0","./achievements/Singlevalue.vue":"ShU0","./details/ActivityLog":"SBbP","./details/ActivityLog.vue":"SBbP","./details/ActivityLogTable":"/NCw","./details/ActivityLogTable.vue":"/NCw","./details/ArchivedAssignments":"7rD8","./details/ArchivedAssignments.vue":"7rD8","./details/ArchivedAssignmentsTable":"xs84","./details/ArchivedAssignmentsTable.vue":"xs84","./details/Assignment":"ouCZ","./details/Assignment.vue":"ouCZ","./details/ProficientStatus":"hOV+","./details/ProficientStatus.vue":"hOV+","./details/Progress":"hNaK","./details/Progress.vue":"hNaK","./profile/CompetencyCharts":"Tz/z","./profile/CompetencyCharts.vue":"Tz/z","./profile/CurrentProgress":"8Lk7","./profile/CurrentProgress.vue":"8Lk7","./profile/MyRatingCell":"gls+","./profile/MyRatingCell.vue":"gls+","./profile/NoCompetencyAssignments":"KUeq","./profile/NoCompetencyAssignments.vue":"KUeq","./profile/competency_list/ArchivedList":"aFZt","./profile/competency_list/ArchivedList.vue":"aFZt","./profile/competency_list/CurrentList":"UW6/","./profile/competency_list/CurrentList.vue":"UW6/","./profile/competency_list/Filters":"OBdB","./profile/competency_list/Filters.vue":"OBdB","./profile/competency_list/List":"+KnN","./profile/competency_list/List.vue":"+KnN","./summary/AchievementConfiguration":"3WCR","./summary/AchievementConfiguration.vue":"3WCR","./summary/AchievementConfigurationCriteria":"grF1","./summary/AchievementConfigurationCriteria.vue":"grF1","./summary/CompetencySummaryGeneral":"XHOO","./summary/CompetencySummaryGeneral.vue":"XHOO","./summary/LinkedCourses":"hgKs","./summary/LinkedCourses.vue":"hgKs","./user_assignment/SelectionTable":"h23i","./user_assignment/SelectionTable.vue":"h23i"};function a(e){var t=s(e);return i(t)}function s(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="W+j5"},We4D:function(e,t,i){},XHOO:function(e,t,i){"use strict";i.r(t);var n=i("KGot"),a=i.n(n),s=i("rNse"),r=i.n(s),o=i("yikf"),c=i.n(o),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_competency"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_competency"},arguments:[{kind:"Argument",name:{kind:"Name",value:"competency_id"},value:{kind:"Variable",name:{kind:"Name",value:"competency_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"framework"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"display_name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assign_availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"aggregation_method"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_custom_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}}]}}]},d={components:{Cell:a.a,EditIcon:r.a,Table:c.a},props:{competencyId:{type:Number,required:!0}},data:()=>({competency:{},editUrl:""}),computed:{rows(){let e=[{label:this.$str("fullname","totara_competency"),value:this.competency.display_name},{label:this.$str("idnumber","totara_competency"),value:this.competency.idnumber},{label:this.$str("description","totara_competency"),value:this.competency.description},{label:this.$str("type","totara_competency"),value:!!this.competency.type&&this.competency.type.display_name},{label:this.$str("aggregationmethod","totara_hierarchy"),value:this.aggregationMethodName},{label:this.$str("assignment_creation_availability","totara_competency"),values:this.assignAvailabilityNames,value:!1}];return this.competency.display_custom_fields&&this.competency.display_custom_fields.forEach(t=>{e.push({label:t.title,value:t.value})}),e=e.filter((function(e){return e.value||e.values})),e},assignAvailabilityNames(){if(!this.competency.assign_availability||!this.competency.assign_availability.length>0)return!1;let e=[];return this.competency.assign_availability.forEach(t=>{e.push(this.$str(1===t?"competency_assign_availability_self_simple":"competency_assign_availability_other_simple","totara_competency"))}),e},aggregationMethodName(){if(!this.competency.aggregation_method)return!1;let e=1===this.competency.aggregation_method?"all":2===this.competency.aggregation_method?"any":"off";return this.$str(e,"totara_competency")}},apollo:{competency:{query:l,variables(){return{competency_id:this.competencyId}},update({totara_competency_competency:e}){return this.editUrl=this.$url("/totara/hierarchy/item/edit.php",{prefix:"competency",id:e.id}),e}}}},u=i("KHd+"),m=function(e){e.options.__langStrings={core:["edit","general"],totara_competency:["all","any","assignment_creation_availability","competency_assign_availability_self_simple","competency_assign_availability_other_simple","description","fullname","idnumber","off","type"],totara_hierarchy:["aggregationmethod"]}},p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.$apollo.loading?e._e():i("div",{staticClass:"tui-competencySummaryGeneral"},[i("div",{staticClass:"tui-competencySummary__sectionHeader"},[i("h3",{staticClass:"tui-competencySummary__sectionHeader-title"},[e._v("\n      "+e._s(e.$str("general","core"))+"\n    ")]),e._v(" "),i("a",{staticClass:"tui-competencySummary__sectionHeader-edit",attrs:{href:e.editUrl,title:e.$str("edit","core")}},[i("EditIcon",{attrs:{size:200,alt:e.$str("edit","core")}})],1)]),e._v(" "),i("Table",{attrs:{data:e.rows,"border-bottom-hidden":!0,"border-top-hidden":!0,"border-separator-hidden":!0,"hover-off":!0},scopedSlots:e._u([{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"6",heavy:!0}},[i("div",{staticClass:"tui-competencySummaryGeneral__list-label",attrs:{role:"rowheader"}},[e._v("\n          "+e._s(n.label)+"\n        ")])]),e._v(" "),i("Cell",{attrs:{size:"10"}},[i("div",{staticClass:"tui-competencySummaryGeneral__list-value",attrs:{role:"cell"}},[n.values?e._l(n.values,(function(t,n){return i("div",{key:"general"+n},[e._v("\n              "+e._s(t)+"\n            ")])})):i("div",{domProps:{innerHTML:e._s(n.value)}})],2)])]}}],null,!1,3145416524)})],1)}),[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},Y2OC:function(e,t,i){"use strict";var n=i("lABG");i.n(n).a},"YCS+":function(e,t,i){"use strict";i.r(t);var n=i("HZ23"),a=i.n(n),s=i("i3se"),r=i.n(s),o={components:{PercentageDoughnut:a.a},props:{progress:{required:!0,type:Object}},computed:{color:()=>r.a.getVar("--color-secondary"),backgroundColor:()=>r.a.getVar("--color-neutral-4"),labelColor:()=>r.a.getVar("--color-text")}},c=(i("DZZz"),i("KHd+")),l=function(e){e.options.__langStrings={totara_competency:["chart_label_proficient"]}},d=Object(c.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-assignmentProgress"},[i("PercentageDoughnut",{staticClass:"tui-assignmentProgress__progress-card",attrs:{percentage:e.progress.overall_progress,label:e.$str("chart_label_proficient","totara_competency"),"label-font-size":13,"label-font-weight":"bold","percentage-font-size":24,square:!0,"label-color":e.labelColor,color:e.color,"background-color":e.backgroundColor}}),e._v(" "),i("div",{staticClass:"tui-assignmentProgress__header"},[e._v("\n    "+e._s(e.progress.name)+"\n  ")])],1)}),[],!1,null,null,null);"function"==typeof l&&l(d),d.options.__hasBlocks={script:!0,template:!0};t.default=d.exports},YDfs:function(e,t,i){"use strict";var n=i("DGVr");i.n(n).a},Ygam:function(e,t){e.exports=tui.require("totara_competency/components/details/ArchivedAssignmentsTable")},Yoo0:function(e,t){e.exports=tui.require("totara_competency/components/profile/CurrentProgress")},Zoit:function(e,t){e.exports=tui.require("totara_competency/components/achievements/AchievementLayout")},ZoqZ:function(e,t,i){},aFZt:function(e,t,i){"use strict";i.r(t);var n=i("yikf"),a=i.n(n),s=i("5qAA"),r=i.n(s),o=i("KGot"),c=i.n(o),l=i("8n92"),d=i.n(l),u={components:{Table:a.a,HeaderCell:r.a,Cell:c.a,MyRatingCell:d.a},props:{competencies:{required:!0,type:Array},baseUrl:{required:!0,type:String},userId:{required:!0,type:Number},scales:{required:!0,type:Array}},computed:{groupedCompetencyData(){return this.competencies.map(e=>({id:e.competency.id,rows:e.items.map(t=>Object.assign({competency:e.competency},t))}))}},methods:{competencyDetailsLink(e){const t={competency_id:e.competency.id};return this.isMine||(t.user_id=this.userId),this.$url(this.baseUrl+"/details/index.php",t)}}},m=i("KHd+"),p=function(e){e.options.__langStrings={core:["no","yes"],totara_competency:["header_competency","header_reason_assigned","header_archived_date","proficient","achievement_level"]}},_=Object(m.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Table",{attrs:{data:e.groupedCompetencyData,"group-mode":!0,archived:!0},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"3"}},[e._v("\n      "+e._s(e.$str("header_competency","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("header_reason_assigned","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("header_archived_date","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2",align:"center"}},[e._v("\n      "+e._s(e.$str("proficient","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"2"}},[e._v("\n      "+e._s(e.$str("achievement_level","totara_competency"))+"\n    ")])]},proxy:!0},{key:"row",fn:function(t){var n=t.row,a=t.firstInGroup;return[i("Cell",{attrs:{size:"3","column-header":e.$str("header_competency","totara_competency"),"repeated-header":!a}},[i("a",{attrs:{href:e.competencyDetailsLink(n)}},[e._v(e._s(n.competency.fullname))])]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("header_reason_assigned","totara_competency")}},[e._v("\n      "+e._s(n.assignment&&n.assignment.progress_name)+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("header_archived_date","totara_competency")}},[e._v("\n      "+e._s(n.assignment&&(n.assignment.archived_at||n.assignment.unassigned_at))+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"2",align:"center","column-header":e.$str("proficient","totara_competency")}},[n.proficient?i("CheckIcon",{attrs:{size:"200",alt:e.$str("yes","core")}}):i("span",[i("span",{attrs:{"aria-hidden":!0}},[e._v("-")]),e._v(" "),i("span",{staticClass:"sr-only"},[e._v(e._s(e.$str("no","core")))])])],1),e._v(" "),i("Cell",{attrs:{size:"2","column-header":e.$str("achievement_level","totara_competency")}},[n.my_value?i("MyRatingCell",{attrs:{value:n.my_value,scales:e.scales}}):e._e()],1)]}}])})}),[],!1,null,null,null);"function"==typeof p&&p(_),_.options.__hasBlocks={script:!0,template:!0};t.default=_.exports},acdx:function(e,t,i){"use strict";var n=i("3gXZ");i.n(n).a},b5Rx:function(e,t,i){},bAb2:function(e,t){e.exports=tui.require("totara_competency/components/summary/CompetencySummaryGeneral")},bxeI:function(e,t){e.exports=tui.require("tui/components/layouts/LayoutOneColumn")},cfoa:function(e,t,i){"use strict";var n=i("3qNn");i.n(n).a},dNVj:function(e,t,i){"use strict";var n=i("ne8U");i.n(n).a},dtfu:function(e,t){e.exports=tui.require("tui/components/responsive/Responsive")},e3MU:function(e,t){e.exports=tui.require("tui/components/buttons/InfoIconButton")},e7qB:function(e,t,i){},eS4Y:function(e,t,i){"use strict";var n=i("I1l6");i.n(n).a},epks:function(e,t){e.exports=tui.require("totara_competency/components/profile/NoCompetencyAssignments")},fCWf:function(e,t){e.exports=tui.require("tui/components/links/ActionLink")},fCaH:function(e,t,i){"use strict";var n=i("tEJh");i.n(n).a},"g8/U":function(e,t){e.exports=tui.require("tui/components/layouts/PageHeading")},gXO8:function(e,t,i){},"gls+":function(e,t,i){"use strict";i.r(t);var n=i("vF5l"),a=i.n(n),s=i("9G+f"),r=i.n(s),o=i("pHFC"),c=i.n(o),l={components:{Button:a.a,Popover:r.a,RatingScaleOverview:c.a},props:{value:{required:!0,type:Object},scales:{required:!0,type:Array}},computed:{scale(){return this.scales.find(({id:e})=>e===this.value.scale_id)}}},d=i("KHd+"),u=Object(d.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.scale?i("Popover",{attrs:{triggers:["click"]},scopedSlots:e._u([{key:"trigger",fn:function(){return[i("Button",{attrs:{styleclass:{reveal:!0},text:e.value.name}})]},proxy:!0}],null,!1,504032633)},[e._v(" "),i("RatingScaleOverview",{attrs:{scale:e.scale,"reverse-values":!0}})],1):e._e()}),[],!1,null,null,null);u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},gqVV:function(e,t,i){"use strict";t.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_profile_competency_details"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_profile_competency_details"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}},{kind:"Argument",name:{kind:"Name",value:"competency_id"},value:{kind:"Variable",name:{kind:"Name",value:"competency_id"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"competency"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"archived_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"created_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user_group_type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"progress_name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reason_assigned"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"can_archive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_assigned"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"unassigned_at"},arguments:[{kind:"Argument",name:{kind:"Name",value:"format"},value:{kind:"EnumValue",value:"DATE"}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"my_value"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"percentage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]}]}}]}}]}}]}}]}},grF1:function(e,t,i){"use strict";i.r(t);var n=i("o0O/"),a=i.n(n),s=i("jJ8l"),r=i.n(s),o=i("BxDI"),c=i.n(o),l=i("lLj0"),d=i.n(l),u={components:{AndBox:a.a,Card:r.a,Separator:c.a,WarningIcon:d.a},props:{path:{type:Object}}},m=(i("iy/T"),i("KHd+")),p=Object(m.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Card",{attrs:{"no-border":!e.path.multiCriteria}},[i("div",{staticClass:"tui-competencySummaryAchievementCriteria",class:{"tui-competencySummaryAchievementCriteria--multi":e.path.multiCriteria}},[e._l(e.path.criteria_summary,(function(t,n){return[n?i("Separator",{key:n+"and",staticClass:"tui-competencySummaryAchievementCriteria__and"},[i("AndBox")],1):e._e(),e._v(" "),i("div",{key:n,staticClass:"tui-competencySummaryAchievementCriteria__criterion"},[i("div",[i("h5",{staticClass:"tui-competencySummaryAchievementCriteria__criterion-header"},[e._v("\n            "+e._s(t.item_type)+"\n          ")]),e._v(" "),t.item_aggregation?i("span",{staticClass:"tui-competencySummaryAchievementCriteria__criterion-aggregation"},[e._v("\n            ("+e._s(t.item_aggregation)+")\n          ")]):e._e()]),e._v(" "),i("div",{staticClass:"tui-competencySummaryAchievementCriteria__criterion-items"},e._l(t.items,(function(t,n){return i("div",{key:n},[e._v("\n            "+e._s(t.description)+"\n            "),t.error?i("span",[i("WarningIcon",{attrs:{size:200}}),e._v("\n              "+e._s(t.error)+"\n            ")],1):e._e()])})),0)])]}))],2)])}),[],!1,null,null,null);p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},h23i:function(e,t,i){"use strict";i.r(t);var n=i("KGot"),a=i.n(n),s=i("rsf9"),r=i.n(s),o=i("5qAA"),c=i.n(o),l=i("mURQ"),d=i.n(l),u={components:{Cell:a.a,ExpandCell:r.a,HeaderCell:c.a,SelectTable:d.a},props:{value:{type:Array,required:!0},competencies:{type:Array,required:!0},totalCompetencyCount:{type:Number,required:!0}},data:()=>({page:0}),methods:{getAssignmentStatus(e){return this.isAssigned(e)?this.$str("currently_assigned","totara_competency"):this.$str("not_assigned","totara_competency")},isAssigned:e=>Boolean(e.user_assignments)&&e.user_assignments.length>0}},m=(i("BbQS"),i("KHd+")),p=function(e){e.options.__langStrings={totara_competency:["all","competencies","currently_assigned","description","competencies","header_competency","header_assignment_status","header_assignment_reasons","not_assigned"]}},_=Object(m.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencySelfAssignmentTable"},[i("h3",{staticClass:"tui-competencySelfAssignmentTable__header"},[e._v("\n    "+e._s(e.$str("competencies","totara_competency",e.totalCompetencyCount))+"\n  ")]),e._v(" "),i("SelectTable",{attrs:{value:e.value,data:e.competencies,"expandable-rows":!0,"select-all-enabled":!0,"checkbox-v-align":"center"},on:{input:function(t){return e.$emit("input",t)}},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("ExpandCell",{attrs:{header:!0}}),e._v(" "),i("HeaderCell",{attrs:{size:"4"}},[e._v("\n        "+e._s(e.$str("header_competency","totara_competency"))+"\n      ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4"}},[e._v("\n        "+e._s(e.$str("header_assignment_status","totara_competency"))+"\n      ")]),e._v(" "),i("HeaderCell",{attrs:{size:"4"}},[e._v("\n        "+e._s(e.$str("header_assignment_reasons","totara_competency"))+"\n      ")])]},proxy:!0},{key:"row",fn:function(t){var n=t.row,a=t.expand,s=t.expandState;return[i("ExpandCell",{attrs:{"aria-label":n.display_name,empty:!n.description,"expand-state":s},on:{click:function(e){return a()}}}),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("header_competency","totara_competency"),valign:"center"}},[e._v("\n        "+e._s(n.display_name)+"\n      ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":e.$str("header_assignment_status","totara_competency"),valign:"center"}},[e._v("\n        "+e._s(e.getAssignmentStatus(n))+"\n      ")]),e._v(" "),i("Cell",{attrs:{size:"4","column-header":n.user_assignments.length>0?e.$str("header_assignment_reasons","totara_competency"):"",valign:"center"}},[i("ul",{staticClass:"tui-competencySelfAssignmentTable__reasons"},e._l(n.user_assignments,(function(t){return i("li",{key:t.id},[e._v("\n            "+e._s(t.reason_assigned)+"\n          ")])})),0)])]}},{key:"expand-content",fn:function(t){var n=t.row;return[i("div",{staticClass:"tui-competencySelfAssignmentTable__expand"},[i("h4",{staticClass:"tui-competencySelfAssignmentTable__expand-header"},[e._v("\n          "+e._s(n.display_name)+"\n        ")]),e._v(" "),i("h5",{staticClass:"tui-competencySelfAssignmentTable__expand-subHeader"},[e._v("\n          "+e._s(e.$str("description","totara_competency"))+"\n        ")]),e._v(" "),i("div",{domProps:{innerHTML:e._s(n.description)}})])]}}])})],1)}),[],!1,null,null,null);"function"==typeof p&&p(_),_.options.__hasBlocks={script:!0,template:!0};t.default=_.exports},hNaK:function(e,t,i){"use strict";i.r(t);var n=i("PNtU"),a=i.n(n),s=i("2zrd"),r=i.n(s),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_scale"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_id"}},type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_scale"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"competency_id"},value:{kind:"Variable",name:{kind:"Name",value:"competency_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"defaultid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"values"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"idnumber"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"scaleid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numericscore"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sortorder"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"proficient"},arguments:[],directives:[]}]}}]}}]}}]},c={components:{Lozenge:a.a,ProgressTracker:r.a},props:{myValue:{type:[Number,String]},competencyId:{required:!0,type:Number}},data:function(){return{scale:{}}},apollo:{scale:{query:o,context:{batch:!0},variables(){return{competency_id:this.competencyId}},update({totara_competency_scale:e}){return this.$emit("loaded"),e}}},computed:{minProficientValueId(){return this.scale.values?this.scale.values.find(({proficient:e})=>e).id:null},formattedForTracker(){return this.scale.values?this.scale.values.map((function(e){return{description:e.description,id:e.id,label:e.name}})):[]}}},l=(i("4Zth"),i("KHd+")),d=function(e){e.options.__langStrings={totara_competency:["no_description","proficient_level"]}},u=Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencyDetailProgress"},[i("ProgressTracker",{attrs:{items:e.formattedForTracker,"current-id":e.myValue,"popover-trigger-type":["click"],"target-id":e.minProficientValueId},scopedSlots:e._u([{key:"custom-popover-content",fn:function(t){var n=t.description,a=t.label,s=t.target;return[i("div",{staticClass:"tui-competencyDetailProgress__popover"},[s?i("div",{staticClass:"tui-competencyDetailProgress__popover-target"},[i("Lozenge",{attrs:{text:e.$str("proficient_level","totara_competency"),type:"success"}})],1):e._e(),e._v(" "),i("h5",{staticClass:"tui-competencyDetailProgress__popover-header"},[e._v("\n          "+e._s(a)+"\n        ")]),e._v(" "),n?i("div",{staticClass:"tui-competencyDetailProgress__popover-body",domProps:{innerHTML:e._s(n)}}):i("div",{staticClass:"tui-competencyDetailProgress__popover-body"},[e._v("\n          "+e._s(e.$str("no_description","totara_competency"))+"\n        ")])])]}}])})],1)}),[],!1,null,null,null);"function"==typeof d&&d(u),u.options.__hasBlocks={script:!0,template:!0};t.default=u.exports},"hOV+":function(e,t,i){"use strict";i.r(t);var n=i("JThd"),a={components:{ProficientIcon:i.n(n).a},props:{proficientStatus:{type:Boolean,required:!0}}},s=(i("vdX2"),i("KHd+")),r=function(e){e.options.__langStrings={totara_competency:["not_proficient","proficient"]}},o=Object(s.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"tui-competencyDetailProficientStatus",class:{"tui-competencyDetailProficientStatus-srOnly":!e.proficientStatus}},[e.proficientStatus?i("ProficientIcon",{attrs:{size:"200"}}):e._e(),e._v(" "),i("span",[e._v("\n    "+e._s(e.$str(e.proficientStatus?"proficient":"not_proficient","totara_competency"))+"\n  ")])],1)}),[],!1,null,null,null);"function"==typeof r&&r(o),o.options.__hasBlocks={script:!0,template:!0};t.default=o.exports},hgKs:function(e,t,i){"use strict";i.r(t);var n=i("KGot"),a=i.n(n),s=i("rNse"),r=i.n(s),o=i("yikf"),c=i.n(o),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_linked_courses"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"competency_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_linked_courses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"competency_id"},value:{kind:"Variable",name:{kind:"Name",value:"competency_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course_id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_mandatory"},arguments:[],directives:[]}]}}]}}]},d={components:{Cell:a.a,EditIcon:r.a,Table:c.a},props:{competencyId:{required:!0,type:Number}},data:function(){return{data:[],editUrl:""}},apollo:{data:{query:l,variables(){return{competency_id:this.competencyId}},update({totara_competency_linked_courses:e}){return this.editUrl=this.$url("/totara/competency/competency_edit.php",{s:"linkedcourses",id:this.competencyId}),e}}},methods:{courseUrl(e){return this.$url("/course/view.php",{id:e})}}},u=i("KHd+"),m=function(e){e.options.__langStrings={core:["edit"],totara_competency:["linked_courses","mandatory","no_courses_linked_yet","optional"]}},p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencyOverviewLinkedCourses"},[i("div",{staticClass:"tui-competencySummary__sectionHeader"},[i("h3",{staticClass:"tui-competencySummary__sectionHeader-title"},[e._v("\n      "+e._s(e.$str("linked_courses","totara_competency"))+"\n    ")]),e._v(" "),i("a",{staticClass:"tui-competencySummary__sectionHeader-edit",attrs:{href:e.editUrl,title:e.$str("edit","core")}},[i("EditIcon",{attrs:{size:200,alt:e.$str("edit","core")}})],1)]),e._v(" "),i("Table",{attrs:{data:e.data,"border-bottom-hidden":!0,"border-top-hidden":!0,"border-separator-hidden":!0,"hover-off":!0,"no-items-text":e.$str("no_courses_linked_yet","totara_competency")},scopedSlots:e._u([{key:"row",fn:function(t){var n=t.row;return[i("Cell",{attrs:{size:"6",valign:"center"}},[i("a",{attrs:{href:e.courseUrl(n.course_id)}},[e._v("\n          "+e._s(n.fullname)+"\n        ")])]),e._v(" "),i("Cell",{attrs:{size:"10",valign:"center"}},[i("span",[e._v("\n          "+e._s(e.$str(n.is_mandatory?"mandatory":"optional","totara_competency"))+"\n        ")])])]}}])})],1)}),[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},i3se:function(e,t){e.exports=tui.require("tui/theme")},"iy/T":function(e,t,i){"use strict";var n=i("qHIe");i.n(n).a},jJ8l:function(e,t){e.exports=tui.require("tui/components/card/Card")},"k7/G":function(e,t){e.exports=tui.require("tui/components/decor/OrBox")},kPEt:function(e,t){e.exports=tui.require("totara_competency/components/details/Progress")},"kV+/":function(e,t){e.exports=tui.require("tui/components/toggle/ToggleButton")},lABG:function(e,t,i){},lLj0:function(e,t){e.exports=tui.require("tui/components/icons/Warning")},lTsS:function(e,t,i){"use strict";i.r(t);var n={inheritAttrs:!1,props:{assignmentId:{required:!0,type:Number},type:{required:!0,type:String},userId:{required:!0,type:Number}},data:function(){return{component:null}},mounted:function(){let e=`pathway_${this.type}/components/achievements/AchievementDisplay`;this.component=tui.asyncComponent(e)},methods:{isLoaded(){this.$emit("loaded")}}},a=i("KHd+"),s=Object(a.a)(n,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t(this.component,{tag:"component",attrs:{"assignment-id":this.assignmentId,"user-id":this.userId},on:{loaded:this.isLoaded}})],1)}),[],!1,null,null,null);s.options.__hasBlocks={script:!0,template:!0};t.default=s.exports},luBG:function(e,t,i){"use strict";var n=i("qJ4i");i.n(n).a},lyMP:function(e,t){e.exports=tui.require("tui/components/icons/RemoveUser")},mOtL:function(e,t,i){"use strict";var n=i("ryKQ");i.n(n).a},mURQ:function(e,t){e.exports=tui.require("tui/components/datatable/SelectTable")},nMuw:function(e,t,i){"use strict";i.r(t);var n=i("JXQf"),a=i.n(n),s=i("1i2V"),r=i.n(s),o=i("txsu"),c=i.n(o),l={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_achievement_paths"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignment_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_achievement_paths"},arguments:[{kind:"Argument",name:{kind:"Name",value:"assignment_id"},value:{kind:"Variable",name:{kind:"Name",value:"assignment_id"}}},{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"class"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]},d={components:{Loader:a.a,Tab:r.a,Tabs:c.a},props:{assignment:{required:!0,type:Object},userId:{required:!0,type:Number}},data:function(){return{achievements:[],itemsLoaded:null,loading:!0}},apollo:{achievements:{query:l,context:{batch:!0},variables(){return{assignment_id:this.assignmentId,user_id:this.userId}},update({totara_competency_achievement_paths:e}){let t=[];return e.forEach(e=>{let i="totara_competency/components/achievements/"+this.capitalizeFirstLetter(e.class);t.push({component:tui.asyncComponent(i),props:{userId:this.userId,assignmentId:this.assignmentId,type:e.type,name:e.name}})}),0===t.length&&(this.loading=!1),t}}},computed:{assignmentId(){return parseInt(this.assignment.id)},numberOfItems(){return this.achievements.length}},watch:{itemsLoaded:function(e){e===this.numberOfItems&&(this.loading=!1)},assignmentId:function(){this.loading=!1}},methods:{capitalizeFirstLetter:e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1),itemLoaded(){this.itemsLoaded+=1}}},u=(i("FKgf"),i("KHd+")),m=function(e){e.options.__langStrings={totara_competency:["no_achievement_criteria","ways_to_achieve_proficiency"]}},p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencyAchievements"},[i("Loader",{attrs:{loading:e.loading}},[i("h3",{staticClass:"tui-competencyAchievements__title"},[e._v("\n      "+e._s(e.$str("ways_to_achieve_proficiency","totara_competency"))+"\n    ")]),e._v(" "),e.achievements.length?i("Tabs",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:e.assignmentId,staticClass:"tui-competencyAchievements__tabs",attrs:{"transparent-tabs":!0}},e._l(e.achievements,(function(t,n){return i("Tab",{key:n,attrs:{id:n,"always-render":!0,name:t.props.name}},[i(t.component,e._b({tag:"component",on:{loaded:e.itemLoaded}},"component",t.props,!1))],1)})),1):i("div",{staticClass:"tui-competencyAchievements__empty"},[e._v("\n      "+e._s(e.$str("no_achievement_criteria","totara_competency"))+"\n    ")])],1)],1)}),[],!1,null,null,null);"function"==typeof m&&m(p),p.options.__hasBlocks={script:!0,template:!0};t.default=p.exports},nRyV:function(e,t,i){},ne8U:function(e,t,i){},"nvA/":function(e,t,i){"use strict";var n=i("CpVI");i.n(n).a},"o0O/":function(e,t){e.exports=tui.require("tui/components/decor/AndBox")},om5Z:function(e,t,i){},ouCZ:function(e,t,i){"use strict";i.r(t);var n=i("UjaO"),a=i.n(n),s=i("5h9J"),r=i.n(s),o=i("C+/B"),c=i.n(o),l=i("NAOU"),d=i.n(l),u=i("D9If"),m=i.n(u),p=i("8cak"),_=i.n(p),v=i("49h4"),y=i.n(v),g=i("vyVp"),f={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"totara_competency_archive_user_assignment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignment_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_archive_user_assignment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"assignment_id"},value:{kind:"Variable",name:{kind:"Name",value:"assignment_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"archived_assignment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]},h=i("gqVV"),k=i("qw+c"),b={components:{ArchiveIcon:a.a,ButtonIcon:r.a,ConfirmationModal:c.a,Grid:d.a,GridItem:m.a,ProgressTrackerCircle:_.a,SelectFilter:y.a},props:{activeAssignmentList:{required:!0,type:Array},selectedAssignmentProficiency:{type:Object},value:{type:Number},competencyId:{required:!0,type:Number},userId:{required:!0,type:Number}},data(){return{selectedAssignment:this.value,showArchiveConfirmation:!1}},computed:{selectedAssignmentProficiencyState(){return this.selectedAssignmentProficiency.id&&this.selectedAssignmentProficiency.proficient?"achieved":this.selectedAssignmentProficiency.id?"complete":"pending"},showCanArchiveButton(){let e=this.activeAssignmentList.find(e=>e.id===this.selectedAssignment);return e&&e.can_archive}},methods:{selectedAssignmentChange(e){this.$emit("input",e)},showArchiveConfirmDialog(){this.showArchiveConfirmation=!0},async makeArchiveAssignmentMutation(){let{assignment_id:e}=this.activeAssignmentList.find(e=>e.id===this.value);try{await this.$apollo.mutate({mutation:f,variables:{assignment_id:e},refetchQueries:[{query:h.a,variables:{user_id:this.userId,competency_id:this.competencyId,status:k.ASSIGNMENT_ACTIVE}}],refetchAll:!1}),Object(g.notify)({type:"success",message:this.$str("event_assignment_archived","totara_competency")}),this.selectedAssignment=0}finally{this.showArchiveConfirmation=!1}}}},N=(i("HjqD"),i("KHd+")),S=function(e){e.options.__langStrings={totara_competency:["achievement_level","action_archive_this","action_archive_user_modal_header","action_archive_user_assignment_modal","assignment","confirm_generic","error_generic_mutation","event_assignment_archived","more_information","not_proficient","proficient"]}},C=Object(N.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tui-competencyDetailAssignment"},[i("div",{staticClass:"tui-competencyDetailAssignment__bar"},[i("Grid",{attrs:{"stack-at":700}},[i("GridItem",{attrs:{units:4}},[i("SelectFilter",{staticClass:"tui-competencyDetailAssignment__bar-filter",attrs:{label:e.$str("assignment","totara_competency"),name:"select_assignment",large:!0,options:e.activeAssignmentList},on:{input:e.selectedAssignmentChange},model:{value:e.selectedAssignment,callback:function(t){e.selectedAssignment=t},expression:"selectedAssignment"}})],1),e._v(" "),i("GridItem",{class:"tui-competencyDetailAssignment__level",attrs:{units:4}},[i("div",{staticClass:"tui-competencyDetailAssignment__level-wrap",class:"tui-competencyDetailAssignment__level-wrap-"+e.selectedAssignmentProficiencyState},[i("p",{staticClass:"tui-competencyDetailAssignment__level-header"},[e._v("\n            "+e._s(e.$str("achievement_level","totara_competency"))+"\n          ")]),e._v(" "),i("div",{staticClass:"tui-competencyDetailAssignment__level-text"},[e._v("\n            "+e._s(e.selectedAssignmentProficiency.name)+"\n          ")])])]),e._v(" "),i("GridItem",{class:"tui-competencyDetailAssignment__status",attrs:{units:4}},[i("ProgressTrackerCircle",{attrs:{state:e.selectedAssignmentProficiencyState,target:"complete"!==e.selectedAssignmentProficiencyState}}),e._v(" "),i("span",{staticClass:"tui-competencyDetailAssignment__status-text",class:{"tui-competencyDetailAssignment__status-text-complete":"complete"===e.selectedAssignmentProficiencyState}},[e._v("\n          "+e._s(e.$str(e.selectedAssignmentProficiency.proficient?"proficient":"not_proficient","totara_competency"))+"\n        ")])],1)],1),e._v(" "),i("ConfirmationModal",{attrs:{title:e.$str("action_archive_user_modal_header","totara_competency"),open:e.showArchiveConfirmation},on:{confirm:e.makeArchiveAssignmentMutation,cancel:function(t){e.showArchiveConfirmation=!1}}},[i("p",[e._v("\n        "+e._s(e.$str("action_archive_user_assignment_modal","totara_competency"))+"\n      ")]),e._v(" "),i("p",[e._v("\n        "+e._s(e.$str("confirm_generic","totara_competency"))+"\n      ")])])],1),e._v(" "),i("div",{staticClass:"tui-competencyDetailAssignment__actions"},[e.showCanArchiveButton?i("ButtonIcon",{attrs:{"aria-label":"",styleclass:{small:!0},text:e.$str("action_archive_this","totara_competency")},on:{click:e.showArchiveConfirmDialog}},[i("ArchiveIcon")],1):e._e()],1)])}),[],!1,null,null,null);"function"==typeof S&&S(C),C.options.__hasBlocks={script:!0,template:!0};t.default=C.exports},pFDD:function(e,t,i){"use strict";var n=i("8DMs");i.n(n).a},pHFC:function(e,t){e.exports=tui.require("totara_competency/components/RatingScaleOverview")},qGal:function(e,t){e.exports=tui.require("totara_competency/constants")},qHIe:function(e,t,i){},qJ4i:function(e,t,i){},"qw+c":function(e,t,i){"use strict";i.r(t),i.d(t,"ASSIGNMENT_ACTIVE",(function(){return n})),i.d(t,"ASSIGNMENT_ARCHIVED",(function(){return a}));const n=1,a=2},rNse:function(e,t){e.exports=tui.require("tui/components/icons/Edit")},rsf9:function(e,t){e.exports=tui.require("tui/components/datatable/ExpandCell")},ryKQ:function(e,t,i){},tEJh:function(e,t,i){},tVAA:function(e,t,i){"use strict";i.r(t);var n=i("NAOU"),a=i.n(n),s=i("D9If"),r=i.n(s),o={components:{Grid:a.a,GridItem:r.a},props:{noBorders:{type:Boolean}}},c=(i("eS4Y"),i("KHd+")),l=Object(c.a)(o,(function(){var e=this.$createElement,t=this._self._c||e;return t("Grid",{staticClass:"tui-achievementLayout",class:{"tui-achievementLayout--borderless":this.noBorders},attrs:{"stack-at":750}},[t("GridItem",{attrs:{units:2}},[t("div",{staticClass:"tui-achievementLayout__left"},[this._t("left")],2)]),this._v(" "),t("GridItem",{attrs:{units:10}},[this._t("right")],2)],1)}),[],!1,null,null,null);l.options.__hasBlocks={script:!0,template:!0};t.default=l.exports},tkAW:function(e,t){e.exports=tui.require("tui/components/modal/Modal")},txsu:function(e,t){e.exports=tui.require("tui/components/tabs/Tabs")},vF5l:function(e,t){e.exports=tui.require("tui/components/buttons/Button")},vMqX:function(e,t,i){var n={"./constants":"qw+c","./constants.js":"qw+c"};function a(e){var t=s(e);return i(t)}function s(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=s,e.exports=a,a.id="vMqX"},vdX2:function(e,t,i){"use strict";var n=i("JAtL");i.n(n).a},vqlw:function(e,t){e.exports=tui.require("tui/components/icons/BarChart")},vyVp:function(e,t){e.exports=tui.require("tui/notifications")},"wMJ/":function(e,t,i){"use strict";t.a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"totara_competency_user"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"user_id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"core_id"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totara_competency_user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"user_id"},value:{kind:"Variable",name:{kind:"Name",value:"user_id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fullname"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"card_display"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"profile_picture_alt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_picture_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profile_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"display_fields"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"associate_url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"label"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"is_custom"},arguments:[],directives:[]}]}}]}}]}}]}}]}},xNwe:function(e,t){e.exports=tui.require("tui/components/basket/Basket")},xs84:function(e,t,i){"use strict";i.r(t);var n=i("KGot"),a=i.n(n),s=i("5qAA"),r=i.n(s),o=i("e3MU"),c=i.n(o),l=i("C4bi"),d=i.n(l),u=i("yikf"),m=i.n(u),p={components:{Cell:a.a,HeaderCell:r.a,InfoIconButton:c.a,ProficientStatus:d.a,Table:m.a},props:{assignments:{type:Array}}},_=(i("mOtL"),i("KHd+")),v=function(e){e.options.__langStrings={totara_competency:["assignment","assignment_date_archived","legacy_assignment_rating_description","legacy_assignment_rating_discontinued","proficiency_status"]}},y=Object(_.a)(p,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Table",{staticClass:"tui-competencyDetailArchivedAssignmentsTable",attrs:{data:e.assignments},scopedSlots:e._u([{key:"header-row",fn:function(){return[i("HeaderCell",{attrs:{size:"6"}},[e._v("\n      "+e._s(e.$str("assignment","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v("\n      "+e._s(e.$str("assignment_date_archived","totara_competency"))+"\n    ")]),e._v(" "),i("HeaderCell",{attrs:{size:"3"}},[e._v("\n      "+e._s(e.$str("proficiency_status","totara_competency"))+"\n    ")])]},proxy:!0},{key:"row",fn:function(t){var n=t.row;t.expand;return[i("Cell",{attrs:{size:"6","column-header":e.$str("assignment","totara_competency")}},[e._v("\n      "+e._s(n.name)+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("assignment_date_archived","totara_competency")}},[e._v("\n      "+e._s(n.archivedAt)+"\n    ")]),e._v(" "),i("Cell",{attrs:{size:"3","column-header":e.$str("proficiency_status","totara_competency")}},[i("div",{staticClass:"tui-competencyDetailArchivedAssignmentsTable__achievement"},[i("ProficientStatus",{attrs:{"proficient-status":n.proficient}}),e._v(" "),n.legacy?i("InfoIconButton",{attrs:{"is-help-for":e.$str("proficiency_status","totara_competency")}},[i("h4",{staticClass:"tui-competencyDetailArchivedAssignmentsTable__discontinued"},[e._v("\n            "+e._s(e.$str("legacy_assignment_rating_discontinued","totara_competency"))+"\n          ")]),e._v("\n          "+e._s(e.$str("legacy_assignment_rating_description","totara_competency"))+"\n        ")]):e._e()],1)])]}}])})}),[],!1,null,null,null);"function"==typeof v&&v(y),y.options.__hasBlocks={script:!0,template:!0};t.default=y.exports},yikf:function(e,t){e.exports=tui.require("tui/components/datatable/Table")},ykDy:function(e,t,i){"use strict";var n=i("om5Z");i.n(n).a},ymIi:function(e,t,i){"use strict";var n=i("gXO8");i.n(n).a},yuC0:function(e,t){e.exports=tui.require("totara_competency/components/IndividualAssignmentProgress")},zdti:function(e,t){e.exports=tui.require("tui/components/notifications/NotificationBanner")},zs4z:function(e,t){e.exports=tui.require("tui/components/layouts/PageBackLink")}});