define([],function(){function a(b){return this instanceof a?void(this.component=b):new a(b)}return a.prototype={constructor:a,getOptions:function(){var a=["selectall","selectnone","selectset","selectnotset"],b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c],e="data-"+d;if(!this.component.hasAttribute(e))return null;b[d]=this.component.getAttribute(e)}return b},bulkTakeAttendance:function(){var a=this,b=a.component.querySelector("#menubulkattendanceop");null!==b&&b.addEventListener("change",function(){var b=this;a.toggleError(!1),b.value&&"-1"!==b.value&&a.triggerEvent("bulk-take-attendance",{statusCode:b.value,toggleError:function(b){a.toggleError(b)}})})},bulkSelectLearners:function(){var a=this,b=a.component.querySelector("#menubulk_select"),c=a.getOptions();null!==c&&null!==b&&b.addEventListener("change",function(){var b=c.selectnone,d=this;d.value&&(b=d.value);var e=function(a){if(!a.hasOwnProperty(b))throw new Error("No operator for selector option: "+b);var c=a[b];if("function"!=typeof c)throw new Error("Expecting function at selector option: "+b);c()};a.triggerEvent("bulk-select-learner",{value:b,options:c,handle:e}),a.toggleError(!1);var f=a.component.querySelector("#menubulkattendanceop");null!==f&&(f.selectedIndex=0)})},triggerEvent:function(a,b){var c=new CustomEvent("mod_facetoface/take_attendance_bulk_action:"+a,{bubbles:!0,detail:b});this.component.dispatchEvent(c)},toggleError:function(a){var b=this.component.querySelector("#selectoptionbefore");a?b.classList.contains("f2f-selectionoptionbefore-error")||b.classList.add("f2f-selectionoptionbefore-error"):b.classList.contains("f2f-selectionoptionbefore-error")&&b.classList.remove("f2f-selectionoptionbefore-error")},addEvents:function(){var a=this;this.bulkTakeAttendance(),this.bulkSelectLearners(),this.component.addEventListener("mod_facetoface/take_attendance_bulk_action:user_selected",function(){a.component.querySelector("#menubulk_select").value=a.getOptions().selectset})}},{init:function(b){return new Promise(function(c){var d=new a(b);d.addEvents(),c(d)})}}});