define([],function(){function a(b){return this instanceof a?void(this.component=b):new a(b)}return a.prototype={constructor:a,toggleCheckBoxes:function(a){var b=this.component.querySelectorAll(".selectedcheckboxes");for(var c in b)b.hasOwnProperty(c)&&(b[c].checked=a)},checkNotSetUsers:function(a){var b=this.component.querySelectorAll(".selectedcheckboxes"),c=this.component.getAttribute("data-notsetcode")||0;for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],f=e.getAttribute("data-selectid"),g=this.component.querySelector("#"+f);null!==g&&(e.checked=!1,a&&c==g.value?e.checked=!0:a||c==g.value||(e.checked=!0))}},addEventListeners:function(){var a=this,b=a.component.querySelector(".tw-takeAttendanceBulkAction");b.addEventListener("mod_facetoface/take_attendance_bulk_action:bulk-select-learner",function(b){var c=b.detail.options,d={};for(var e in c)if(c.hasOwnProperty(e)){var f=c[e];switch(f){case c.selectall.toString():d[f]=function(){a.toggleCheckBoxes(!0)};break;case c.selectset.toString():d[f]=function(){a.checkNotSetUsers(!1)};break;case c.selectnotset.toString():d[f]=function(){a.checkNotSetUsers(!0)};break;case c.selectnone.toString():default:d[f]=function(){a.toggleCheckBoxes(!1)}}}b.detail.hasOwnProperty("handle")&&"function"==typeof b.detail.handle&&b.detail.handle(d)}),b.addEventListener("mod_facetoface/take_attendance_bulk_action:bulk-take-attendance",function(b){var c=b.detail,d=a.component.querySelectorAll(".selectedcheckboxes"),e=0;for(var f in d)if(d.hasOwnProperty(f)){var g=d[f];if(g.checked){var h=g.getAttribute("data-selectid"),i=a.component.querySelector("#"+h);i.value=c.statusCode,e+=1}}0===e&&c.hasOwnProperty("toggleError")&&"function"==typeof c.toggleError&&c.toggleError(!0)}),a.component.addEventListener("change",function(a){a.target.closest(".mod-facetoface-attendees .selectedcheckboxes")&&b.dispatchEvent(new CustomEvent("mod_facetoface/take_attendance_bulk_action:user_selected"))})},exportToFile:function(){var a=this,b=a.component.querySelector("#menuf2f-export-actions");null!==b&&b.addEventListener("change",function(){var b=this;if(b.value&&""!=b.value){var c=b.value,d={url:a.component.getAttribute("data-url"),sessionid:a.component.getAttribute("data-sessionid"),sessiondateid:a.component.getAttribute("data-sessiondateid")};window.location.href=d.url+"?s="+d.sessionid+"&sd="+d.sessiondateid+"&onlycontent=1&download="+c.substr(6)}})}},{init:function(b){var c=new a(b);c.addEventListeners(),c.exportToFile()}}});