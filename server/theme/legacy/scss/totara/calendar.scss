//
// This file is part of Totara Learn
//
// Copyright (C) 2019 onwards Totara Learning Solutions LTD
//
// This program is free software; you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation; either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//
// @copyright 2019 onwards Totara Learning Solutions LTD
// @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
// @copyright 2015 Bas Brands <www.sonsbeekmedia.nl>
// @author    Bas Brands
// @author    David Scotson
// @author    Joby Harding <joby.harding@totaralearning.com>
// @package   theme_legacy

// Calendar event background colours defined.
.calendar_event_course {
  background-color: $calendar-event-course-bg-color;
}

.calendar_event_global {
  background-color: $calendar-event-global-bg-color;
}

.calendar_event_group {
  background-color: $calendar-event-group-bg-color;
}

.calendar_event_user {
  background-color: $calendar-event-user-bg-color;
}

// Calendar restyling.
.path-calendar {
  .calendartable {
    width: 100%;
    th,
    td {
      width: 14%;
      vertical-align: top;
      text-align: center;
      border: 0;
    }
  }
  .calendar-controls {
    .previous,
    .next,
    .current {
      display: block;
      /*rtl:ignore*/
      float: left;
      width: 12%;
    }
    .previous {
      /*rtl:ignore*/
      text-align: left;
    }
    .current {
      text-align: center;
      width: 76%;
    }
    .next {
      /*rtl:ignore*/
      text-align: right;
    }
  }
  .filters {
    table {
      border-collapse: separate;
      border-spacing: 2px;
      width: 100%;
    }
  }
  .maincalendar {
    vertical-align: top;
    padding: 0;
    .bottom {
      text-align: center;
      padding: 5px 0 0 0;
    }
    .heightcontainer {
      height: 100%;
      position: relative;
    }
    .calendarmonth {
      width: 98%;
      margin: 10px auto;
    }
    .calendarmonth {
      ul {
        margin: 0;
        li {
          list-style-type: none;
          margin-top: 4px;
        }
      }
      td {
        height: 5em;
      }
    }
    .calendar-controls {
      .previous,
      .next {
        width: 30%;
      }
      .current {
        width: 39.95%;
      }
    }
    .controls {
      width: 98%;
      margin: 10px auto;
    }
    .calendar_event_course,
    .calendar_event_global,
    .calendar_event_group,
    .calendar_event_user {
      border-width: 1px 1px 1px 12px;
      border-style: solid;
    }
    .calendar_event_course {
      border-color: $calendar-event-course-border-color;
    }
    .calendar_event_global {
      border-color: $calendar-event-global-border-color;
    }
    .calendar_event_group {
      border-color: $calendar-event-group-border-color;
    }
    .calendar_event_user {
      border-color: $calendar-event-user-border-color;
    }
    .calendar-event-panel {
      background-color: $calendar-event-panel-bg-color;
      border: 2px solid $calendar-event-panel-border-color;
      .yui3-overlay-content {
        padding: 19px;
        background-color: $calendar-event-panel-bg-color;
        border: 1px solid $calendar-event-panel-border-color;
        border-radius: $calendar-border-radius;
        @include box-shadow(inset 0 1px 1px rgba(0, 0, 0, 0.05));
      }
    }
    .calendar-controls {
      .current {
        font-family: inherit;
        font-weight: 500;
        color: inherit;
        font-size: 25px;
        line-height: 1.2;
      }
    }
    .calendartable {
      td,
      li {
        padding: 5px;
      }
      li {
        /*rtl:ignore*/
        padding-left: 10px;
        /*rtl:ignore*/
        text-align: left;
      }
    }
    .header {
      overflow: hidden;
      margin-bottom: 2em;
      .buttons {
        /*rtl:ignore*/
        float: right;
      }
    }
    .eventlist {
      .event {
        width: 100%;
        border-spacing: 0;
        border-collapse: separate;
        position: relative;
        padding: 19px;
        margin-bottom: 20px;
        border: 1px solid $calendar-event-list-border-color;
        border-radius: $calendar-border-radius;
        @include box-shadow(inset 0 1px 1px rgba(0, 0, 0, 0.05));
        .picture {
          vertical-align: text-top;
        }
        .topic {
          .name {
            font-size: var(--font-size-18);
            font-weight: 200;
            line-height: 24px;
            /*rtl:ignore*/
            float: left;
          }
          .name,
          .course {
            margin-bottom: 5px;
          }
          .date {
            /*rtl:ignore*/
            float: right;
          }
        }
        .side {
          width: 22px;
        }
        .description {
          background-color: $calendar-event-list-desc-bg-color;
          padding: 5px;
          .commands {
            position: absolute;
            /*rtl:ignore*/
            right: 0;
            top: 0;
            margin: 3px;
          }
        }
        .commands {
          position: absolute;
          top: 19px;
          /*rtl:ignore*/
          right: 19px;
          a {
            margin: 0 3px;
          }
        }
      }
    }
  }
}

// RTL overrides for main calendar.
.dir-rtl.path-calendar {
  .maincalendar {
    .calendar_event_course,
    .calendar_event_global,
    .calendar_event_group,
    .calendar_event_user {
      /*rtl:ignore*/
      border-left-width: 1px;
      /*rtl:ignore*/
      border-right-width: 12px;
    }
    .calendar-controls {
      .next {
        /*rtl:ignore*/
        text-align: left;
      }
      .previous {
        /*rtl:ignore*/
        text-align: right;
      }
    }
    .calendartable {
      td,
      li {
        /*rtl:ignore*/
        text-align: right;
      }
      li {
        /*rtl:ignore*/
        padding-right: 10px;
        /*rtl:ignore*/
        padding-left: 5px;
      }
    }
    .header {
      .buttons {
        /*rtl:ignore*/
        float: left;
      }
    }
    .eventlist {
      .event {
        .topic {
          .name {
            /*rtl:ignore*/
            float: right;
          }
          .date {
            /*rtl:ignore*/
            float: left;
          }
        }
        .description {
          .commands {
            /*rtl:ignore*/
            right: inherit;
            /*rtl:ignore*/
            left: 0;
          }
        }
      }
    }
  }
}

// Calendar export.
#page-calendar-export {
  .indent {
    padding-left: 20px;
  }
}

// Block minicalendar.
.block.block_calendar_month {
  th,
  td {
    border: 1px solid $calendar-month-border-color;
  }
  .content {
    padding: 11px 0 0 0;
  }
  td.today {
    background-color: $calendar-month-today-bg-color;
    color: $calendar-month-today-text-color;
    a {
      color: $calendar-month-today-text-color;
    }
    .calendar-event-panel {
      color: var(--color-text);
    }
    .popover-content a {
      color: var(--color-state);
    }
  }
  td {
    width: (100/7) * 1%;
  }
}

.block {
  .minicalendar {
    table-layout: fixed;
    margin: 0 auto;
    width: 100%;
    th,
    td {
      padding: 2px;
      font-size: 0.8em;
      text-align: center;
    }
    td .weekend {
      color: $calendar-weekend-text-color;
    }
    th {
      vertical-align: top;
      word-wrap: normal;
      overflow: hidden;
    }
    &.days-in-week-7 th {
      max-width: percentage(1/7); // 14.2857%;
    }
  }
  .calendar-event-panel {
    background-color: $calendar-event-panel-bg-color;
    border: 1px solid $calendar-event-panel-border-color;
    .yui3-overlay-content {
      padding: 19px;
      background-color: $calendar-event-panel-bg-color;
      border: 1px solid $calendar-event-panel-border-color;
      border-radius: $calendar-border-radius;
      @include box-shadow(inset 0 1px 1px rgba(0, 0, 0, 0.05));
      h2 {
        &.eventtitle {
          line-height: 1.2;
          font-size: 18px;
        }
      }
      .eventcontent {
        img {
          padding-right: 5px;
        }
      }
    }
  }
  .calendar-controls {
    .previous,
    .current,
    .next {
      display: block;
      float: left;
    }
    .previous {
      text-align: left;
      width: 12%;
    }
    .current {
      text-align: center;
      width: 76%;
    }
    .next {
      text-align: right;
      width: 12%;
    }
  }
  .calendar_filters {
    ul {
      list-style: none;
      margin: 0;
    }
    li {
      margin-bottom: 0.2em;
      span {
        img {
          padding: 0 0.2em;
        }
      }
    }
    .eventname {
      padding-left: 0.2em;
    }
  }
  .content {
    h3 {
      &.eventskey {
        margin-top: 0.5em;
      }
    }
  }
}

@media (min-width: 768px) {
  #page-calender-view {
    .container-fluid {
      min-width: 1024px;
    }
  }
}

// End of original bootstrap theme code.
