//
// This file is part of Totara Learn
//
// Copyright (C) 2019 onwards Totara Learning Solutions LTD
//
// This program is free software; you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation; either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//
// @copyright 2019 onwards Totara Learning Solutions LTD
// @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
// @package   theme_legacy

.f2fsessionlinks,
.f2fsessionnotice {
  display: block;
  padding: 12px 0 8px;
}

.f2factivityname {
  line-height: 1.5;
}

body#page-mod-facetoface-room div.row-fluid {
  margin: 0;
}

body#page-mod-facetoface-view div#page-content table.sessions {
  width: 100%;
}

body.path-mod-facetoface table.mod-facetoface-attendees {
  width: 100%;
}

body.path-mod-facetoface div#fgroup_id_recipients input[id*='id_booked_type'] {
  margin-left: 15px;
}

#page-mod-facetoface-reports-assets,
#page-mod-facetoface-reports-facilitators,
#page-mod-facetoface-reports-rooms {
  #page-content {
    padding-top: 0;
  }
}

[id^='editcustomfacilitator'] #fgroup_id_labeltype legend {
  padding-left: 0;
  padding-right: 0;
  color: inherit;
}

.path-calendar
  .maincalendar
  .eventlist
  .event
  .mod_facetoface__calendar-event.description {
  background-color: transparent;
}

.mod_facetoface__calendarfilter {
  display: block;
  margin-bottom: var(--gap-4);

  label {
    width: 100%;
    vertical-align: middle;

    + * {
      vertical-align: middle;
    }
  }

  @media (min-width: $tui-screen-md) {
    label {
      width: 25%;
    } 
  }
}

@media (min-width: $tui-screen-md) {
  #module_filter_facetoface [name="applyfacetofacefilter"] {
    margin-left: 25%;
  }
}

.mod_facetoface-addremove button {
  min-width: 100px;
}

.f2f dt {
  word-wrap: break-word;
}

/** This is a hack to get full height divs for the status columns with background colours */
.reportbuilder-table[data-source='rb_source_facetoface_summary'] tr,
.reportbuilder-table[data-source='rb_source_facetoface_room_assignments'] tr,
.reportbuilder-table[data-source='rb_source_facetoface_asset_assignments'] tr {
  height: 1px;
}

/** Firefox requires a different hack **/
.gecko .reportbuilder-table[data-source='rb_source_facetoface_summary'] tr,
.gecko
  .reportbuilder-table[data-source='rb_source_facetoface_room_assignments']
  tr,
.gecko
  .reportbuilder-table[data-source='rb_source_facetoface_asset_assignments']
  tr,
.gecko
  .reportbuilder-table[data-source='rb_source_facetoface_facilitator_assignments']
  tr {
  height: 100%;
}

/** IE requires quite a bit more hacking! **/
.ie .reportbuilder-table[data-source='rb_source_facetoface_summary'] tr,
.ie
  .reportbuilder-table[data-source='rb_source_facetoface_room_assignments']
  tr,
.ie
  .reportbuilder-table[data-source='rb_source_facetoface_asset_assignments']
  tr,
.ie
  .reportbuilder-table[data-source='rb_source_facetoface_facilitator_assignments']
  tr {
  height: 100%;
}

.ie .reportbuilder-table td.session_bookingstatus,
.ie .reportbuilder-table td.session_overallstatus {
  overflow: hidden;
}

.ie .reportbuilder-table td.session_bookingstatus div,
.ie .reportbuilder-table td.session_overallstatus div {
  padding-bottom: 9999px;
  margin-bottom: -9999px;
}

.reportbuilder-table td.session_bookingstatus,
.reportbuilder-table td.session_overallstatus {
  padding: 0;
  /** Part of the full-height hack mentioned above **/
  height: inherit;
}

.reportbuilder-table td.session_bookingstatus > div,
.reportbuilder-table td.session_overallstatus > div {
  text-align: center;
  /** Part of the full-height hack mentioned above **/
  height: 100%;
}

.reportbuilder-table .session_bookingstatus > div > span,
.reportbuilder-table .session_overallstatus > div > span {
  display: inline-block;
  margin: var(--gap-2);
}

.reportbuilder-table .session_bookingstatus .underbooked,
.reportbuilder-table .session_overallstatus .ended {
  background-color: $facetoface-session-bg-color-underbooked;
}

.reportbuilder-table .session_bookingstatus .available,
.reportbuilder-table .session_overallstatus .upcoming {
  background-color: $facetoface-session-bg-color-upcomming;
}

.reportbuilder-table .session_bookingstatus .overbooked {
  background-color: $facetoface-session-bg-color-overbooked;
}

.reportbuilder-table .session_overallstatus .cancelled {
  background-color: $facetoface-session-bg-color-cancelled;
}

.reportbuilder-table .session_bookingstatus .fullybooked,
.reportbuilder-table .session_overallstatus .started {
  background-color: $facetoface-session-bg-color-full;
}

.mform > #fitem_id_cancelinstruction {
  > .fitemtitle {
    display: none;
  }
  > .felement {
    float: none;
    width: 100%;
  }
}

#page-mod-facetoface-attendees-list-addlist textarea[name='csvinput'] {
  min-height: 200px;
}

.mod_facetoface-noshow {
  display: none;
}

.mod_facetoface-show-selectdate-dialog {
  float: right;
}

.mod_facetoface-date-other-virtual-room {
  .mod_facetoface-show-selectdate-dialog,
  [data-action="clonedate"] {
    display: none;
  }
}

.mod_facetoface-date-lock {
  display: none;
  float: right;

  .mod_facetoface-date-other-virtual-room & {
    display: block;
  }
}

.mod_facetoface-duplicate-lock {
  display: none;

  .mod_facetoface-date-other-virtual-room & {
    display: inline;
  }
}

.mod_facetoface-assetlist,
.mod_facetoface-roomlist,
.mod_facetoface-facilitatorlist {
  list-style-type: none;
  margin: 0;
}

.ui-dialog [id^='selectassets'][id$='-dialog'] .select,
.ui-dialog [id^='selectrooms'][id$='-dialog'] .select,
.ui-dialog [id^='selectfacilitators'][id$='-dialog'] .select {
  overflow: auto;
}

.ui-dialog [id^='selectassets'][id$='-dialog'] .dialog-footer,
.ui-dialog [id^='selectrooms'][id$='-dialog'] .dialog-footer,
.ui-dialog [id^='selectfacilitators'][id$='-dialog'] .dialog-footer {
  padding-top: 0.5em;
  display: block;
  float: left;
}

.f2f-ignoreconflicts-checkbox {
  padding: 10px;
}

.f2f-usersbox {
  margin-bottom: 48px;
}

select.menuf2f-actions,
select.menuf2f-select {
  display: inline-block;
}

select.menuf2f-select {
  margin-right: 0.5em;
}

.dir-rtl select.menuf2f-select {
  margin-left: 0.5em;
}

// styles for the seminar event page

@mixin force-link-color() {
  color: var(--color-state);

  &:hover,
  &:focus {
    color: var(--color-state-focus);
    text-decoration: underline;
  }
}

@mixin force-link-style() {
  &,
  &:active,
  &:focus,
  &:hover,
  &:active:focus,
  &:active:hover {
    background: transparent none;
    border: none;
    border-radius: 0;
    box-shadow: none;
    cursor: pointer;
    font: inherit;
    margin: 0;
    outline: none;
    padding: 0;
  }
}

.mod_facetoface {
  // +++ Action bars +++ //
  &__action {
    display: flex;
    align-items: center;

    &--near {
      justify-content: flex-start;
    }
    &--far {
      justify-content: flex-end;
    }
    &--center {
      justify-content: center;
    }

    &:not(.btn-group) > .commandlink + .commandlink {
      margin-left: var(--gap-2);
    }
  }

  @mixin flex-wrap-vertical-center() {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
  }

  @mixin no-list-style() {
    &,
    & > li {
      list-style: none;
      margin: 0;
      padding: 0;
    }
  }

  @mixin seminar-event-state() {
    // Simulate dimmed_text in T12
    &:not(.userbooked) {
      &.started,
      &.cancelled,
      &.fullybooked,
      &.closed {
        // stylelint-disable-next-line totara/at-extend-only-placeholders
        @extend .text-muted;
      }
    }
    // Un-commenting the following CSS rule brings back the old style.
    // Simulate highlight in T12
    // &.userbooked {
    //   &:not(.over):not(.cancelled) {
    //     @extend .highlight;
    //   }
    // }
  }

  &__list-items {
    @include no-list-style;
  }

  // +++ Filters +++ //
  // Note: do NOT use the 'ch' unit unless we can drop IE11
  &__filter {
    @include flex-wrap-vertical-center;

    border-top: 1px $facetoface-border-color solid;
    border-bottom: 1px $facetoface-border-color solid;
    margin: var(--gap-4) 0;
    padding: var(--gap-2) var(--gap-2) 0;

    &__toggle-button > .flex-icon {
      font-size: $ft-size-400;
      margin-bottom: var(--gap-2);
    }

    @mixin child() {
      align-items: center;
      display: flex;
      margin: 0 var(--gap-2) var(--gap-2);
      max-width: 100%;
    }

    &__toggle {
      display: none;
    }

    &__toggle-button {
      &__loading,
      &__label {
        display: none;
      }
    }

    &__item {
      @include child;

      &__label {
        margin: auto var(--gap-3) auto 0;
      }

      &__select {
        // Override Moodle form
        font-size: inherit;
        margin-bottom: 0;
        max-width: 100%;
        padding-top: 0;
        padding-bottom: 0;
      }

      @mixin filter-select-fixed($width: 15em) {
        &__select {
          // Avoid min-width here
          // Otherwise the <select> element could cover the whole screen width if a room name is very loooong!
          text-overflow: ellipsis;
          width: $width; // do NOT use max-width as it freaks out IE11
        }
      }

      @mixin filter-select-variable($width) {
        &__select {
          min-width: $width;
        }
      }

      &__room {
        @include filter-select-fixed;
      }

      &__facilitator {
        @include filter-select-fixed;
      }

      &__eventtime {
        @include filter-select-variable(8em);
      }

      &__advanced {
        @include filter-select-variable(10em);
      }

      &__book {
        @include filter-select-variable(8em);
      }
    }

    &__link {
      margin: 0 0 var(--gap-2) var(--gap-2);
      visibility: hidden;
    }

    &--active &__link {
      visibility: visible;
    }
  }

  // Container of upcoming and/or past event list
  &__sessions {
    &__spinner {
      display: none;
      font-size: var(--font-size-20);
    }

    &.loading &__spinner {
      display: block;
    }

    // Split these out as there appears to be a bug with our SCSS parser
    &.loading &__debug,
    &.loading &__empty {
      display: none;
    }

    &.loading .mod_facetoface {
      &__sessionlist,
      &__sessionlist__reservation,
      &__sessionlist__pastlink {
        display: none;
      }
    }
  }

  // Seminar event list tables
  &__sessionlist {
    // Make the session list table horizontally scrollable in the content area,
    // so it wouldn't overlap the blocks on the right side.
    margin-bottom: var(--gap-6);
    overflow-x: auto;

    &--empty {
      padding: var(--gap-4);
    }

    &__show-previous--hidden {
      display: none;
    }

    &__table {
      @include bs-table();
      // Override .table
      margin-bottom: 0;
      max-width: none;

      > thead,
      > tbody,
      > tfoot {
        > tr {
          > th,
          > td {
            // Override the border inserted by Bootstrap
            border-top: none;
            border-bottom: none;
          }
        }
      }
      // Add bottom border
      > thead,
      > tbody {
        border-bottom: 2px solid $facetoface-table-border-color;
      }
      // Always accent
      > tbody > tr {
        background-color: $facetoface-table-bg-accent;
        // We don't use the hover colour at the moment.
        // &:hover {
        //   background-color: @table-bg-hover;
        // }
      }

      // Add a border between sessions
      &__sessionrow {
        border-top: 1px solid var(--color-neutral-5);

        // Add a thick border between events
        &.firstsession,
        &.waitlisted {
          border-top: 2px solid $facetoface-table-border-color;
        }

        @include seminar-event-state;
      }
    }

    &__roomdetails {
      display: block;
    }

    &__eventtime {
      white-space: nowrap;
    }

    &__event-status {
      &__event,
      &__booking,
      &__user {
        white-space: nowrap;
      }
      &__user {
        font-size: var(--font-size-13);
      }
    }

    &__timezone {
      font-size: var(--font-size-12);
      display: block;
    }

    // Override Bootstrap.
    &__table td.mod_facetoface__sessionlist__actions {
      padding-bottom: var(--gap-2);
      padding-top: var(--gap-2);
    }

    &__actions {
      // Chrome requires the width be greater than 0.
      width: 1px;
    }

    &__action {
      &__buttons {
        display: flex;
        justify-content: center;
      }
      &__buttons &__dropdown.dropdown-toggle {
        padding: var(--gap-1) var(--gap-2);
      }
      &__icons {
        display: flex;
        font-size: var(--font-size-16);
      }
      &__icons + &__links {
        margin-top: var(--gap-1);
      }
      &__dropdown {
        margin-left: var(--gap-1);
        > .flex-icon {
          font-size: 111%;
          // This hackery disables font hinting and grid fitting to get a better rendering result of the '...' button.
          transform: rotate(0.001deg);
        }

        // Override Bootstrap.
        &__menu.dropdown-menu {
          left: auto;
          margin: 0;
          position: fixed;
          right: auto;

          > li > a {
            color: var(--dropdown-item-text-color);
            &:hover,
            &:focus {
              color: var(--dropdown-item-text-color-hover);
              text-decoration: none;
              background-color: var(--dropdown-item-bg-color-hover);
              outline: 0;
            }
          }
        }
      }
      &__link {
        display: block;
        white-space: nowrap;
      }
      &__reserve {
        display: block;
      }
    }

    &__attendance {
      &--open__link {
        font-weight: bold;
      }

      &--none,
      &--locked,
      &--open,
      &--saved {
        &__icon,
        &__icon[class] {
          // override fontawesome
          vertical-align: baseline;
        }
      }
    }

    &__roomdetails {
      display: block;
      font-size: var(--font-size-12);
    }
  }

  &__event_details {
    dt {
      margin-top: var(--gap-2);
    }
    hr {
      margin: var(--gap-2) 0;
    }
    &__room,
    &__asset,
    &__facilitator {
      margin-bottom: var(--gap-2);
    }

    &__sessions {
      display: flex;
      flex-direction: column;
      margin-top: var(--gap-2);

      @include seminar-event-state;

      @mixin row() {
        display: flex;
        justify-content: space-around;
        text-align: left;
      }

      @mixin cell() {
        padding: var(--gap-1);
      }

      &__rowheader {
        @include row;
        border-bottom: 2px solid $facetoface-border-color;
        font-weight: bold;
      }

      &__row {
        @include row;
        border-bottom: 1px solid $facetoface-border-color;

        &:last-child {
          border-bottom-width: 0;
        }
      }

      &__cellheader {
        @include cell;
        display: none;
        font-weight: bold;
      }

      &__cell {
        @include cell;

        &--status {
          flex: 1;
        }
        &--date {
          flex: 3;
        }
        &--rooms {
          flex: 2;
        }
        &--facilitators {
          flex: 2;
        }
        &--assets {
          flex: 2;
        }
        &--actions {
          flex: 1;
        }
      }

      &__row > &__cell {
        background: $facetoface-table-bg-accent;
      }
    }
  }

  // Put 'Add event', 'Edit event' et al on the right side of the heading text.
  &__action-dashboard,
  &__action-eventinfo,
  &__action-eventdetail {
    float: right;
  }
  // For some reason, 'Edit event' needs a different method.
  &__action-editevent {
    position: absolute;
    right: floor(($grid-gutter-width / 2));
  }
  // Extra space below the upcoming sessions table.
  &__action-detailfooter {
    margin-top: var(--gap-4);
  }
  &__sessionlist {
    clear: right;
  }

  &__capacity {
    &__current {
      font-weight: bold;
    }
  }

  &__booking {
    &__dates {
      list-style: none;
      margin: 0;
      padding: 0;

      &--waitlisted {
        font-style: italic;
      }
    }

    &__date {
      margin: 0 0 var(--gap-2);
      padding: 0;
    }

    &__users {
      margin: 0;
      padding: 0;
    }

    &__user {
      margin: 0 0 0 var(--gap-2);
      padding: 0;
    }
  }

  &__action-reservation {
    border-top: 1px solid $facetoface-border-color;
    padding-top: var(--gap-2);
  }

  // +++ Navigation bar +++ //
  &__navigation {
    margin: var(--gap-4) (0px - floor(($grid-gutter-width / 2))) var(--gap-4)
      0px - ceil(($grid-gutter-width / 2));
    padding-left: ceil(($grid-gutter-width / 2));
    padding-right: floor(($grid-gutter-width / 2));
    position: relative;

    &__items {
      display: flex;

      a {
        border-right: 1px solid $facetoface-border-color;
        font-size: var(--font-size-14);
        line-height: var(--font-size-14);
        margin: (($facetoface-navbar-height - var(--font-size-14)) / 2) 0;
        padding: 0 var(--gap-2);

        &:first-child {
          padding-left: 0;
        }
        &:last-child {
          border-right: none;
        }
      }
    }

    &__top {
      line-height: $facetoface-navbar-height;
      position: absolute;
      right: floor(($grid-gutter-width / 2));
      top: 0;
    }
  }

  @mixin sidebar-panel-close() {
    height: 0;
    min-height: 0;
    padding: 0;
    transform: scaleY(0);
    visibility: hidden;
  }

  @mixin sidebar-panel-open() {
    height: auto;
    min-height: 200px; // DES-89
    padding: var(--gap-6);
    transform: none;
    visibility: visible;
  }

  // +++ Event page +++ //
  &__eventinfo {
    display: flex;
    margin-bottom: var(--gap-2);

    &__content {
      flex: 1;
      order: 0;

      @mixin divider() {
        border-bottom: 1px solid $facetoface-border-color;
      }

      &__management {
        @include divider;

        margin-bottom: 0;
        margin-left: 0px - ceil(($grid-gutter-width / 2));
        padding: var(--gap-2) ceil(($grid-gutter-width / 2));

        &__items {
          margin: 0;
          padding: 0;
        }

        &__item {
          list-style: none;
          margin: 0.15rem;
          padding: 0;
        }
      }

      @mixin section_divider() {
        @include divider;
        margin-bottom: var(--gap-2);
        padding-bottom: var(--gap-2);
      }

      &__intro {
        @include section_divider;
      }

      &__eventdetail {
        @include section_divider;

        &__heading {
          margin-top: 0;
          margin-bottom: 0;

          > a {
            &,
            &:hover,
            &:focus {
              color: inherit;
            }

            &::before {
              content: '';
              width: 0;
              height: 0;
              border-style: solid;
              display: inline-block;
            }

            &.f2f-collapsed::before {
              margin: 0 9px 0 7px;
              border-width: 8px 0 8px 8px;
              border-color: transparent currentColor transparent;
            }

            &.f2f-expanded::before {
              margin: 0 6px 4px 2px;
              border-width: 8px 8px 0;
              border-color: currentColor transparent transparent;
            }
          }
        }

        &__section {
          @include section_divider;

          &.nodivider {
            border-bottom-style: none;
          }

          &:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
          }

          > dl {
            margin-bottom: floor($line-height-computed / 2);
            margin-top: floor($line-height-computed / 2);

            > dt {
              margin-top: floor($line-height-computed / 4);
            }
          }

          // We need the good-old clearfix in the description block of the detail page.
          &__intro::after {
            clear: both;
            content: '';
            display: block;
          }
        }
      }
    }

    &__sidebars {
      width: 33%;
      max-width: 480px;
      min-width: 320px;
      order: 1;
      padding: var(--gap-6) var(--gap-2) 0;
      margin-left: ceil(($grid-gutter-width / 2));
    }

    &__sidebar {
      background-color: var(--color-neutral-4);
      color: var(--color-neutral-1);

      // Here comes the good-old clearfix
      @include clearfix;

      &__panel {
        @include sidebar-panel-open;

        border-radius: $border-radius-base;
        box-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
        display: flex;
        flex-direction: column;
        justify-content: center;
        margin: 0;
        position: relative;
        transition: transform 0.4s;
        transform-origin: top center;
        width: 100%;

        // Cosmetic adjustments of Moodle form and its elements to fit in 320px
        > .mform {
          .fdescription.required {
            margin-right: calc(var(--gap-10) - var(--gap-6));
          }

          .fitem {
            margin-bottom: 1em;

            .fitemtitle,
            .felement {
              float: none;
              width: auto;
            }

            .felement {
              padding-top: var(--gap-2);

              label {
                display: inline;
              }
            }

            .fdate_selector > .felement > span {
              white-space: nowrap; // nowrap between checkbox and label
            }

            &.fitem_fselect select,
            &.fitem_ftextarea textarea {
              max-width: 100%;
            }

            > fieldset {
              display: flex;
              flex-direction: column;

              > legend {
                margin-bottom: 0;
                width: auto;
              }
            }

            // NOTE: this is not `&__actionbuttons`
            &_actionbuttons > {
              margin-bottom: 0;

              div.felement {
                display: flex;
                justify-content: center;
                margin: 0;
              }
            }
          }

          .fgroup {
            display: flex;
          }
        }
      }

      @mixin with-heading() {
        text-align: center;

        h3 {
          margin: 1.5em 0;
          padding: 0;
        }
      }

      &__cancellation {
        @include with-heading();
      }

      &__cancellation-confirm {
        @include sidebar-panel-close();
      }

      &__signup-failure {
        @include with-heading();

        background: var(--color-neutral-2);
      }

      &__cancellation-cancellation {
        // NOTE: this is not a typo.
        @include force-link-style();
        color: var(--color-state);

        &:active,
        &:focus,
        &:hover,
        &:active:focus,
        &:active:hover {
          color: var(--color-state-focus);
        }

        &,
        &:active,
        &:focus,
        &:hover,
        &:active:focus,
        &:active:hover {
          font-size: var(--font-size-20);
          line-height: 1;
          position: absolute;
          top: var(--font-size-10);
          right: var(--gap-2);
        }
      }
    }

    &__card {
      &__toggle {
        @include force-link-color();
        @include force-link-style();
      }
    }

    &__cancellation {
      display: none;

      &:checked {
        & ~ .mod_facetoface__eventinfo__sidebar__cancellation {
          @include sidebar-panel-close();
        }
        & ~ .mod_facetoface__eventinfo__sidebar__cancellation-confirm {
          @include sidebar-panel-open();
        }
      }
    }
  }

  .eventlist &__eventinfo {
    display: block;
  }

  &__resource-card {
    &--simple {
      text-align: center;

      > h3 {
        margin-bottom: var(--gap-6);
        line-height: 1.5;
      }
    }

    &--inactive {
      background: var(--color-neutral-2);
    }

    &__buttons {
      text-align: center;
    }

    &__button {
        margin: var(--gap-1);
    }
  }
}

@media only screen and (max-width: $totara-style-screen-sm-min) {
  .mod_facetoface {
    &__filter {
      flex-direction: column;
      flex-wrap: nowrap;
      padding: 0;

      &__item {
        display: flex;
      }

      &__toggle-button__loading {
        display: none;
        padding: var(--gap-2) 0;
        text-align: center;
        width: 100%;
      }

      &__toggle-button {
        align-items: center;
        display: flex;
        text-align: center;
        -moz-user-select: none;
        -webkit-user-select: none;
        user-select: none;
        width: 100%;

        > .flex-icon {
          display: none;
        }

        &__label {
          @include force-link-color();
          @include force-link-style();

          display: block;
          flex: 1;
          &__hidden,
          &__shown {
            padding: var(--gap-2) 0;
          }
          &__hidden {
            display: none;
          }

          &__shown {
            display: block;
          }
        }
      }

      &--loading &__toggle-button__loading {
        display: block;
      }

      &--loading &__toggle-button__label {
        display: none;
      }

      &--closed &__item {
        display: none;
      }

      &--closed &__toggle-button__label__hidden {
        display: block;
      }

      &--closed &__toggle-button__label__shown {
        display: none;
      }

      &__item {
        align-items: center;
        flex-direction: row;
        margin: 0 0 var(--gap-2);
        padding: 0 var(--gap-2);
        width: 100%;

        &__eventtime,
        &__room,
        &__facilitator,
        &__book,
        &__advanced {
          &__select {
            max-width: initial;
            min-width: initial;
            width: calc(100% - var(--font-size-13) * 8);
          }
        }

        &__label {
          width: calc(var(--font-size-13) * 8);
        }

        &__select {
          flex: 1 1 auto;
          margin-bottom: 0;
        }
      }

      &__link {
        display: none;
        margin: 0;
        padding: var(--gap-4) 0;
        text-align: center;
        width: 100%;
      }

      &--active &__toggle:checked ~ &__link {
        display: block;
      }
    }

    &__event_details {
      &__sessions {
        &__rowheader {
          display: none;
        }

        &__cellheader {
          display: block;
        }

        &__row {
          flex-direction: row;
          flex-wrap: wrap;
        }

        &__cellheader {
          width: 8em;

          &--date {
            visibility: hidden;
          }
        }

        &__cell {
          width: calc(100% - 8em);

          &--status,
          &--date,
          &--rooms,
          &--facilitators,
          &--assets,
          &--actions {
            flex: auto;
          }
        }
      }
    }

    &__navigation {
      padding-left: ceil(($grid-gutter-width / 3));
      padding-right: floor(($grid-gutter-width / 3));
    }

    &__eventinfo {
      flex-direction: column;

      &__content {
        flex: auto; // IE11 needs this
        order: 1;
      }

      &__sidebars {
        margin-left: 0;
        margin-bottom: var(--gap-6);
        max-width: none;
        min-width: auto;
        order: 0;
        padding-left: 0;
        padding-right: 0;
        width: auto;

        > .mform {
          float: none;
          padding-bottom: var(--gap-2);
        }
      }
    }
  }
}

#page-mod-facetoface-eventinfo {
  // Remove the padding between the breadcrumbs and the navbar
  #page-content {
    padding-top: 0;
  }
}

.f2f-inline-box {
  display: inline-block;
  vertical-align: middle;
  margin-right: 5px;
}

.custom-facetoface-selection {
  max-width: unset;
}

.custom-facetoface-label {
  font-weight: normal;
}

.f2f-attendees-table {
  margin-bottom: $form-group-margin-bottom;

  input[name='saveattendance'] {
    @include bs-btn-primary();
  }

  .actionsbuttons {
    display: block;

    @media (min-width: $totara-style-screen-md-min) {
      margin-left: 33.3333%;
    }

    @media (min-width: $totara-style-screen-lg-min) {
      margin-left: 25%;
    }
  }
}

.f2f-takeattendance-event-summary {
  margin: var(--gap-4) 0;
}

.f2f-takeattendance-bulk-action-box {
  margin-bottom: $form-group-margin-bottom;
  padding: var(--gap-2);
  border: var(--border-width-thin) $facetoface-border-color solid;
  border-radius: 2px;

  .bulkactionstring {
    margin-top: 7px;
    margin-right: var(--gap-4);
    float: left;

    @media (min-width: $totara-style-screen-md-min) {
      width: 33.3333%;
    }

    @media (min-width: $totara-style-screen-lg-min) {
      width: 25%;
    }
  }

  .facetoface-bulk-actions-selector,
  .facetoface-bulk-actions-picker {
    float: left;
  }

  #selectoptionbefore {
    display: none;
    color: $facetoface-bulk-select-option-before-text-color;

    &.f2f-selectionoptionbefore-error {
      display: block;
    }
  }

  &:after {
    content: '';
    display: block;
    clear: both;
  }
}

div.mod-facetoface__export-options {
  margin-top: var(--gap-4);
}

a.mod_facetoface__action_goback {
  margin: 0 0 var(--gap-1) var(--gap-1);
}

.mod_facetoface__grade {
  display: flex;

  & &__input {
    width: 6em;

    &:focus::placeholder {
      opacity: 0;
    }
    // Workaround for Edge, which does not see the :focus::placeholder.
    &:focus::-ms-input-placeholder {
      opacity: 0;
    }
  }
}

.path-mod-facetoface {
  .mform.signinsheet {
    .legend {
      font: inherit;
    }
  }
  form.mform_seminarevent_cancellation {
    div.eventcancellationtext {
      margin-bottom: var(--gap-4);
    }
  }
}

.path-mod-facetoface {
  form.import_export {
    padding-top: var(--gap-6);

    legend {
      margin-bottom: var(--gap-4);
    }
    .fitem {
      margin-left: 0px;
    }
    div.fitem > fieldset {
      a.mod_facetoface__action_uploadattendance,
      a.mod_facetoface__action_csvexportupload,
      select[name='f2f-export-actions'] {
        margin: 0 var(--gap-2) var(--gap-1) 0px;
      }
    }
  }
  table.userstoupload {
    span.usernotfound {
      margin-left: var(--gap-1);
    }
  }
}

.path-mod-facetoface,
.path-admin-mod-facetoface {
  dl > dd {
    margin-bottom: var(--gap-2);
  }
  .ui-dialog {
    .ui-dialog-titlebar {
      padding: var(--gap-3) var(--gap-4);
      .ui-dialog-title {
        margin: 0;
        span.title {
          h2 {
            margin: 0;
            span#treeview_currently_selected_span_facilitator {
              display: none;
              label {
                margin-right: var(--gap-1);
              }
              span#treeview_selected_text_facilitator {
                font-style: italic;
              }
            }
          }
        }
      }
    }
    .ui-dialog-content {
      .tabtree {
        margin: 0;
      }
      .ui-tabs .ui-tabs-nav {
        // Override Bootstrap  & jQuery UI.
        padding: 0;
        > li {
          border: 0;
          margin: 0;
        }
        .ui-tabs-active > a {
          // Taken from theme/basis/less/bootswatch/bootswatch.less
          background-color: $facetoface-dialog-bg;
          border-right-color: $nav-tabs-border-color;
          border-left-color: $nav-tabs-border-color;
          &,
          &:hover,
          &:focus {
            color: $gray-light;
            background-color: $nav-tabs-active-link-hover-bg;
            border-top-color: $facetoface-dialog-tab-top-shadow;
            box-shadow: 0 -2px $facetoface-dialog-tab-top-shadow,
              -3px 0 $facetoface-dialog-tab-top-shadow-secondary;
          }
        }
        .ui-tabs-active:first-child > a {
          &,
          &:hover,
          &:focus {
            box-shadow: 0 -2px $facetoface-dialog-tab-top-shadow;
          }
        }
      }
      .ui-tabs-panel {
        [id^='item_'] {
          margin-left: calc(var(--gap-1) / 2);
        }
      }
      #search-tab .mform {
        .fitem {
          margin-bottom: var(--gap-1);
        }
        .fitemtitle {
          display: none;
        }
        .felement {
          padding-right: var(--gap-1);
        }
      }
      #search-tab {
        #fitem_id_query {
          margin-bottom: 0;
          .fitemtitle {
            padding: var(--gap-1) 0 0 0;
          }
          .ftext {
            padding-right: 0;
          }
        }
        #fitem_id_dialogsearchsubmitbutton {
          margin-bottom: 0;
          .fsubmit {
            margin-left: var(--gap-1);
          }
        }
      }
      #browse-tab,
      #search-tab {
        ul.treeview li {
          font-size: var(--font-size-13);
          span {
            margin-left: calc(var(--gap-1) / 2);
          }
        }
      }
    }
    .selected {
      .treeview-selected-item {
        display: block;
        font-size: var(--font-size-13);
      }
      // Taken from theme/basis/less
      div:hover span.deletebutton,
      .deletebutton {
        background: transparent
          url([[pix:totara_core|jquery_ui_dialog/ui-icons_cd0a0a_256x240]])
          no-repeat -80px -128px;
      }
    }
  }
  .ui-dialog-content .mform {
    .fitem {
      margin-left: 0;
      margin-right: 0;
    }
    .fitemtitle,
    .felement,
    legend {
      padding-left: 0;
    }

    legend {
      // reset to totara dialog modal colour
      color: inherit;
    }

    .felement {
      padding-right: 0;
    }
  }
}

.path-admin-mod-facetoface-facilitator {
  form.manage_facilitator {
    .felement > input.facilitator_search {
      margin-right: 0;
    }
    input[name='facilitatorselector'] {
      margin-right: var(--gap-2);
    }
  }
  table#facetoface_facilitators {
    td.facilitator_namelink,
    td.facilitator_name {
      span.userfullname {
        margin-left: var(--gap-1);
      }
    }
  }
}

.path-mod-facetoface-notification {
  form.facetoface_notification_form {
    div#fgroup_id_recipients {
      fieldset.fgroup {
        div.fitem {
          margin-bottom: var(--gap-2);
          span.recipients_status {
            font-weight: bold;
          }
        }
      }
    }
  }
}
