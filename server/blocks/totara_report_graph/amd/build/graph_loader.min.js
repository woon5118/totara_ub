define(["core/str","core/templates","core/config"],function(a,b,c){function d(d){var e=parseInt(d.getAttribute("data-block_totara_report_graph-blockid"),10);M.util.js_pending("block_totara_report_graph-graphloading");var f=function(){a.get_string("errorrendergraph","block_totara_report_graph").done(function(a){d.innerHTML=a})},g=function(a){"undefined"==typeof a.chart?f():b.render("totara_reportbuilder/chartjs",a).done(function(a,c){d.innerHTML=a,b.runTemplateJS(c).then(function(){M.util.js_complete("block_totara_report_graph-graphloading")})})},h=new FormData;h.append("blockid",e),h.append("sesskey",c.sesskey),h.append("currentlanguage",c.currentlanguage),fetch(c.wwwroot+"/blocks/totara_report_graph/ajax_graph.php",{method:"POST",credentials:"same-origin",body:h}).then(function(a){return a.json()}).then(g)["catch"](f)}return{init:d}});