define(["jquery"],function(a){var b=function(b){var c="#inst"+b;if(0!==a(c).find(".block-totara-recently-viewed.block-trv-tiles").length){var d,e=function(){clearTimeout(d),d=setTimeout(function(){var b=a("#region-main, #block-region-top, #block-region-bottom").find(c+":first");if(0!==b.length&&!b.is(".hidden")){var d=b.width(),e=Math.floor(d/214);e||(e=1);var f=100/e;1===e?b.find(".block-trv-layout-horizontal").addClass("block-trv-layout-horizontal-single"):b.find(".block-trv-layout-horizontal").removeClass("block-trv-layout-horizontal-single"),b.find("li.block-trv-card-li").css("width",f+"%")}},200)};e(),M.core.dock&&M.core.dock.get?(M.core.dock.get().on("dock:itemschanged",e),M.core.dock.get().on("dock:resizepanelcomplete",e),M.core.dock.get().on("dock:initialised",e)):a("body").one("click",".moveto",function(){setTimeout(function(){M.core.dock&&M.core.dock.get&&(M.core.dock.get().on("dock:itemschanged",e),M.core.dock.get().on("dock:resizepanelcomplete",e),M.core.dock.get().on("dock:initialised",e))},200)}),a(window).on("resize",e)}};return{init:b}});