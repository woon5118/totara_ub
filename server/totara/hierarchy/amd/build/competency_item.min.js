define(["jquery","core/config","core/str"],function(a,b,c){var d=function(){},e=function(e,f){c.get_string("assignrelatedcompetencies","totara_hierarchy").done(function(a){var c=b.wwwroot+"/totara/hierarchy/prefix/competency/related/";totaraMultiSelectDialog("related",a,c+"find.php?sesskey="+b.sesskey+"&id="+e,c+"save.php?sesskey="+b.sesskey+"&id="+e+"&deleteexisting=1&add=")}),d.prototype=new totaraDialog_handler_treeview_multiselect,d.prototype._update=function(b){this._dialog.hide(),a(".noitems-"+this._title).remove();var c=a(b).find("#list-evidence"),d=a("#list-evidence");d.length?d.replaceWith(c):a("div#evidence-list-container").append(c)};var g=b.wwwroot+"/totara/hierarchy/prefix/competency/evidenceitem/",h=g+"add.php?sesskey="+b.sesskey+"&competency="+e+"&type=coursecompletion&instance=0&deleteexisting=1&update=",i={},j=new d;j.baseurl=g;var k=[];k.push({key:"save",component:"totara_core"}),k.push({key:"cancel",component:"moodle"}),k.push({key:"assigncoursecompletions",component:"totara_hierarchy"}),c.get_strings(k).done(function(a){for(var b=[],c=0;c<k.length;c++)b[k[c].key]=a[c];i[b.save]=function(){j._save(h)},i[b.cancel]=function(){j._cancel()},totaraDialogs.evidence=new totaraDialog("evidence","show-evidence-dialog",{buttons:i,title:"<h2>"+b.assigncoursecompletions+"</h2>"},g+"edit.php?id="+e,j)})};return{item:function(b,c){var d=a.Deferred();d.done(function(){e(b,c)}),window.dialogsInited?d.resolve():(a.isArray(window.dialoginits)||(window.dialoginits=[]),window.dialoginits.push(d.resolve))},template:function(d){var e=a.Deferred();e.done(function(){var a=b.wwwroot+"/totara/hierarchy/prefix/competency/template/";c.get_string("assignnewcompetency","competency").done(function(b){totaraMultiSelectDialog("assignment","<h2>"+b+"</h2>",a+"find_competency.php?templateid="+d,a+"save_competency.php?templateid="+d+"&deleteexisting=1&add=")})}),window.dialogsInited?e.resolve():(a.isArray(window.dialoginits)||(window.dialoginits=[]),window.dialoginits.push(e.resolve))}}});