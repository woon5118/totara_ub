define(["jquery","core/templates","core/ajax","core/str","core/form-autocomplete","core/url"],function(a,b,c,d,e,f){function g(a,b){return b}function h(a,b,d,e){M.util.js_pending("totara_evidence_type_search_"+b),c.call([{methodname:"totara_evidence_type_search",args:{string:b.trim()}}])[0].then(function(a){d(a),M.util.js_complete("totara_evidence_type_search_"+b)})["catch"](e)}function i(a){M.util.js_pending("totara_evidence_type_details_"+a),c.call([{methodname:"totara_evidence_type_details",args:{type_id:a,user_id:document.querySelector("[data-user-id]").getAttribute("data-user-id")}}])[0].then(function(c){b.render("totara_evidence/_select_type_metadata",c).then(function(c){b.replaceNodeContents(document.querySelector("[data-type-metadata]"),c),document.querySelector("[data-type-submit]").setAttribute("data-type-id",a),document.querySelector("[data-type-infobox]").classList.remove("tw-evidence__hidden"),M.util.js_complete("totara_evidence_type_details_"+a)})})}function j(){d.get_string("select_type","totara_evidence").then(function(b){e.enhance("[data-type-autocomplete]",!1,"totara_evidence/evidence_select_type",b),a("[data-type-autocomplete]").change(function(a){i(a.currentTarget.value)}),document.querySelector("[data-type-buttons]").addEventListener("click",function(a){if(a.preventDefault(),a.target.closest("[data-type-submit]")){var b={typeid:a.target.getAttribute("data-type-id")};a.target.getAttribute("data-user-id")&&(b.user_id=a.target.getAttribute("data-user-id")),window.location.href=f.relativeUrl("/totara/evidence/create.php",b)}else a.target.closest("[data-type-cancel]")&&(document.querySelector("[data-type-infobox]").classList.add("tw-evidence__hidden"),location.reload())})})}return{init:j,processResults:g,transport:h}});