define(["core/sessionstorage"],function(a){function b(a){return this instanceof b?(this.activeClass="totara_core__myreports__itemstyletoggle__btn_active",this.storageKey="tw-myreports-switcher-state",this.widget=a,this.control=a.querySelector("[data-tw-switcher]"),this.targetClass=a.getAttribute("data-tw-target-class"),this.target=a.querySelector(a.getAttribute("data-tw-target")),this.setup(),void this.widget.classList.add("tw-list-toggle-loaded")):new b(a)}b.prototype={setup:function(){var b=a.get(this.storageKey);if(b){var c=this.widget.querySelector("[data-tw-trigger="+b+"]");if(c){if(c.classList.contains(this.activeClass))return;return void this.toggle(c)}}for(var d=this.widget.querySelectorAll("[data-tw-trigger]"),e=0;e<d.length;e++){var f=d[e].getAttribute("data-tw-trigger"),g=this.targetClass+"--"+f;this.target.classList.contains(g)&&d[e].classList.add(this.activeClass)}},events:function(){var a=this;this.control.addEventListener("click",function(b){if(b.preventDefault(),b.target&&b.target.closest("[data-tw-trigger]")){var c=b.target.closest("[data-tw-trigger]");if(c.classList.contains(a.activeClass))return;a.toggle(c)}})},toggle:function(b){for(var c,d=this.widget.querySelectorAll("[data-tw-trigger]"),e=0;e<d.length;e++)c=this.targetClass+"--"+d[e].getAttribute("data-tw-trigger"),this.target.classList.remove(c),d[e].classList.remove(this.activeClass);b.classList.add(this.activeClass),c=this.targetClass+"--"+b.getAttribute("data-tw-trigger"),this.target.classList.add(c),a.set(this.storageKey,b.getAttribute("data-tw-trigger"))}};var c=function(a){return new Promise(function(c){var d=new b(a);d.events(),c(d)})};return{init:c}});