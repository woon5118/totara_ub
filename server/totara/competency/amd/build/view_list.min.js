define(["totara_competency/filters","totara_competency/action_list_manager","totara_competency/filter_manager","totara_competency/loader_manager"],function(a,b,c,d){function e(){return this instanceof e?(this.hideClass="tw-basketlist__hide",this.filters=null,this.loader=null,this.selectors=null,this.listParent=null,void(this.list=null)):new e}return e.prototype.setListParent=function(a){this.listParent=a.querySelector("[data-tw-basket-list]")},e.prototype.reset=function(){this.filters.clearFilters(),this.selectors.clearFiltersRegionPanel(),this.selectors.clearPrimarySearch(),this.selectors.clearPrimaryTree()},e.prototype.filterEvents=function(a){var b=this;a.onFiltersUpdate=function(){b.list.setRequestArg("filters",a.getFilters())}},e.prototype.listEvents=function(a){var b=this;a.onPreRequest=function(){b.loader.show()},a.onPostRequest=function(){b.loader.hide()}},e.prototype.selectorEvents=function(a){var b=this;a.onFilterRegionPanelAdd=function(a){b.filters.setFilter(a.detail.key,a.detail.val,a.detail.groupValues)},a.onFilterRegionPanelUpdate=function(){b.list.update()},a.onFilterRegionPanelReset=function(a){var c=a.detail.groupValues?a.detail.groupValues:"";b.filters.removeFilter(a.detail.key,c)},a.onPrimaryFilterSearchAdd=function(a){b.filters.setFilter(a.detail.key,a.detail.val,a.detail.groupValues)},a.onPrimaryFilterSearchUpdate=function(){b.list.update()},a.onPrimaryFilterSearchReset=function(a){var c=a.detail.groupValues?a.detail.groupValues:"";b.filters.removeFilter(a.detail.key,c)},a.onPrimaryFilterTreeAdd=function(a){b.filters.setFilter(a.detail.key,a.detail.val,a.detail.groupValues)},a.onPrimaryFilterTreeUpdate=function(){b.list.update()},a.onPrimaryFilterTreeReset=function(a){var c=a.detail.groupValues?a.detail.groupValues:"";b.filters.removeFilter(a.detail.key,c)}},e.prototype.initExtend=function(){},e.prototype.init=function(e){var f=e.parent,g="viewerPause",h=this;return new Promise(function(i){M.util.js_pending(g),h.setListParent(f),h.loader=d.init(f),h.loader.show(),h.filters=new a,h.filterEvents(h.filters),e.list.defaultFilters&&(h.filters.setDefaults(e.list.defaultFilters),e.list.serviceArgs&&e.list.serviceArgs.filters?e.list.serviceArgs.filters=Object.assign(e.list.serviceArgs.filters,e.list.defaultFilters):(e.list.serviceArgs||(e.list.serviceArgs={}),e.list.serviceArgs.filters=e.list.defaultFilters)),h.list=b.init(f,e.list),h.listEvents(h.list),h.selectors=c.init(f),h.selectorEvents(h.selectors),h.initExtend(),i();var j=[h.list.prepare()];Promise.all(j).then(function(){h.list.update(),M.util.js_complete(g)})})},e});