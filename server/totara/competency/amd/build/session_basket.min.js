define(["totara_competency/basket","core/ajax"],function(a,b){function c(b){a.call(this,b,!0)}return c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.add=function(a){return this.doUpdate("add",a)},c.prototype.remove=function(a){return this.doUpdate("remove",a)},c.prototype.replace=function(a){return this.doUpdate("replace",a)},c.prototype.doUpdate=function(a,c){Array.isArray(c)||(c=[c]);var d=this;return new Promise(function(e){var f={args:{action:a,basket:d.basketKey,ids:c},methodname:"totara_core_basket_update"};b.getData(f).then(function(a){e(a.results.ids)})})},c.prototype.load=function(){var a=this;return new Promise(function(c){var d={args:{basket:a.basketKey},methodname:"totara_core_basket_show"};b.getData(d).then(function(a){c(a.results.ids)})})},c.prototype.copyFrom=function(d){var e=this;return d instanceof c?new Promise(function(a){var c={args:{options:{replace:!0},sourcebasket:d.getKey(),targetbasket:e.basketKey},methodname:"totara_core_basket_copy"};b.getData(c).then(function(b){a(b.results.ids)})}):a.prototype.copyFrom.call(e,d)},c.prototype.moveFrom=function(d){var e=this;return d instanceof c?new Promise(function(a){var c={args:{options:{deletesource:!0,replace:!0},sourcebasket:d.getKey(),targetbasket:e.basketKey},methodname:"totara_core_basket_copy"};b.getData(c).then(function(b){a(b.results.ids)})}):a.prototype.moveFrom.call(e,d)},c.prototype["delete"]=function(){var a=this;return new Promise(function(c){var d={args:{basket:a.basketKey},methodname:"totara_core_basket_delete"};b.getData(d).then(function(){c()})})},c});