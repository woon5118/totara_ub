define([],function(){function a(){return this instanceof a?(this.activeClass="tw-list__btn_active",this.disabledClass="tw-list__btn_disabled",this.eventKey="",this.manualDisable="data-tw-list-togglelevel-disable",this.manualSwitchState="data-tw-list-togglelevel-manual",void(this.widget="")):new a}a.prototype={clearAndDisableBtns:function(){var a=this.widget.querySelector("."+this.activeClass);a&&a.classList.remove(this.activeClass),this.widget.classList.add(this.disabledClass)},events:function(){var a=this;this.widget.addEventListener("click",function(b){if(b.preventDefault(),b.target){if(b.target.closest("."+a.disabledClass))return void b.preventDefault();if(b.target.closest("[data-tw-list-toggleLevel-type]")){var c=b.target,d=c.getAttribute("data-tw-list-toggleLevel-type");if(c.classList.contains(a.activeClass))return;a.toggleActive(c),a.triggerEvent("changed",{level:d})}}});var b=new MutationObserver(function(){"true"===a.widget.getAttribute(a.manualDisable)&&(a.clearAndDisableBtns(),a.widget.removeAttribute(a.manualDisable))});b.observe(this.widget,{attributes:!0,attributeFilter:[a.manualDisable],subtree:!1});var c=new MutationObserver(function(){if(a.widget.getAttribute(a.manualSwitchState)){var b,c=a.widget.getAttribute(a.manualSwitchState);b="all"===c?a.widget.querySelector('[data-tw-list-toggleLevel-type="all"]'):a.widget.querySelector('[data-tw-list-toggleLevel-type="current"]'),a.toggleActive(b),a.widget.removeAttribute(a.manualSwitchState)}});c.observe(this.widget,{attributes:!0,attributeFilter:[a.manualSwitchState],subtree:!1})},setEventKey:function(){this.eventKey=this.widget.getAttribute("data-tw-list-toggleLevel-events")},setParent:function(a){this.widget=a},toggleActive:function(a){var b=this.widget.querySelector("."+this.activeClass);b&&b.classList.remove(this.activeClass),this.widget.classList.remove(this.disabledClass),a.classList.add(this.activeClass)},triggerEvent:function(a,b){var c=new CustomEvent(this.eventKey+":"+a,{bubbles:!0,detail:b});this.widget.dispatchEvent(c)}};var b=function(b){return new Promise(function(c){var d=new a;d.setParent(b),d.setEventKey(),d.events(),c(d)})};return{init:b}});