define(["core/templates","core/notification"],function(a,b){function c(){return this instanceof c?(this.widget="",void(this.clearEvents=!1)):new c}c.prototype={events:function(){this.widget.addEventListener("click",function(a){!a.target})},bubbledEventsListener:function(){var a=this,b="totara_competency/pathway:";this.widget.addEventListener(b+"update",function(b){b.detail.key?b.detail.pathway?a.logEvent(b):a.showNotification("error",b.type+" event receved without detail",!0):a.showNotification("error",b.type+" event receved without key",!0)}),this.widget.addEventListener(b+"dirty",function(b){b.detail.key?a.logEvent(b):a.showNotification("error",b.type+" event receved without key",!0),a.clearEvents=!0})},setParent:function(a){this.widget=a},logEvent:function(a){var b='Received :"'+a.type+'".<br/>Detail  : <br/>'+JSON.stringify(a.detail)+"<br/><br/>";this.showNotification("success",b)},showNotification:function(a,c){this.clearEvents&&(b.clearNotifications(),this.clearEvents=!1),b.addNotification({message:c,type:a}),window.scrollTo(0,0)}};var d=function(a){return new Promise(function(b){var d=new c;d.setParent(a),d.events(),d.bubbledEventsListener(),b(d)})};return{init:d}});