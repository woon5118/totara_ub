define(["jquery","core/str","totara_plan/component","core/config","core/notification"],function(a,b,c,d,e){return{init:function(f,g,h){c.init({plan_id:f,page:g,component_name:h});const i="initialise_competency_find_dialog";var j=function(){var g=function(){this.baseUrl="",this.standardButtons={},this.continueButtons={},this.continuesaveButtons={}};g.prototype=new c.totaraDialog_handler_preRequisite,g._open=function(){var a=comp_update_allowed?this.continueButtons:this.standardButtons;this._dialog.dialog.dialog("option","buttons",a)},g.prototype._continue=function(c){const d=a(".selected > div > span",this._container),f=this._get_ids(d).join(",");return f?void this._dialog._request(c+f,{object:this,method:"_continueRender"}):void b.get_string("error:nocompetency","totara_program").done(function(a){e.alert("",a)})},g.prototype._continueRender=function(a){if("NOCOURSES"===a.substring(0,9)){const b=this.continueskipurl+a.substr(10);return this._dialog._request(b,{object:this,method:"_update"}),!1}return this._dialog.dialog.dialog("option","buttons",this.continuesaveButtons),!0},totaraDialog_handler.prototype._continueSave=function(b){const c=a("form",g._container).serialize();this._dialog._request(b+c,{object:this,method:"_update"})};const h=d.wwwroot+"/totara/plan/components/competency/",j=h+"confirm.php?sesskey="+d.sesskey+"&id="+f+"&update=",k=h+"update.php?sesskey="+d.sesskey+"&id="+f+"&update=",l=k+"id="+f+"&update=",m=h+"update.php?",n=new g;n.baseurl=h,n.continueskipurl=l;const o=[{key:"save",component:"totara_core"},{key:"cancel",component:"moodle"},{key:"continue",component:"moodle"},{key:"addcompetencys",component:"totara_plan"}];b.get_strings(o).done(function(a){const b=a[0],c=a[1],d=a[2];n.standardButtons[b]=function(){n._save(k)},n.standardButtons[c]=function(){n._cancel()},n.continueButtons[d]=function(){n._continue(j)},n.continueButtons[c]=function(){n._cancel()},n.continuesaveButtons[b]=function(){n._continueSave(m)},n.continuesaveButtons[c]=function(){n._cancel()},totaraDialogs.evidence=new totaraDialog("assigncompetencies","show-competency-dialog",{buttons:comp_update_allowed?n.continueButtons:n.standardButtons,title:"<h2>"+a[3]+"</h2>"},h+"find.php?id="+f,n),M.util.js_complete(i)})};M.util.js_pending(i),window.dialogsInited?j():(window.dialoginits=window.dialoginits||[],window.dialoginits.push(j))}}});