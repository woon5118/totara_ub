define(["core/webapi","core/modal_factory","core/modal_events"],function(a,b,c){var d={approveContent:"totara_reportedcontent_approve_review",removeContent:"totara_reportedcontent_remove_review"},e=function(a,b){document.querySelector("#reportedcontent-actions-"+a+" .actions").style.display="none",document.querySelector("#reportedcontent-actions-"+a+" .loading").style.display="none",document.querySelector("#reportedcontent-actions-"+a+" .status-"+b).style.display="block"},f=function(a,b){var c=document.querySelector("#reportedcontent-time-reviewed-"+a);c&&(c.textContent=b)},g=function(a){document.querySelector("#reportedcontent-actions-"+a+" .loading").style.display="block",document.querySelector("#reportedcontent-actions-"+a+" .actions").style.display="none"},h=function(){var h=document.querySelector('table[data-source="rb_source_reportedcontent"]');if(h){var i=function(b,c){M.util.js_pending(b),g(c),a.call({operationName:b,variables:{review_id:c}}).then(function(a){e(c,a.review.status),f(c,a.review.time_reviewed_description),M.util.js_complete(b)})},j=function(a){var e=a.target||void 0;if(e&&"BUTTON"===e.tagName){var f=e.getAttribute("data-report")||null,g=e.getAttribute("data-action")||null;f&&g&&("approve"===g?i(d.approveContent,f):"remove"===g&&b.create({type:b.types.CONFIRM,title:e.getAttribute("data-modal-title"),body:e.getAttribute("data-modal-content")},void 0,{yesstr:e.getAttribute("data-yes"),nostr:e.getAttribute("data-no")}).done(function(a){a.getRoot().on(c.yes,function(){i(d.removeContent,f)}),a.show()}))}};h.addEventListener("click",j)}};return{init:h}});