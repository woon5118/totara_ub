define(["core/webapi"],function(a){function b(a){this.element=a,this.id=a.getAttribute("data-report-id")}function c(a){return new Promise(function(c){var d=new b(a);d.events(),c(d)})}return b.prototype.events=function(){var a=this;this.element.addEventListener("totara_core/inline-edit:save",function(b){b.detail.preventUpdate(),a.save(b.detail.text).then(function(a){var c=document.createElement("textarea");c.innerHTML=a,b.detail.target.innerText=c.value})["catch"](function(a){a.message&&a.message.indexOf("Internal server error")&&(b.detail.controller.edit(),b.detail.controller.showCustomError("err_required","form"))})})},b.prototype.save=function(b){var c=a.call({operationName:"totara_reportbuilder_update_report_title",variables:{reportid:this.id,title:b}}).then(function(a){return a.totara_reportbuilder_update_report_title});return M.util.js_pending("totara_reportbuilder-title-save"),c.then(function(){M.util.js_complete("totara_reportbuilder-title-save")}),c},{init:c}});